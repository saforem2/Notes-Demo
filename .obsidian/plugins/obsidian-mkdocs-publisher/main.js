/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var Wu=Object.create;var qn=Object.defineProperty;var qu=Object.getOwnPropertyDescriptor;var zu=Object.getOwnPropertyNames;var Zu=Object.getPrototypeOf,Ku=Object.prototype.hasOwnProperty;var st=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),$r=(t,e)=>{for(var n in e)qn(t,n,{get:e[n],enumerable:!0})},ls=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of zu(e))!Ku.call(t,i)&&i!==n&&qn(t,i,{get:()=>e[i],enumerable:!(r=qu(e,i))||r.enumerable});return t};var hn=(t,e,n)=>(n=t!=null?Wu(Zu(t)):{},ls(e||!t||!t.__esModule?qn(n,"default",{value:t,enumerable:!0}):n,t)),Yu=t=>ls(qn({},"__esModule",{value:!0}),t);var w=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{o(n.next(u))}catch(l){i(l)}},a=u=>{try{o(n.throw(u))}catch(l){i(l)}},o=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,a);o((n=n.apply(t,e)).next())});var $i=st(ze=>{"use strict";Object.defineProperty(ze,"__esModule",{value:!0});require("obsidian");var nt=class extends Error{},di=class extends nt{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}},hi=class extends nt{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}},pi=class extends nt{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}},kt=class extends nt{},Fr=class extends nt{constructor(e){super(`Invalid unit ${e}`)}},ge=class extends nt{},We=class extends nt{constructor(){super("Zone is an abstract class")}},P="numeric",Me="short",we="long",xr={year:P,month:P,day:P},_a={year:P,month:Me,day:P},Jl={year:P,month:Me,day:P,weekday:Me},Ga={year:P,month:we,day:P},Ha={year:P,month:we,day:P,weekday:we},Ua={hour:P,minute:P},Wa={hour:P,minute:P,second:P},qa={hour:P,minute:P,second:P,timeZoneName:Me},za={hour:P,minute:P,second:P,timeZoneName:we},Za={hour:P,minute:P,hourCycle:"h23"},Ka={hour:P,minute:P,second:P,hourCycle:"h23"},Ya={hour:P,minute:P,second:P,hourCycle:"h23",timeZoneName:Me},Ja={hour:P,minute:P,second:P,hourCycle:"h23",timeZoneName:we},Qa={year:P,month:P,day:P,hour:P,minute:P},Xa={year:P,month:P,day:P,hour:P,minute:P,second:P},eo={year:P,month:Me,day:P,hour:P,minute:P},to={year:P,month:Me,day:P,hour:P,minute:P,second:P},Ql={year:P,month:Me,day:P,weekday:Me,hour:P,minute:P},no={year:P,month:we,day:P,hour:P,minute:P,timeZoneName:Me},ro={year:P,month:we,day:P,hour:P,minute:P,second:P,timeZoneName:Me},io={year:P,month:we,day:P,weekday:we,hour:P,minute:P,timeZoneName:we},so={year:P,month:we,day:P,weekday:we,hour:P,minute:P,second:P,timeZoneName:we},Ot=class{get type(){throw new We}get name(){throw new We}get ianaName(){return this.name}get isUniversal(){throw new We}offsetName(e,n){throw new We}formatOffset(e,n){throw new We}offset(e){throw new We}equals(e){throw new We}get isValid(){throw new We}},ii=null,Xt=class extends Ot{static get instance(){return ii===null&&(ii=new Xt),ii}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return oo(e,n,r)}formatOffset(e,n){return On(this.offset(e),n)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return e.type==="system"}get isValid(){return!0}},vr={};function Xl(t){return vr[t]||(vr[t]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),vr[t]}var ec={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function tc(t,e){let n=t.format(e).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,s,a,o,u,l,d]=r;return[a,i,s,o,u,l,d]}function nc(t,e){let n=t.formatToParts(e),r=[];for(let i=0;i<n.length;i++){let{type:s,value:a}=n[i],o=ec[s];s==="era"?r[o]=a:G(o)||(r[o]=parseInt(a,10))}return r}var gr={},Ie=class extends Ot{static create(e){return gr[e]||(gr[e]=new Ie(e)),gr[e]}static resetCache(){gr={},vr={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch{return!1}}constructor(e){super(),this.zoneName=e,this.valid=Ie.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:n,locale:r}){return oo(e,n,r,this.name)}formatOffset(e,n){return On(this.offset(e),n)}offset(e){let n=new Date(e);if(isNaN(n))return NaN;let r=Xl(this.name),[i,s,a,o,u,l,d]=r.formatToParts?nc(r,n):tc(r,n);o==="BC"&&(i=-Math.abs(i)+1);let D=Ai({year:i,month:s,day:a,hour:u===24?0:u,minute:l,second:d,millisecond:0}),g=+n,y=g%1e3;return g-=y>=0?y:1e3+y,(D-g)/(60*1e3)}equals(e){return e.type==="iana"&&e.name===this.name}get isValid(){return this.valid}},da={};function rc(t,e={}){let n=JSON.stringify([t,e]),r=da[n];return r||(r=new Intl.ListFormat(t,e),da[n]=r),r}var mi={};function gi(t,e={}){let n=JSON.stringify([t,e]),r=mi[n];return r||(r=new Intl.DateTimeFormat(t,e),mi[n]=r),r}var Di={};function ic(t,e={}){let n=JSON.stringify([t,e]),r=Di[n];return r||(r=new Intl.NumberFormat(t,e),Di[n]=r),r}var bi={};function sc(t,e={}){let{base:n,...r}=e,i=JSON.stringify([t,r]),s=bi[i];return s||(s=new Intl.RelativeTimeFormat(t,e),bi[i]=s),s}var kn=null;function ac(){return kn||(kn=new Intl.DateTimeFormat().resolvedOptions().locale,kn)}function oc(t){let e=t.indexOf("-x-");e!==-1&&(t=t.substring(0,e));let n=t.indexOf("-u-");if(n===-1)return[t];{let r,i;try{r=gi(t).resolvedOptions(),i=t}catch{let u=t.substring(0,n);r=gi(u).resolvedOptions(),i=u}let{numberingSystem:s,calendar:a}=r;return[i,s,a]}}function uc(t,e,n){return(n||e)&&(t.includes("-u-")||(t+="-u"),n&&(t+=`-ca-${n}`),e&&(t+=`-nu-${e}`)),t}function lc(t){let e=[];for(let n=1;n<=12;n++){let r=B.utc(2016,n,1);e.push(t(r))}return e}function cc(t){let e=[];for(let n=1;n<=7;n++){let r=B.utc(2016,11,13+n);e.push(t(r))}return e}function Dr(t,e,n,r,i){let s=t.listingMode(n);return s==="error"?null:s==="en"?r(e):i(e)}function fc(t){return t.numberingSystem&&t.numberingSystem!=="latn"?!1:t.numberingSystem==="latn"||!t.locale||t.locale.startsWith("en")||new Intl.DateTimeFormat(t.intl).resolvedOptions().numberingSystem==="latn"}var yi=class{constructor(e,n,r){this.padTo=r.padTo||0,this.floor=r.floor||!1;let{padTo:i,floor:s,...a}=r;if(!n||Object.keys(a).length>0){let o={useGrouping:!1,...r};r.padTo>0&&(o.minimumIntegerDigits=r.padTo),this.inf=ic(e,o)}}format(e){if(this.inf){let n=this.floor?Math.floor(e):e;return this.inf.format(n)}else{let n=this.floor?Math.floor(e):Ni(e,3);return Y(n,this.padTo)}}},vi=class{constructor(e,n,r){this.opts=r;let i;if(e.zone.isUniversal){let a=-1*(e.offset/60),o=a>=0?`Etc/GMT+${a}`:`Etc/GMT${a}`;e.offset!==0&&Ie.create(o).valid?(i=o,this.dt=e):(i="UTC",r.timeZoneName?this.dt=e:this.dt=e.offset===0?e:B.fromMillis(e.ts+e.offset*60*1e3))}else e.zone.type==="system"?this.dt=e:(this.dt=e,i=e.zone.name);let s={...this.opts};s.timeZone=s.timeZone||i,this.dtf=gi(n,s)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}},wi=class{constructor(e,n,r){this.opts={style:"long",...r},!n&&ao()&&(this.rtf=sc(e,r))}format(e,n){return this.rtf?this.rtf.format(e,n):Sc(n,e,this.opts.numeric,this.opts.style!=="long")}formatToParts(e,n){return this.rtf?this.rtf.formatToParts(e,n):[]}},W=class{static fromOpts(e){return W.create(e.locale,e.numberingSystem,e.outputCalendar,e.defaultToEN)}static create(e,n,r,i=!1){let s=e||K.defaultLocale,a=s||(i?"en-US":ac()),o=n||K.defaultNumberingSystem,u=r||K.defaultOutputCalendar;return new W(a,o,u,s)}static resetCache(){kn=null,mi={},Di={},bi={}}static fromObject({locale:e,numberingSystem:n,outputCalendar:r}={}){return W.create(e,n,r)}constructor(e,n,r,i){let[s,a,o]=oc(e);this.locale=s,this.numberingSystem=n||a||null,this.outputCalendar=r||o||null,this.intl=uc(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=i,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=fc(this)),this.fastNumbersCached}listingMode(){let e=this.isEnglish(),n=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return e&&n?"en":"intl"}clone(e){return!e||Object.getOwnPropertyNames(e).length===0?this:W.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,e.defaultToEN||!1)}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,n=!1,r=!0){return Dr(this,e,r,co,()=>{let i=n?{month:e,day:"numeric"}:{month:e},s=n?"format":"standalone";return this.monthsCache[s][e]||(this.monthsCache[s][e]=lc(a=>this.extract(a,i,"month"))),this.monthsCache[s][e]})}weekdays(e,n=!1,r=!0){return Dr(this,e,r,po,()=>{let i=n?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},s=n?"format":"standalone";return this.weekdaysCache[s][e]||(this.weekdaysCache[s][e]=cc(a=>this.extract(a,i,"weekday"))),this.weekdaysCache[s][e]})}meridiems(e=!0){return Dr(this,void 0,e,()=>mo,()=>{if(!this.meridiemCache){let n={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[B.utc(2016,11,13,9),B.utc(2016,11,13,19)].map(r=>this.extract(r,n,"dayperiod"))}return this.meridiemCache})}eras(e,n=!0){return Dr(this,e,n,go,()=>{let r={era:e};return this.eraCache[e]||(this.eraCache[e]=[B.utc(-40,1,1),B.utc(2017,1,1)].map(i=>this.extract(i,r,"era"))),this.eraCache[e]})}extract(e,n,r){let i=this.dtFormatter(e,n),s=i.formatToParts(),a=s.find(o=>o.type.toLowerCase()===r);return a?a.value:null}numberFormatter(e={}){return new yi(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,n={}){return new vi(e,this.intl,n)}relFormatter(e={}){return new wi(this.intl,this.isEnglish(),e)}listFormatter(e={}){return rc(this.intl,e)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}},si=null,se=class extends Ot{static get utcInstance(){return si===null&&(si=new se(0)),si}static instance(e){return e===0?se.utcInstance:new se(e)}static parseSpecifier(e){if(e){let n=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(n)return new se(Pr(n[1],n[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${On(this.fixed,"narrow")}`}get ianaName(){return this.fixed===0?"Etc/UTC":`Etc/GMT${On(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,n){return On(this.fixed,n)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return e.type==="fixed"&&e.fixed===this.fixed}get isValid(){return!0}},Fi=class extends Ot{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}};function lt(t,e){if(G(t)||t===null)return e;if(t instanceof Ot)return t;if(dc(t)){let n=t.toLowerCase();return n==="default"?e:n==="local"||n==="system"?Xt.instance:n==="utc"||n==="gmt"?se.utcInstance:se.parseSpecifier(n)||Ie.create(t)}else return St(t)?se.instance(t):typeof t=="object"&&t.offset&&typeof t.offset=="number"?t:new Fi(t)}var ha=()=>Date.now(),pa="system",ma=null,ga=null,Da=null,ba=60,ya,K=class{static get now(){return ha}static set now(e){ha=e}static set defaultZone(e){pa=e}static get defaultZone(){return lt(pa,Xt.instance)}static get defaultLocale(){return ma}static set defaultLocale(e){ma=e}static get defaultNumberingSystem(){return ga}static set defaultNumberingSystem(e){ga=e}static get defaultOutputCalendar(){return Da}static set defaultOutputCalendar(e){Da=e}static get twoDigitCutoffYear(){return ba}static set twoDigitCutoffYear(e){ba=e%100}static get throwOnInvalid(){return ya}static set throwOnInvalid(e){ya=e}static resetCaches(){W.resetCache(),Ie.resetCache()}};function G(t){return typeof t>"u"}function St(t){return typeof t=="number"}function Tr(t){return typeof t=="number"&&t%1===0}function dc(t){return typeof t=="string"}function hc(t){return Object.prototype.toString.call(t)==="[object Date]"}function ao(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function pc(t){return Array.isArray(t)?t:[t]}function va(t,e,n){if(t.length!==0)return t.reduce((r,i)=>{let s=[e(i),i];return r&&n(r[0],s[0])===r[0]?r:s},null)[1]}function mc(t,e){return e.reduce((n,r)=>(n[r]=t[r],n),{})}function en(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function tt(t,e,n){return Tr(t)&&t>=e&&t<=n}function gc(t,e){return t-e*Math.floor(t/e)}function Y(t,e=2){let n=t<0,r;return n?r="-"+(""+-t).padStart(e,"0"):r=(""+t).padStart(e,"0"),r}function ut(t){if(!(G(t)||t===null||t===""))return parseInt(t,10)}function Et(t){if(!(G(t)||t===null||t===""))return parseFloat(t)}function Pi(t){if(!(G(t)||t===null||t==="")){let e=parseFloat("0."+t)*1e3;return Math.floor(e)}}function Ni(t,e,n=!1){let r=10**e;return(n?Math.trunc:Math.round)(t*r)/r}function Rn(t){return t%4===0&&(t%100!==0||t%400===0)}function Sn(t){return Rn(t)?366:365}function Er(t,e){let n=gc(e-1,12)+1,r=t+(e-n)/12;return n===2?Rn(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function Ai(t){let e=Date.UTC(t.year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond);return t.year<100&&t.year>=0&&(e=new Date(e),e.setUTCFullYear(e.getUTCFullYear()-1900)),+e}function Cr(t){let e=(t+Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400))%7,n=t-1,r=(n+Math.floor(n/4)-Math.floor(n/100)+Math.floor(n/400))%7;return e===4||r===3?53:52}function xi(t){return t>99?t:t>K.twoDigitCutoffYear?1900+t:2e3+t}function oo(t,e,n,r=null){let i=new Date(t),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(s.timeZone=r);let a={timeZoneName:e,...s},o=new Intl.DateTimeFormat(n,a).formatToParts(i).find(u=>u.type.toLowerCase()==="timezonename");return o?o.value:null}function Pr(t,e){let n=parseInt(t,10);Number.isNaN(n)&&(n=0);let r=parseInt(e,10)||0,i=n<0||Object.is(n,-0)?-r:r;return n*60+i}function uo(t){let e=Number(t);if(typeof t=="boolean"||t===""||Number.isNaN(e))throw new ge(`Invalid unit value ${t}`);return e}function kr(t,e){let n={};for(let r in t)if(en(t,r)){let i=t[r];if(i==null)continue;n[e(r)]=uo(i)}return n}function On(t,e){let n=Math.trunc(Math.abs(t/60)),r=Math.trunc(Math.abs(t%60)),i=t>=0?"+":"-";switch(e){case"short":return`${i}${Y(n,2)}:${Y(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${Y(n,2)}${Y(r,2)}`;default:throw new RangeError(`Value format ${e} is out of range for property format`)}}function Nr(t){return mc(t,["hour","minute","second","millisecond"])}var Dc=["January","February","March","April","May","June","July","August","September","October","November","December"],lo=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],bc=["J","F","M","A","M","J","J","A","S","O","N","D"];function co(t){switch(t){case"narrow":return[...bc];case"short":return[...lo];case"long":return[...Dc];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}var fo=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ho=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],yc=["M","T","W","T","F","S","S"];function po(t){switch(t){case"narrow":return[...yc];case"short":return[...ho];case"long":return[...fo];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}var mo=["AM","PM"],vc=["Before Christ","Anno Domini"],wc=["BC","AD"],Fc=["B","A"];function go(t){switch(t){case"narrow":return[...Fc];case"short":return[...wc];case"long":return[...vc];default:return null}}function xc(t){return mo[t.hour<12?0:1]}function Ec(t,e){return po(e)[t.weekday-1]}function Cc(t,e){return co(e)[t.month-1]}function kc(t,e){return go(e)[t.year<0?0:1]}function Sc(t,e,n="always",r=!1){let i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(t)===-1;if(n==="auto"&&s){let h=t==="days";switch(e){case 1:return h?"tomorrow":`next ${i[t][0]}`;case-1:return h?"yesterday":`last ${i[t][0]}`;case 0:return h?"today":`this ${i[t][0]}`}}let a=Object.is(e,-0)||e<0,o=Math.abs(e),u=o===1,l=i[t],d=r?u?l[1]:l[2]||l[1]:u?i[t][0]:t;return a?`${o} ${d} ago`:`in ${o} ${d}`}function wa(t,e){let n="";for(let r of t)r.literal?n+=r.val:n+=e(r.val);return n}var Oc={D:xr,DD:_a,DDD:Ga,DDDD:Ha,t:Ua,tt:Wa,ttt:qa,tttt:za,T:Za,TT:Ka,TTT:Ya,TTTT:Ja,f:Qa,ff:eo,fff:no,ffff:io,F:Xa,FF:to,FFF:ro,FFFF:so},ne=class{static create(e,n={}){return new ne(e,n)}static parseFormat(e){let n=null,r="",i=!1,s=[];for(let a=0;a<e.length;a++){let o=e.charAt(a);o==="'"?(r.length>0&&s.push({literal:i,val:r}),n=null,r="",i=!i):i||o===n?r+=o:(r.length>0&&s.push({literal:!1,val:r}),r=o,n=o)}return r.length>0&&s.push({literal:i,val:r}),s}static macroTokenToFormatOpts(e){return Oc[e]}constructor(e,n){this.opts=n,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,n){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(e,{...this.opts,...n}).format()}formatDateTime(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n}).format()}formatDateTimeParts(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n}).formatToParts()}formatInterval(e,n={}){return this.loc.dtFormatter(e.start,{...this.opts,...n}).dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,n={}){return this.loc.dtFormatter(e,{...this.opts,...n}).resolvedOptions()}num(e,n=0){if(this.opts.forceSimple)return Y(e,n);let r={...this.opts};return n>0&&(r.padTo=n),this.loc.numberFormatter(r).format(e)}formatDateTimeFromString(e,n){let r=this.loc.listingMode()==="en",i=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(g,y)=>this.loc.extract(e,g,y),a=g=>e.isOffsetFixed&&e.offset===0&&g.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,g.format):"",o=()=>r?xc(e):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),u=(g,y)=>r?Cc(e,g):s(y?{month:g}:{month:g,day:"numeric"},"month"),l=(g,y)=>r?Ec(e,g):s(y?{weekday:g}:{weekday:g,month:"long",day:"numeric"},"weekday"),d=g=>{let y=ne.macroTokenToFormatOpts(g);return y?this.formatWithSystemDefault(e,y):g},h=g=>r?kc(e,g):s({era:g},"era"),D=g=>{switch(g){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return a({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return a({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return a({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return o();case"d":return i?s({day:"numeric"},"day"):this.num(e.day);case"dd":return i?s({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return l("short",!0);case"cccc":return l("long",!0);case"ccccc":return l("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return l("short",!1);case"EEEE":return l("long",!1);case"EEEEE":return l("narrow",!1);case"L":return i?s({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return i?s({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return u("short",!0);case"LLLL":return u("long",!0);case"LLLLL":return u("narrow",!0);case"M":return i?s({month:"numeric"},"month"):this.num(e.month);case"MM":return i?s({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return u("short",!1);case"MMMM":return u("long",!1);case"MMMMM":return u("narrow",!1);case"y":return i?s({year:"numeric"},"year"):this.num(e.year);case"yy":return i?s({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return i?s({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return i?s({year:"numeric"},"year"):this.num(e.year,6);case"G":return h("short");case"GG":return h("long");case"GGGGG":return h("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return d(g)}};return wa(ne.parseFormat(n),D)}formatDurationFromString(e,n){let r=u=>{switch(u[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},i=u=>l=>{let d=r(l);return d?this.num(u.get(d),l.length):l},s=ne.parseFormat(n),a=s.reduce((u,{literal:l,val:d})=>l?u:u.concat(d),[]),o=e.shiftTo(...a.map(r).filter(u=>u));return wa(s,i(o))}},ve=class{constructor(e,n){this.reason=e,this.explanation=n}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}},Do=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function tn(...t){let e=t.reduce((n,r)=>n+r.source,"");return RegExp(`^${e}$`)}function nn(...t){return e=>t.reduce(([n,r,i],s)=>{let[a,o,u]=s(e,i);return[{...n,...a},o||r,u]},[{},null,1]).slice(0,2)}function rn(t,...e){if(t==null)return[null,null];for(let[n,r]of e){let i=n.exec(t);if(i)return r(i)}return[null,null]}function bo(...t){return(e,n)=>{let r={},i;for(i=0;i<t.length;i++)r[t[i]]=ut(e[n+i]);return[r,null,n+i]}}var yo=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,Tc=`(?:${yo.source}?(?:\\[(${Do.source})\\])?)?`,Ri=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,vo=RegExp(`${Ri.source}${Tc}`),Li=RegExp(`(?:T${vo.source})?`),Pc=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,Nc=/(\d{4})-?W(\d\d)(?:-?(\d))?/,Ac=/(\d{4})-?(\d{3})/,Rc=bo("weekYear","weekNumber","weekDay"),Lc=bo("year","ordinal"),Bc=/(\d{4})-(\d\d)-(\d\d)/,wo=RegExp(`${Ri.source} ?(?:${yo.source}|(${Do.source}))?`),Mc=RegExp(`(?: ${wo.source})?`);function Qt(t,e,n){let r=t[e];return G(r)?n:ut(r)}function Ic(t,e){return[{year:Qt(t,e),month:Qt(t,e+1,1),day:Qt(t,e+2,1)},null,e+3]}function sn(t,e){return[{hours:Qt(t,e,0),minutes:Qt(t,e+1,0),seconds:Qt(t,e+2,0),milliseconds:Pi(t[e+3])},null,e+4]}function Ln(t,e){let n=!t[e]&&!t[e+1],r=Pr(t[e+1],t[e+2]),i=n?null:se.instance(r);return[{},i,e+3]}function Bn(t,e){let n=t[e]?Ie.create(t[e]):null;return[{},n,e+1]}var jc=RegExp(`^T?${Ri.source}$`),$c=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function Vc(t){let[e,n,r,i,s,a,o,u,l]=t,d=e[0]==="-",h=u&&u[0]==="-",D=(g,y=!1)=>g!==void 0&&(y||g&&d)?-g:g;return[{years:D(Et(n)),months:D(Et(r)),weeks:D(Et(i)),days:D(Et(s)),hours:D(Et(a)),minutes:D(Et(o)),seconds:D(Et(u),u==="-0"),milliseconds:D(Pi(l),h)}]}var _c={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function Bi(t,e,n,r,i,s,a){let o={year:e.length===2?xi(ut(e)):ut(e),month:lo.indexOf(n)+1,day:ut(r),hour:ut(i),minute:ut(s)};return a&&(o.second=ut(a)),t&&(o.weekday=t.length>3?fo.indexOf(t)+1:ho.indexOf(t)+1),o}var Gc=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function Hc(t){let[,e,n,r,i,s,a,o,u,l,d,h]=t,D=Bi(e,i,r,n,s,a,o),g;return u?g=_c[u]:l?g=0:g=Pr(d,h),[D,new se(g)]}function Uc(t){return t.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}var Wc=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,qc=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,zc=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function Fa(t){let[,e,n,r,i,s,a,o]=t;return[Bi(e,i,r,n,s,a,o),se.utcInstance]}function Zc(t){let[,e,n,r,i,s,a,o]=t;return[Bi(e,o,n,r,i,s,a),se.utcInstance]}var Kc=tn(Pc,Li),Yc=tn(Nc,Li),Jc=tn(Ac,Li),Qc=tn(vo),Fo=nn(Ic,sn,Ln,Bn),Xc=nn(Rc,sn,Ln,Bn),ef=nn(Lc,sn,Ln,Bn),tf=nn(sn,Ln,Bn);function nf(t){return rn(t,[Kc,Fo],[Yc,Xc],[Jc,ef],[Qc,tf])}function rf(t){return rn(Uc(t),[Gc,Hc])}function sf(t){return rn(t,[Wc,Fa],[qc,Fa],[zc,Zc])}function af(t){return rn(t,[$c,Vc])}var of=nn(sn);function uf(t){return rn(t,[jc,of])}var lf=tn(Bc,Mc),cf=tn(wo),ff=nn(sn,Ln,Bn);function df(t){return rn(t,[lf,Fo],[cf,ff])}var hf="Invalid Duration",xo={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},pf={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...xo},ke=146097/400,Kt=146097/4800,mf={years:{quarters:4,months:12,weeks:ke/7,days:ke,hours:ke*24,minutes:ke*24*60,seconds:ke*24*60*60,milliseconds:ke*24*60*60*1e3},quarters:{months:3,weeks:ke/28,days:ke/4,hours:ke*24/4,minutes:ke*24*60/4,seconds:ke*24*60*60/4,milliseconds:ke*24*60*60*1e3/4},months:{weeks:Kt/7,days:Kt,hours:Kt*24,minutes:Kt*24*60,seconds:Kt*24*60*60,milliseconds:Kt*24*60*60*1e3},...xo},Ct=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],gf=Ct.slice(0).reverse();function ot(t,e,n=!1){let r={values:n?e.values:{...t.values,...e.values||{}},loc:t.loc.clone(e.loc),conversionAccuracy:e.conversionAccuracy||t.conversionAccuracy,matrix:e.matrix||t.matrix};return new N(r)}function Df(t){return t<0?Math.floor(t):Math.ceil(t)}function Eo(t,e,n,r,i){let s=t[i][n],a=e[n]/s,o=Math.sign(a)===Math.sign(r[i]),u=!o&&r[i]!==0&&Math.abs(a)<=1?Df(a):Math.trunc(a);r[i]+=u,e[n]-=u*s}function bf(t,e){gf.reduce((n,r)=>G(e[r])?n:(n&&Eo(t,e,n,e,r),r),null)}function yf(t){let e={};for(let[n,r]of Object.entries(t))r!==0&&(e[n]=r);return e}var N=class{constructor(e){let n=e.conversionAccuracy==="longterm"||!1,r=n?mf:pf;e.matrix&&(r=e.matrix),this.values=e.values,this.loc=e.loc||W.create(),this.conversionAccuracy=n?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=r,this.isLuxonDuration=!0}static fromMillis(e,n){return N.fromObject({milliseconds:e},n)}static fromObject(e,n={}){if(e==null||typeof e!="object")throw new ge(`Duration.fromObject: argument expected to be an object, got ${e===null?"null":typeof e}`);return new N({values:kr(e,N.normalizeUnit),loc:W.fromObject(n),conversionAccuracy:n.conversionAccuracy,matrix:n.matrix})}static fromDurationLike(e){if(St(e))return N.fromMillis(e);if(N.isDuration(e))return e;if(typeof e=="object")return N.fromObject(e);throw new ge(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,n){let[r]=af(e);return r?N.fromObject(r,n):N.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,n){let[r]=uf(e);return r?N.fromObject(r,n):N.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,n=null){if(!e)throw new ge("need to specify a reason the Duration is invalid");let r=e instanceof ve?e:new ve(e,n);if(K.throwOnInvalid)throw new pi(r);return new N({invalid:r})}static normalizeUnit(e){let n={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e&&e.toLowerCase()];if(!n)throw new Fr(e);return n}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,n={}){let r={...n,floor:n.round!==!1&&n.floor!==!1};return this.isValid?ne.create(this.loc,r).formatDurationFromString(this,e):hf}toHuman(e={}){let n=Ct.map(r=>{let i=this.values[r];return G(i)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:r.slice(0,-1)}).format(i)}).filter(r=>r);return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(n)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return this.years!==0&&(e+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(e+=this.months+this.quarters*3+"M"),this.weeks!==0&&(e+=this.weeks+"W"),this.days!==0&&(e+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(e+="T"),this.hours!==0&&(e+=this.hours+"H"),this.minutes!==0&&(e+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(e+=Ni(this.seconds+this.milliseconds/1e3,3)+"S"),e==="P"&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;let n=this.toMillis();if(n<0||n>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e};let r=this.shiftTo("hours","minutes","seconds","milliseconds"),i=e.format==="basic"?"hhmm":"hh:mm";(!e.suppressSeconds||r.seconds!==0||r.milliseconds!==0)&&(i+=e.format==="basic"?"ss":":ss",(!e.suppressMilliseconds||r.milliseconds!==0)&&(i+=".SSS"));let s=r.toFormat(i);return e.includePrefix&&(s="T"+s),s}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;let n=N.fromDurationLike(e),r={};for(let i of Ct)(en(n.values,i)||en(this.values,i))&&(r[i]=n.get(i)+this.get(i));return ot(this,{values:r},!0)}minus(e){if(!this.isValid)return this;let n=N.fromDurationLike(e);return this.plus(n.negate())}mapUnits(e){if(!this.isValid)return this;let n={};for(let r of Object.keys(this.values))n[r]=uo(e(this.values[r],r));return ot(this,{values:n},!0)}get(e){return this[N.normalizeUnit(e)]}set(e){if(!this.isValid)return this;let n={...this.values,...kr(e,N.normalizeUnit)};return ot(this,{values:n})}reconfigure({locale:e,numberingSystem:n,conversionAccuracy:r,matrix:i}={}){let a={loc:this.loc.clone({locale:e,numberingSystem:n}),matrix:i,conversionAccuracy:r};return ot(this,a)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;let e=this.toObject();return bf(this.matrix,e),ot(this,{values:e},!0)}rescale(){if(!this.isValid)return this;let e=yf(this.normalize().shiftToAll().toObject());return ot(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(e.length===0)return this;e=e.map(a=>N.normalizeUnit(a));let n={},r={},i=this.toObject(),s;for(let a of Ct)if(e.indexOf(a)>=0){s=a;let o=0;for(let l in r)o+=this.matrix[l][a]*r[l],r[l]=0;St(i[a])&&(o+=i[a]);let u=Math.trunc(o);n[a]=u,r[a]=(o*1e3-u*1e3)/1e3;for(let l in i)Ct.indexOf(l)>Ct.indexOf(a)&&Eo(this.matrix,i,l,n,a)}else St(i[a])&&(r[a]=i[a]);for(let a in r)r[a]!==0&&(n[s]+=a===s?r[a]:r[a]/this.matrix[s][a]);return ot(this,{values:n},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;let e={};for(let n of Object.keys(this.values))e[n]=this.values[n]===0?0:-this.values[n];return ot(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid||!this.loc.equals(e.loc))return!1;function n(r,i){return r===void 0||r===0?i===void 0||i===0:r===i}for(let r of Ct)if(!n(this.values[r],e.values[r]))return!1;return!0}},Yt="Invalid Interval";function vf(t,e){return!t||!t.isValid?z.invalid("missing or invalid start"):!e||!e.isValid?z.invalid("missing or invalid end"):e<t?z.invalid("end before start",`The end of an interval must be after its start, but you had start=${t.toISO()} and end=${e.toISO()}`):null}var z=class{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,n=null){if(!e)throw new ge("need to specify a reason the Interval is invalid");let r=e instanceof ve?e:new ve(e,n);if(K.throwOnInvalid)throw new hi(r);return new z({invalid:r})}static fromDateTimes(e,n){let r=En(e),i=En(n),s=vf(r,i);return s??new z({start:r,end:i})}static after(e,n){let r=N.fromDurationLike(n),i=En(e);return z.fromDateTimes(i,i.plus(r))}static before(e,n){let r=N.fromDurationLike(n),i=En(e);return z.fromDateTimes(i.minus(r),i)}static fromISO(e,n){let[r,i]=(e||"").split("/",2);if(r&&i){let s,a;try{s=B.fromISO(r,n),a=s.isValid}catch{a=!1}let o,u;try{o=B.fromISO(i,n),u=o.isValid}catch{u=!1}if(a&&u)return z.fromDateTimes(s,o);if(a){let l=N.fromISO(i,n);if(l.isValid)return z.after(s,l)}else if(u){let l=N.fromISO(r,n);if(l.isValid)return z.before(o,l)}}return z.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds"){if(!this.isValid)return NaN;let n=this.start.startOf(e),r=this.end.startOf(e);return Math.floor(r.diff(n,e).get(e))+1}hasSame(e){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,e):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return this.isValid?this.s>e:!1}isBefore(e){return this.isValid?this.e<=e:!1}contains(e){return this.isValid?this.s<=e&&this.e>e:!1}set({start:e,end:n}={}){return this.isValid?z.fromDateTimes(e||this.s,n||this.e):this}splitAt(...e){if(!this.isValid)return[];let n=e.map(En).filter(a=>this.contains(a)).sort(),r=[],{s:i}=this,s=0;for(;i<this.e;){let a=n[s]||this.e,o=+a>+this.e?this.e:a;r.push(z.fromDateTimes(i,o)),i=o,s+=1}return r}splitBy(e){let n=N.fromDurationLike(e);if(!this.isValid||!n.isValid||n.as("milliseconds")===0)return[];let{s:r}=this,i=1,s,a=[];for(;r<this.e;){let o=this.start.plus(n.mapUnits(u=>u*i));s=+o>+this.e?this.e:o,a.push(z.fromDateTimes(r,s)),r=s,i+=1}return a}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return this.isValid?+this.e==+e.s:!1}abutsEnd(e){return this.isValid?+e.e==+this.s:!1}engulfs(e){return this.isValid?this.s<=e.s&&this.e>=e.e:!1}equals(e){return!this.isValid||!e.isValid?!1:this.s.equals(e.s)&&this.e.equals(e.e)}intersection(e){if(!this.isValid)return this;let n=this.s>e.s?this.s:e.s,r=this.e<e.e?this.e:e.e;return n>=r?null:z.fromDateTimes(n,r)}union(e){if(!this.isValid)return this;let n=this.s<e.s?this.s:e.s,r=this.e>e.e?this.e:e.e;return z.fromDateTimes(n,r)}static merge(e){let[n,r]=e.sort((i,s)=>i.s-s.s).reduce(([i,s],a)=>s?s.overlaps(a)||s.abutsStart(a)?[i,s.union(a)]:[i.concat([s]),a]:[i,a],[[],null]);return r&&n.push(r),n}static xor(e){let n=null,r=0,i=[],s=e.map(u=>[{time:u.s,type:"s"},{time:u.e,type:"e"}]),a=Array.prototype.concat(...s),o=a.sort((u,l)=>u.time-l.time);for(let u of o)r+=u.type==="s"?1:-1,r===1?n=u.time:(n&&+n!=+u.time&&i.push(z.fromDateTimes(n,u.time)),n=null);return z.merge(i)}difference(...e){return z.xor([this].concat(e)).map(n=>this.intersection(n)).filter(n=>n&&!n.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:Yt}toLocaleString(e=xr,n={}){return this.isValid?ne.create(this.s.loc.clone(n),e).formatInterval(this):Yt}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Yt}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Yt}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Yt}toFormat(e,{separator:n=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(e)}${n}${this.e.toFormat(e)}`:Yt}toDuration(e,n){return this.isValid?this.e.diff(this.s,e,n):N.invalid(this.invalidReason)}mapEndpoints(e){return z.fromDateTimes(e(this.s),e(this.e))}},Jt=class{static hasDST(e=K.defaultZone){let n=B.now().setZone(e).set({month:12});return!e.isUniversal&&n.offset!==n.set({month:6}).offset}static isValidIANAZone(e){return Ie.isValidZone(e)}static normalizeZone(e){return lt(e,K.defaultZone)}static months(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||W.create(n,r,s)).months(e)}static monthsFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null,outputCalendar:s="gregory"}={}){return(i||W.create(n,r,s)).months(e,!0)}static weekdays(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||W.create(n,r,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:n=null,numberingSystem:r=null,locObj:i=null}={}){return(i||W.create(n,r,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return W.create(e).meridiems()}static eras(e="short",{locale:n=null}={}){return W.create(n,null,"gregory").eras(e)}static features(){return{relative:ao()}}};function xa(t,e){let n=i=>i.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(e)-n(t);return Math.floor(N.fromMillis(r).as("days"))}function wf(t,e,n){let r=[["years",(u,l)=>l.year-u.year],["quarters",(u,l)=>l.quarter-u.quarter+(l.year-u.year)*4],["months",(u,l)=>l.month-u.month+(l.year-u.year)*12],["weeks",(u,l)=>{let d=xa(u,l);return(d-d%7)/7}],["days",xa]],i={},s=t,a,o;for(let[u,l]of r)n.indexOf(u)>=0&&(a=u,i[u]=l(t,e),o=s.plus(i),o>e?(i[u]--,t=s.plus(i)):t=o);return[t,i,o,a]}function Ff(t,e,n,r){let[i,s,a,o]=wf(t,e,n),u=e-i,l=n.filter(h=>["hours","minutes","seconds","milliseconds"].indexOf(h)>=0);l.length===0&&(a<e&&(a=i.plus({[o]:1})),a!==i&&(s[o]=(s[o]||0)+u/(a-i)));let d=N.fromObject(s,r);return l.length>0?N.fromMillis(u,r).shiftTo(...l).plus(d):d}var Mi={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},Ea={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},xf=Mi.hanidec.replace(/[\[|\]]/g,"").split("");function Ef(t){let e=parseInt(t,10);if(isNaN(e)){e="";for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(t[n].search(Mi.hanidec)!==-1)e+=xf.indexOf(t[n]);else for(let i in Ea){let[s,a]=Ea[i];r>=s&&r<=a&&(e+=r-s)}}return parseInt(e,10)}else return e}function Re({numberingSystem:t},e=""){return new RegExp(`${Mi[t||"latn"]}${e}`)}var Cf="missing Intl.DateTimeFormat.formatToParts support";function H(t,e=n=>n){return{regex:t,deser:([n])=>e(Ef(n))}}var kf=String.fromCharCode(160),Co=`[ ${kf}]`,ko=new RegExp(Co,"g");function Sf(t){return t.replace(/\./g,"\\.?").replace(ko,Co)}function Ca(t){return t.replace(/\./g,"").replace(ko," ").toLowerCase()}function Le(t,e){return t===null?null:{regex:RegExp(t.map(Sf).join("|")),deser:([n])=>t.findIndex(r=>Ca(n)===Ca(r))+e}}function ka(t,e){return{regex:t,deser:([,n,r])=>Pr(n,r),groups:e}}function ai(t){return{regex:t,deser:([e])=>e}}function Of(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function Tf(t,e){let n=Re(e),r=Re(e,"{2}"),i=Re(e,"{3}"),s=Re(e,"{4}"),a=Re(e,"{6}"),o=Re(e,"{1,2}"),u=Re(e,"{1,3}"),l=Re(e,"{1,6}"),d=Re(e,"{1,9}"),h=Re(e,"{2,4}"),D=Re(e,"{4,6}"),g=C=>({regex:RegExp(Of(C.val)),deser:([x])=>x,literal:!0}),T=(C=>{if(t.literal)return g(C);switch(C.val){case"G":return Le(e.eras("short",!1),0);case"GG":return Le(e.eras("long",!1),0);case"y":return H(l);case"yy":return H(h,xi);case"yyyy":return H(s);case"yyyyy":return H(D);case"yyyyyy":return H(a);case"M":return H(o);case"MM":return H(r);case"MMM":return Le(e.months("short",!0,!1),1);case"MMMM":return Le(e.months("long",!0,!1),1);case"L":return H(o);case"LL":return H(r);case"LLL":return Le(e.months("short",!1,!1),1);case"LLLL":return Le(e.months("long",!1,!1),1);case"d":return H(o);case"dd":return H(r);case"o":return H(u);case"ooo":return H(i);case"HH":return H(r);case"H":return H(o);case"hh":return H(r);case"h":return H(o);case"mm":return H(r);case"m":return H(o);case"q":return H(o);case"qq":return H(r);case"s":return H(o);case"ss":return H(r);case"S":return H(u);case"SSS":return H(i);case"u":return ai(d);case"uu":return ai(o);case"uuu":return H(n);case"a":return Le(e.meridiems(),0);case"kkkk":return H(s);case"kk":return H(h,xi);case"W":return H(o);case"WW":return H(r);case"E":case"c":return H(n);case"EEE":return Le(e.weekdays("short",!1,!1),1);case"EEEE":return Le(e.weekdays("long",!1,!1),1);case"ccc":return Le(e.weekdays("short",!0,!1),1);case"cccc":return Le(e.weekdays("long",!0,!1),1);case"Z":case"ZZ":return ka(new RegExp(`([+-]${o.source})(?::(${r.source}))?`),2);case"ZZZ":return ka(new RegExp(`([+-]${o.source})(${r.source})?`),2);case"z":return ai(/[a-z_+-/]{1,256}?/i);default:return g(C)}})(t)||{invalidReason:Cf};return T.token=t,T}var Pf={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function Nf(t,e){let{type:n,value:r}=t;if(n==="literal")return{literal:!0,val:r};let i=e[n],s=Pf[n];if(typeof s=="object"&&(s=s[i]),s)return{literal:!1,val:s}}function Af(t){return[`^${t.map(n=>n.regex).reduce((n,r)=>`${n}(${r.source})`,"")}$`,t]}function Rf(t,e,n){let r=t.match(e);if(r){let i={},s=1;for(let a in n)if(en(n,a)){let o=n[a],u=o.groups?o.groups+1:1;!o.literal&&o.token&&(i[o.token.val[0]]=o.deser(r.slice(s,s+u))),s+=u}return[r,i]}else return[r,{}]}function Lf(t){let e=s=>{switch(s){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}},n=null,r;return G(t.z)||(n=Ie.create(t.z)),G(t.Z)||(n||(n=new se(t.Z)),r=t.Z),G(t.q)||(t.M=(t.q-1)*3+1),G(t.h)||(t.h<12&&t.a===1?t.h+=12:t.h===12&&t.a===0&&(t.h=0)),t.G===0&&t.y&&(t.y=-t.y),G(t.u)||(t.S=Pi(t.u)),[Object.keys(t).reduce((s,a)=>{let o=e(a);return o&&(s[o]=t[a]),s},{}),n,r]}var oi=null;function Bf(){return oi||(oi=B.fromMillis(1555555555555)),oi}function Mf(t,e){if(t.literal)return t;let n=ne.macroTokenToFormatOpts(t.val),r=To(n,e);return r==null||r.includes(void 0)?t:r}function So(t,e){return Array.prototype.concat(...t.map(n=>Mf(n,e)))}function Oo(t,e,n){let r=So(ne.parseFormat(n),t),i=r.map(a=>Tf(a,t)),s=i.find(a=>a.invalidReason);if(s)return{input:e,tokens:r,invalidReason:s.invalidReason};{let[a,o]=Af(i),u=RegExp(a,"i"),[l,d]=Rf(e,u,o),[h,D,g]=d?Lf(d):[null,null,void 0];if(en(d,"a")&&en(d,"H"))throw new kt("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:r,regex:u,rawMatches:l,matches:d,result:h,zone:D,specificOffset:g}}}function If(t,e,n){let{result:r,zone:i,specificOffset:s,invalidReason:a}=Oo(t,e,n);return[r,i,s,a]}function To(t,e){return t?ne.create(e,t).formatDateTimeParts(Bf()).map(i=>Nf(i,t)):null}var Po=[0,31,59,90,120,151,181,212,243,273,304,334],No=[0,31,60,91,121,152,182,213,244,274,305,335];function Se(t,e){return new ve("unit out of range",`you specified ${e} (of type ${typeof e}) as a ${t}, which is invalid`)}function Ao(t,e,n){let r=new Date(Date.UTC(t,e-1,n));t<100&&t>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);let i=r.getUTCDay();return i===0?7:i}function Ro(t,e,n){return n+(Rn(t)?No:Po)[e-1]}function Lo(t,e){let n=Rn(t)?No:Po,r=n.findIndex(s=>s<e),i=e-n[r];return{month:r+1,day:i}}function Ei(t){let{year:e,month:n,day:r}=t,i=Ro(e,n,r),s=Ao(e,n,r),a=Math.floor((i-s+10)/7),o;return a<1?(o=e-1,a=Cr(o)):a>Cr(e)?(o=e+1,a=1):o=e,{weekYear:o,weekNumber:a,weekday:s,...Nr(t)}}function Sa(t){let{weekYear:e,weekNumber:n,weekday:r}=t,i=Ao(e,1,4),s=Sn(e),a=n*7+r-i-3,o;a<1?(o=e-1,a+=Sn(o)):a>s?(o=e+1,a-=Sn(e)):o=e;let{month:u,day:l}=Lo(o,a);return{year:o,month:u,day:l,...Nr(t)}}function ui(t){let{year:e,month:n,day:r}=t,i=Ro(e,n,r);return{year:e,ordinal:i,...Nr(t)}}function Oa(t){let{year:e,ordinal:n}=t,{month:r,day:i}=Lo(e,n);return{year:e,month:r,day:i,...Nr(t)}}function jf(t){let e=Tr(t.weekYear),n=tt(t.weekNumber,1,Cr(t.weekYear)),r=tt(t.weekday,1,7);return e?n?r?!1:Se("weekday",t.weekday):Se("week",t.week):Se("weekYear",t.weekYear)}function $f(t){let e=Tr(t.year),n=tt(t.ordinal,1,Sn(t.year));return e?n?!1:Se("ordinal",t.ordinal):Se("year",t.year)}function Bo(t){let e=Tr(t.year),n=tt(t.month,1,12),r=tt(t.day,1,Er(t.year,t.month));return e?n?r?!1:Se("day",t.day):Se("month",t.month):Se("year",t.year)}function Mo(t){let{hour:e,minute:n,second:r,millisecond:i}=t,s=tt(e,0,23)||e===24&&n===0&&r===0&&i===0,a=tt(n,0,59),o=tt(r,0,59),u=tt(i,0,999);return s?a?o?u?!1:Se("millisecond",i):Se("second",r):Se("minute",n):Se("hour",e)}var li="Invalid DateTime",Ta=864e13;function br(t){return new ve("unsupported zone",`the zone "${t.name}" is not supported`)}function ci(t){return t.weekData===null&&(t.weekData=Ei(t.c)),t.weekData}function Fn(t,e){let n={ts:t.ts,zone:t.zone,c:t.c,o:t.o,loc:t.loc,invalid:t.invalid};return new B({...n,...e,old:n})}function Io(t,e,n){let r=t-e*60*1e3,i=n.offset(r);if(e===i)return[r,e];r-=(i-e)*60*1e3;let s=n.offset(r);return i===s?[r,i]:[t-Math.min(i,s)*60*1e3,Math.max(i,s)]}function Pa(t,e){t+=e*60*1e3;let n=new Date(t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function wr(t,e,n){return Io(Ai(t),e,n)}function Na(t,e){let n=t.o,r=t.c.year+Math.trunc(e.years),i=t.c.month+Math.trunc(e.months)+Math.trunc(e.quarters)*3,s={...t.c,year:r,month:i,day:Math.min(t.c.day,Er(r,i))+Math.trunc(e.days)+Math.trunc(e.weeks)*7},a=N.fromObject({years:e.years-Math.trunc(e.years),quarters:e.quarters-Math.trunc(e.quarters),months:e.months-Math.trunc(e.months),weeks:e.weeks-Math.trunc(e.weeks),days:e.days-Math.trunc(e.days),hours:e.hours,minutes:e.minutes,seconds:e.seconds,milliseconds:e.milliseconds}).as("milliseconds"),o=Ai(s),[u,l]=Io(o,n,t.zone);return a!==0&&(u+=a,l=t.zone.offset(u)),{ts:u,o:l}}function xn(t,e,n,r,i,s){let{setZone:a,zone:o}=n;if(t&&Object.keys(t).length!==0){let u=e||o,l=B.fromObject(t,{...n,zone:u,specificOffset:s});return a?l:l.setZone(o)}else return B.invalid(new ve("unparsable",`the input "${i}" can't be parsed as ${r}`))}function yr(t,e,n=!0){return t.isValid?ne.create(W.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(t,e):null}function fi(t,e){let n=t.c.year>9999||t.c.year<0,r="";return n&&t.c.year>=0&&(r+="+"),r+=Y(t.c.year,n?6:4),e?(r+="-",r+=Y(t.c.month),r+="-",r+=Y(t.c.day)):(r+=Y(t.c.month),r+=Y(t.c.day)),r}function Aa(t,e,n,r,i,s){let a=Y(t.c.hour);return e?(a+=":",a+=Y(t.c.minute),(t.c.second!==0||!n)&&(a+=":")):a+=Y(t.c.minute),(t.c.second!==0||!n)&&(a+=Y(t.c.second),(t.c.millisecond!==0||!r)&&(a+=".",a+=Y(t.c.millisecond,3))),i&&(t.isOffsetFixed&&t.offset===0&&!s?a+="Z":t.o<0?(a+="-",a+=Y(Math.trunc(-t.o/60)),a+=":",a+=Y(Math.trunc(-t.o%60))):(a+="+",a+=Y(Math.trunc(t.o/60)),a+=":",a+=Y(Math.trunc(t.o%60)))),s&&(a+="["+t.zone.ianaName+"]"),a}var jo={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Vf={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},_f={ordinal:1,hour:0,minute:0,second:0,millisecond:0},$o=["year","month","day","hour","minute","second","millisecond"],Gf=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],Hf=["year","ordinal","hour","minute","second","millisecond"];function Ra(t){let e={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[t.toLowerCase()];if(!e)throw new Fr(t);return e}function La(t,e){let n=lt(e.zone,K.defaultZone),r=W.fromObject(e),i=K.now(),s,a;if(G(t.year))s=i;else{for(let l of $o)G(t[l])&&(t[l]=jo[l]);let o=Bo(t)||Mo(t);if(o)return B.invalid(o);let u=n.offset(i);[s,a]=wr(t,u,n)}return new B({ts:s,zone:n,loc:r,o:a})}function Ba(t,e,n){let r=G(n.round)?!0:n.round,i=(a,o)=>(a=Ni(a,r||n.calendary?0:2,!0),e.loc.clone(n).relFormatter(n).format(a,o)),s=a=>n.calendary?e.hasSame(t,a)?0:e.startOf(a).diff(t.startOf(a),a).get(a):e.diff(t,a).get(a);if(n.unit)return i(s(n.unit),n.unit);for(let a of n.units){let o=s(a);if(Math.abs(o)>=1)return i(o,a)}return i(t>e?-0:0,n.units[n.units.length-1])}function Ma(t){let e={},n;return t.length>0&&typeof t[t.length-1]=="object"?(e=t[t.length-1],n=Array.from(t).slice(0,t.length-1)):n=Array.from(t),[e,n]}var B=class{constructor(e){let n=e.zone||K.defaultZone,r=e.invalid||(Number.isNaN(e.ts)?new ve("invalid input"):null)||(n.isValid?null:br(n));this.ts=G(e.ts)?K.now():e.ts;let i=null,s=null;if(!r)if(e.old&&e.old.ts===this.ts&&e.old.zone.equals(n))[i,s]=[e.old.c,e.old.o];else{let o=n.offset(this.ts);i=Pa(this.ts,o),r=Number.isNaN(i.year)?new ve("invalid input"):null,i=r?null:i,s=r?null:o}this._zone=n,this.loc=e.loc||W.create(),this.invalid=r,this.weekData=null,this.c=i,this.o=s,this.isLuxonDateTime=!0}static now(){return new B({})}static local(){let[e,n]=Ma(arguments),[r,i,s,a,o,u,l]=n;return La({year:r,month:i,day:s,hour:a,minute:o,second:u,millisecond:l},e)}static utc(){let[e,n]=Ma(arguments),[r,i,s,a,o,u,l]=n;return e.zone=se.utcInstance,La({year:r,month:i,day:s,hour:a,minute:o,second:u,millisecond:l},e)}static fromJSDate(e,n={}){let r=hc(e)?e.valueOf():NaN;if(Number.isNaN(r))return B.invalid("invalid input");let i=lt(n.zone,K.defaultZone);return i.isValid?new B({ts:r,zone:i,loc:W.fromObject(n)}):B.invalid(br(i))}static fromMillis(e,n={}){if(St(e))return e<-Ta||e>Ta?B.invalid("Timestamp out of range"):new B({ts:e,zone:lt(n.zone,K.defaultZone),loc:W.fromObject(n)});throw new ge(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,n={}){if(St(e))return new B({ts:e*1e3,zone:lt(n.zone,K.defaultZone),loc:W.fromObject(n)});throw new ge("fromSeconds requires a numerical input")}static fromObject(e,n={}){e=e||{};let r=lt(n.zone,K.defaultZone);if(!r.isValid)return B.invalid(br(r));let i=K.now(),s=G(n.specificOffset)?r.offset(i):n.specificOffset,a=kr(e,Ra),o=!G(a.ordinal),u=!G(a.year),l=!G(a.month)||!G(a.day),d=u||l,h=a.weekYear||a.weekNumber,D=W.fromObject(n);if((d||o)&&h)throw new kt("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(l&&o)throw new kt("Can't mix ordinal dates with month/day");let g=h||a.weekday&&!d,y,T,C=Pa(i,s);g?(y=Gf,T=Vf,C=Ei(C)):o?(y=Hf,T=_f,C=ui(C)):(y=$o,T=jo);let x=!1;for(let $ of y){let j=a[$];G(j)?x?a[$]=T[$]:a[$]=C[$]:x=!0}let E=g?jf(a):o?$f(a):Bo(a),R=E||Mo(a);if(R)return B.invalid(R);let v=g?Sa(a):o?Oa(a):a,[A,_]=wr(v,s,r),L=new B({ts:A,zone:r,o:_,loc:D});return a.weekday&&d&&e.weekday!==L.weekday?B.invalid("mismatched weekday",`you can't specify both a weekday of ${a.weekday} and a date of ${L.toISO()}`):L}static fromISO(e,n={}){let[r,i]=nf(e);return xn(r,i,n,"ISO 8601",e)}static fromRFC2822(e,n={}){let[r,i]=rf(e);return xn(r,i,n,"RFC 2822",e)}static fromHTTP(e,n={}){let[r,i]=sf(e);return xn(r,i,n,"HTTP",n)}static fromFormat(e,n,r={}){if(G(e)||G(n))throw new ge("fromFormat requires an input string and a format");let{locale:i=null,numberingSystem:s=null}=r,a=W.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0}),[o,u,l,d]=If(a,e,n);return d?B.invalid(d):xn(o,u,r,`format ${n}`,e,l)}static fromString(e,n,r={}){return B.fromFormat(e,n,r)}static fromSQL(e,n={}){let[r,i]=df(e);return xn(r,i,n,"SQL",e)}static invalid(e,n=null){if(!e)throw new ge("need to specify a reason the DateTime is invalid");let r=e instanceof ve?e:new ve(e,n);if(K.throwOnInvalid)throw new di(r);return new B({invalid:r})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,n={}){let r=To(e,W.fromObject(n));return r?r.map(i=>i?i.val:null).join(""):null}static expandFormat(e,n={}){return So(ne.parseFormat(e),W.fromObject(n)).map(i=>i.val).join("")}get(e){return this[e]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?ci(this).weekYear:NaN}get weekNumber(){return this.isValid?ci(this).weekNumber:NaN}get weekday(){return this.isValid?ci(this).weekday:NaN}get ordinal(){return this.isValid?ui(this.c).ordinal:NaN}get monthShort(){return this.isValid?Jt.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Jt.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Jt.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Jt.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return Rn(this.year)}get daysInMonth(){return Er(this.year,this.month)}get daysInYear(){return this.isValid?Sn(this.year):NaN}get weeksInWeekYear(){return this.isValid?Cr(this.weekYear):NaN}resolvedLocaleOptions(e={}){let{locale:n,numberingSystem:r,calendar:i}=ne.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:n,numberingSystem:r,outputCalendar:i}}toUTC(e=0,n={}){return this.setZone(se.instance(e),n)}toLocal(){return this.setZone(K.defaultZone)}setZone(e,{keepLocalTime:n=!1,keepCalendarTime:r=!1}={}){if(e=lt(e,K.defaultZone),e.equals(this.zone))return this;if(e.isValid){let i=this.ts;if(n||r){let s=e.offset(this.ts),a=this.toObject();[i]=wr(a,s,e)}return Fn(this,{ts:i,zone:e})}else return B.invalid(br(e))}reconfigure({locale:e,numberingSystem:n,outputCalendar:r}={}){let i=this.loc.clone({locale:e,numberingSystem:n,outputCalendar:r});return Fn(this,{loc:i})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;let n=kr(e,Ra),r=!G(n.weekYear)||!G(n.weekNumber)||!G(n.weekday),i=!G(n.ordinal),s=!G(n.year),a=!G(n.month)||!G(n.day),o=s||a,u=n.weekYear||n.weekNumber;if((o||i)&&u)throw new kt("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(a&&i)throw new kt("Can't mix ordinal dates with month/day");let l;r?l=Sa({...Ei(this.c),...n}):G(n.ordinal)?(l={...this.toObject(),...n},G(n.day)&&(l.day=Math.min(Er(l.year,l.month),l.day))):l=Oa({...ui(this.c),...n});let[d,h]=wr(l,this.o,this.zone);return Fn(this,{ts:d,o:h})}plus(e){if(!this.isValid)return this;let n=N.fromDurationLike(e);return Fn(this,Na(this,n))}minus(e){if(!this.isValid)return this;let n=N.fromDurationLike(e).negate();return Fn(this,Na(this,n))}startOf(e){if(!this.isValid)return this;let n={},r=N.normalizeUnit(e);switch(r){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break}if(r==="weeks"&&(n.weekday=1),r==="quarters"){let i=Math.ceil(this.month/3);n.month=(i-1)*3+1}return this.set(n)}endOf(e){return this.isValid?this.plus({[e]:1}).startOf(e).minus(1):this}toFormat(e,n={}){return this.isValid?ne.create(this.loc.redefaultToEN(n)).formatDateTimeFromString(this,e):li}toLocaleString(e=xr,n={}){return this.isValid?ne.create(this.loc.clone(n),e).formatDateTime(this):li}toLocaleParts(e={}){return this.isValid?ne.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:n=!1,suppressMilliseconds:r=!1,includeOffset:i=!0,extendedZone:s=!1}={}){if(!this.isValid)return null;let a=e==="extended",o=fi(this,a);return o+="T",o+=Aa(this,a,n,r,i,s),o}toISODate({format:e="extended"}={}){return this.isValid?fi(this,e==="extended"):null}toISOWeekDate(){return yr(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:n=!1,includeOffset:r=!0,includePrefix:i=!1,extendedZone:s=!1,format:a="extended"}={}){return this.isValid?(i?"T":"")+Aa(this,a==="extended",n,e,r,s):null}toRFC2822(){return yr(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return yr(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?fi(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:n=!1,includeOffsetSpace:r=!0}={}){let i="HH:mm:ss.SSS";return(n||e)&&(r&&(i+=" "),n?i+="z":e&&(i+="ZZ")),yr(this,i,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():li}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};let n={...this.c};return e.includeConfig&&(n.outputCalendar=this.outputCalendar,n.numberingSystem=this.loc.numberingSystem,n.locale=this.loc.locale),n}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,n="milliseconds",r={}){if(!this.isValid||!e.isValid)return N.invalid("created by diffing an invalid DateTime");let i={locale:this.locale,numberingSystem:this.numberingSystem,...r},s=pc(n).map(N.normalizeUnit),a=e.valueOf()>this.valueOf(),o=a?this:e,u=a?e:this,l=Ff(o,u,s,i);return a?l.negate():l}diffNow(e="milliseconds",n={}){return this.diff(B.now(),e,n)}until(e){return this.isValid?z.fromDateTimes(this,e):this}hasSame(e,n){if(!this.isValid)return!1;let r=e.valueOf(),i=this.setZone(e.zone,{keepLocalTime:!0});return i.startOf(n)<=r&&r<=i.endOf(n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;let n=e.base||B.fromObject({},{zone:this.zone}),r=e.padding?this<n?-e.padding:e.padding:0,i=["years","months","days","hours","minutes","seconds"],s=e.unit;return Array.isArray(e.unit)&&(i=e.unit,s=void 0),Ba(n,this.plus(r),{...e,numeric:"always",units:i,unit:s})}toRelativeCalendar(e={}){return this.isValid?Ba(e.base||B.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(B.isDateTime))throw new ge("min requires all arguments be DateTimes");return va(e,n=>n.valueOf(),Math.min)}static max(...e){if(!e.every(B.isDateTime))throw new ge("max requires all arguments be DateTimes");return va(e,n=>n.valueOf(),Math.max)}static fromFormatExplain(e,n,r={}){let{locale:i=null,numberingSystem:s=null}=r,a=W.fromOpts({locale:i,numberingSystem:s,defaultToEN:!0});return Oo(a,e,n)}static fromStringExplain(e,n,r={}){return B.fromFormatExplain(e,n,r)}static get DATE_SHORT(){return xr}static get DATE_MED(){return _a}static get DATE_MED_WITH_WEEKDAY(){return Jl}static get DATE_FULL(){return Ga}static get DATE_HUGE(){return Ha}static get TIME_SIMPLE(){return Ua}static get TIME_WITH_SECONDS(){return Wa}static get TIME_WITH_SHORT_OFFSET(){return qa}static get TIME_WITH_LONG_OFFSET(){return za}static get TIME_24_SIMPLE(){return Za}static get TIME_24_WITH_SECONDS(){return Ka}static get TIME_24_WITH_SHORT_OFFSET(){return Ya}static get TIME_24_WITH_LONG_OFFSET(){return Ja}static get DATETIME_SHORT(){return Qa}static get DATETIME_SHORT_WITH_SECONDS(){return Xa}static get DATETIME_MED(){return eo}static get DATETIME_MED_WITH_SECONDS(){return to}static get DATETIME_MED_WITH_WEEKDAY(){return Ql}static get DATETIME_FULL(){return no}static get DATETIME_FULL_WITH_SECONDS(){return ro}static get DATETIME_HUGE(){return io}static get DATETIME_HUGE_WITH_SECONDS(){return so}};function En(t){if(B.isDateTime(t))return t;if(t&&t.valueOf&&St(t.valueOf()))return B.fromJSDate(t);if(t&&typeof t=="object")return B.fromObject(t);throw new ge(`Unknown datetime argument: ${t}, of type ${typeof t}`)}var Ii={renderNullAs:"\\-",taskCompletionTracking:!1,taskCompletionUseEmojiShorthand:!1,taskCompletionText:"completion",taskCompletionDateFormat:"yyyy-MM-dd",recursiveSubTaskCompletion:!1,warnOnEmptyResult:!0,refreshEnabled:!0,refreshInterval:2500,defaultDateFormat:"MMMM dd, yyyy",defaultDateTimeFormat:"h:mm a - MMMM dd, yyyy",maxRecursiveRenderDepth:4,tableIdColumnName:"File",tableGroupColumnName:"Group",showResultCount:!0},Uf={allowHtml:!0};({...Ii,...Uf});var Tn=class{constructor(e){this.value=e,this.successful=!0}map(e){return new Tn(e(this.value))}flatMap(e){return e(this.value)}mapErr(e){return this}bimap(e,n){return this.map(e)}orElse(e){return this.value}cast(){return this}orElseThrow(e){return this.value}},Pn=class{constructor(e){this.error=e,this.successful=!1}map(e){return this}flatMap(e){return this}mapErr(e){return new Pn(e(this.error))}bimap(e,n){return this.mapErr(n)}orElse(e){return e}cast(){return this}orElseThrow(e){throw e?new Error(e(this.error)):new Error(""+this.error)}},Sr;(function(t){function e(s){return new Tn(s)}t.success=e;function n(s){return new Pn(s)}t.failure=n;function r(s,a,o){return s.successful?a.successful?o(s.value,a.value):n(a.error):n(s.error)}t.flatMap2=r;function i(s,a,o){return r(s,a,(u,l)=>e(o(u,l)))}t.map2=i})(Sr||(Sr={}));var Wf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},p={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(typeof self<"u"?self:Wf,function(){return function(n){var r={};function i(s){if(r[s])return r[s].exports;var a=r[s]={i:s,l:!1,exports:{}};return n[s].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=n,i.c=r,i.d=function(s,a,o){i.o(s,a)||Object.defineProperty(s,a,{configurable:!1,enumerable:!0,get:o})},i.r=function(s){Object.defineProperty(s,"__esModule",{value:!0})},i.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return i.d(a,"a",a),a},i.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},i.p="",i(i.s=0)}([function(n,r,i){function s(f){if(!(this instanceof s))return new s(f);this._=f}var a=s.prototype;function o(f,m){for(var b=0;b<f;b++)m(b)}function u(f,m,b){return function(F,k){o(k.length,function(S){F(k[S],S,k)})}(function(F,k,S){m=f(m,F,k,S)},b),m}function l(f,m){return u(function(b,F,k,S){return b.concat([f(F,k,S)])},[],m)}function d(f,m){var b={v:0,buf:m};return o(f,function(){var F;b={v:b.v<<1|(F=b.buf,F[0]>>7),buf:function(k){var S=u(function(O,I,q,fe){return O.concat(q===fe.length-1?Buffer.from([I,0]).readUInt16BE(0):fe.readUInt16BE(q))},[],k);return Buffer.from(l(function(O){return(O<<1&65535)>>8},S))}(b.buf)}}),b}function h(){return typeof Buffer<"u"}function D(){if(!h())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function g(f){D();var m=u(function(S,O){return S+O},0,f);if(m%8!=0)throw new Error("The bits ["+f.join(", ")+"] add up to "+m+" which is not an even number of bytes; the total should be divisible by 8");var b,F=m/8,k=(b=function(S){return S>48},u(function(S,O){return S||(b(O)?O:S)},null,f));if(k)throw new Error(k+" bit range requested exceeds 48 bit (6 byte) Number max.");return new s(function(S,O){var I=F+O;return I>S.length?$(O,F.toString()+" bytes"):L(I,u(function(q,fe){var re=d(fe,q.buf);return{coll:q.coll.concat(re.v),buf:re.buf}},{coll:[],buf:S.slice(O,I)},f).coll)})}function y(f,m){return new s(function(b,F){return D(),F+m>b.length?$(F,m+" bytes for "+f):L(F+m,b.slice(F,F+m))})}function T(f,m){if(typeof(b=m)!="number"||Math.floor(b)!==b||m<0||m>6)throw new Error(f+" requires integer length in range [0, 6].");var b}function C(f){return T("uintBE",f),y("uintBE("+f+")",f).map(function(m){return m.readUIntBE(0,f)})}function x(f){return T("uintLE",f),y("uintLE("+f+")",f).map(function(m){return m.readUIntLE(0,f)})}function E(f){return T("intBE",f),y("intBE("+f+")",f).map(function(m){return m.readIntBE(0,f)})}function R(f){return T("intLE",f),y("intLE("+f+")",f).map(function(m){return m.readIntLE(0,f)})}function v(f){return f instanceof s}function A(f){return{}.toString.call(f)==="[object Array]"}function _(f){return h()&&Buffer.isBuffer(f)}function L(f,m){return{status:!0,index:f,value:m,furthest:-1,expected:[]}}function $(f,m){return A(m)||(m=[m]),{status:!1,index:-1,value:null,furthest:f,expected:m}}function j(f,m){if(!m||f.furthest>m.furthest)return f;var b=f.furthest===m.furthest?function(F,k){if(function(){if(s._supportsSet!==void 0)return s._supportsSet;var Je=typeof Set<"u";return s._supportsSet=Je,Je}()&&Array.from){for(var S=new Set(F),O=0;O<k.length;O++)S.add(k[O]);var I=Array.from(S);return I.sort(),I}for(var q={},fe=0;fe<F.length;fe++)q[F[fe]]=!0;for(var re=0;re<k.length;re++)q[k[re]]=!0;var Ye=[];for(var be in q)({}).hasOwnProperty.call(q,be)&&Ye.push(be);return Ye.sort(),Ye}(f.expected,m.expected):m.expected;return{status:f.status,index:f.index,value:f.value,furthest:m.furthest,expected:b}}var U={};function Fe(f,m){if(_(f))return{offset:m,line:-1,column:-1};f in U||(U[f]={});for(var b=U[f],F=0,k=0,S=0,O=m;O>=0;){if(O in b){F=b[O].line,S===0&&(S=b[O].lineStart);break}(f.charAt(O)===`
`||f.charAt(O)==="\r"&&f.charAt(O+1)!==`
`)&&(k++,S===0&&(S=O+1)),O--}var I=F+k,q=m-S;return b[m]={line:I,lineStart:S},{offset:m,line:I+1,column:q+1}}function X(f){if(!v(f))throw new Error("not a parser: "+f)}function Ze(f,m){return typeof f=="string"?f.charAt(m):f[m]}function ae(f){if(typeof f!="number")throw new Error("not a number: "+f)}function De(f){if(typeof f!="function")throw new Error("not a function: "+f)}function me(f){if(typeof f!="string")throw new Error("not a string: "+f)}var Oe=2,ht=3,ce=8,pt=5*ce,Ve=4*ce,mt="  ";function oe(f,m){return new Array(m+1).join(f)}function ue(f,m,b){var F=m-f.length;return F<=0?f:oe(b,F)+f}function fn(f,m,b,F){return{from:f-m>0?f-m:0,to:f+b>F?F:f+b}}function gt(f,m){var b,F,k,S,O,I=m.index,q=I.offset,fe=1;if(q===f.length)return"Got the end of the input";if(_(f)){var re=q-q%ce,Ye=q-re,be=fn(re,pt,Ve+ce,f.length),Je=l(function(J){return l(function(Mt){return ue(Mt.toString(16),2,"0")},J)},function(J,Mt){var It=J.length,vt=[],jt=0;if(It<=Mt)return[J.slice()];for(var $t=0;$t<It;$t++)vt[jt]||vt.push([]),vt[jt].push(J[$t]),($t+1)%Mt==0&&jt++;return vt}(f.slice(be.from,be.to).toJSON().data,ce));S=function(J){return J.from===0&&J.to===1?{from:J.from,to:J.to}:{from:J.from/ce,to:Math.floor(J.to/ce)}}(be),F=re/ce,b=3*Ye,Ye>=4&&(b+=1),fe=2,k=l(function(J){return J.length<=4?J.join(" "):J.slice(0,4).join(" ")+"  "+J.slice(4).join(" ")},Je),(O=(8*(S.to>0?S.to-1:S.to)).toString(16).length)<2&&(O=2)}else{var Bt=f.split(/\r\n|[\n\r\u2028\u2029]/);b=I.column-1,F=I.line-1,S=fn(F,Oe,ht,Bt.length),k=Bt.slice(S.from,S.to),O=S.to.toString().length}var Uu=F-S.from;return _(f)&&(O=(8*(S.to>0?S.to-1:S.to)).toString(16).length)<2&&(O=2),u(function(J,Mt,It){var vt,jt=It===Uu,$t=jt?"> ":mt;return vt=_(f)?ue((8*(S.from+It)).toString(16),O,"0"):ue((S.from+It+1).toString(),O," "),[].concat(J,[$t+vt+" | "+Mt],jt?[mt+oe(" ",O)+" | "+ue("",b," ")+oe("^",fe)]:[])},[],k).join(`
`)}function Dt(f,m){return[`
`,"-- PARSING FAILED "+oe("-",50),`

`,gt(f,m),`

`,(b=m.expected,b.length===1?`Expected:

`+b[0]:`Expected one of the following: 

`+b.join(", ")),`
`].join("");var b}function At(f){return f.flags!==void 0?f.flags:[f.global?"g":"",f.ignoreCase?"i":"",f.multiline?"m":"",f.unicode?"u":"",f.sticky?"y":""].join("")}function bt(){for(var f=[].slice.call(arguments),m=f.length,b=0;b<m;b+=1)X(f[b]);return s(function(F,k){for(var S,O=new Array(m),I=0;I<m;I+=1){if(!(S=j(f[I]._(F,k),S)).status)return S;O[I]=S.value,k=S.index}return j(L(k,O),S)})}function Te(){var f=[].slice.call(arguments);if(f.length===0)throw new Error("seqMap needs at least one argument");var m=f.pop();return De(m),bt.apply(null,f).map(function(b){return m.apply(null,b)})}function Pe(){var f=[].slice.call(arguments),m=f.length;if(m===0)return Hn("zero alternates");for(var b=0;b<m;b+=1)X(f[b]);return s(function(F,k){for(var S,O=0;O<f.length;O+=1)if((S=j(f[O]._(F,k),S)).status)return S;return S})}function Rt(f,m){return Lt(f,m).or(yt([]))}function Lt(f,m){return X(f),X(m),Te(f,m.then(f).many(),function(b,F){return[b].concat(F)})}function it(f){me(f);var m="'"+f+"'";return s(function(b,F){var k=F+f.length,S=b.slice(F,k);return S===f?L(k,S):$(F,m)})}function Ke(f,m){(function(k){if(!(k instanceof RegExp))throw new Error("not a regexp: "+k);for(var S=At(k),O=0;O<S.length;O++){var I=S.charAt(O);if(I!=="i"&&I!=="m"&&I!=="u"&&I!=="s")throw new Error('unsupported regexp flag "'+I+'": '+k)}})(f),arguments.length>=2?ae(m):m=0;var b=function(k){return RegExp("^(?:"+k.source+")",At(k))}(f),F=""+f;return s(function(k,S){var O=b.exec(k.slice(S));if(O){if(0<=m&&m<=O.length){var I=O[0],q=O[m];return L(S+I.length,q)}return $(S,"valid match group (0 to "+O.length+") in "+F)}return $(S,F)})}function yt(f){return s(function(m,b){return L(b,f)})}function Hn(f){return s(function(m,b){return $(b,f)})}function Un(f){if(v(f))return s(function(m,b){var F=f._(m,b);return F.index=b,F.value="",F});if(typeof f=="string")return Un(it(f));if(f instanceof RegExp)return Un(Ke(f));throw new Error("not a string, regexp, or parser: "+f)}function rs(f){return X(f),s(function(m,b){var F=f._(m,b),k=m.slice(b,F.index);return F.status?$(b,'not "'+k+'"'):L(b,null)})}function Wn(f){return De(f),s(function(m,b){var F=Ze(m,b);return b<m.length&&f(F)?L(b+1,F):$(b,"a character/byte matching "+f)})}function is(f,m){arguments.length<2&&(m=f,f=void 0);var b=s(function(F,k){return b._=m()._,b._(F,k)});return f?b.desc(f):b}function Ir(){return Hn("fantasy-land/empty")}a.parse=function(f){if(typeof f!="string"&&!_(f))throw new Error(".parse must be called with a string or Buffer as its argument");var m,b=this.skip(jr)._(f,0);return m=b.status?{status:!0,value:b.value}:{status:!1,index:Fe(f,b.furthest),expected:b.expected},delete U[f],m},a.tryParse=function(f){var m=this.parse(f);if(m.status)return m.value;var b=Dt(f,m),F=new Error(b);throw F.type="ParsimmonError",F.result=m,F},a.assert=function(f,m){return this.chain(function(b){return f(b)?yt(b):Hn(m)})},a.or=function(f){return Pe(this,f)},a.trim=function(f){return this.wrap(f,f)},a.wrap=function(f,m){return Te(f,this,m,function(b,F){return F})},a.thru=function(f){return f(this)},a.then=function(f){return X(f),bt(this,f).map(function(m){return m[1]})},a.many=function(){var f=this;return s(function(m,b){for(var F=[],k=void 0;;){if(!(k=j(f._(m,b),k)).status)return j(L(b,F),k);if(b===k.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");b=k.index,F.push(k.value)}})},a.tieWith=function(f){return me(f),this.map(function(m){if(function(k){if(!A(k))throw new Error("not an array: "+k)}(m),m.length){me(m[0]);for(var b=m[0],F=1;F<m.length;F++)me(m[F]),b+=f+m[F];return b}return""})},a.tie=function(){return this.tieWith("")},a.times=function(f,m){var b=this;return arguments.length<2&&(m=f),ae(f),ae(m),s(function(F,k){for(var S=[],O=void 0,I=void 0,q=0;q<f;q+=1){if(I=j(O=b._(F,k),I),!O.status)return I;k=O.index,S.push(O.value)}for(;q<m&&(I=j(O=b._(F,k),I),O.status);q+=1)k=O.index,S.push(O.value);return j(L(k,S),I)})},a.result=function(f){return this.map(function(){return f})},a.atMost=function(f){return this.times(0,f)},a.atLeast=function(f){return Te(this.times(f),this.many(),function(m,b){return m.concat(b)})},a.map=function(f){De(f);var m=this;return s(function(b,F){var k=m._(b,F);return k.status?j(L(k.index,f(k.value)),k):k})},a.contramap=function(f){De(f);var m=this;return s(function(b,F){var k=m.parse(f(b.slice(F)));return k.status?L(F+b.length,k.value):k})},a.promap=function(f,m){return De(f),De(m),this.contramap(f).map(m)},a.skip=function(f){return bt(this,f).map(function(m){return m[0]})},a.mark=function(){return Te(dn,this,dn,function(f,m,b){return{start:f,value:m,end:b}})},a.node=function(f){return Te(dn,this,dn,function(m,b,F){return{name:f,value:b,start:m,end:F}})},a.sepBy=function(f){return Rt(this,f)},a.sepBy1=function(f){return Lt(this,f)},a.lookahead=function(f){return this.skip(Un(f))},a.notFollowedBy=function(f){return this.skip(rs(f))},a.desc=function(f){A(f)||(f=[f]);var m=this;return s(function(b,F){var k=m._(b,F);return k.status||(k.expected=f),k})},a.fallback=function(f){return this.or(yt(f))},a.ap=function(f){return Te(f,this,function(m,b){return m(b)})},a.chain=function(f){var m=this;return s(function(b,F){var k=m._(b,F);return k.status?j(f(k.value)._(b,k.index),k):k})},a.concat=a.or,a.empty=Ir,a.of=yt,a["fantasy-land/ap"]=a.ap,a["fantasy-land/chain"]=a.chain,a["fantasy-land/concat"]=a.concat,a["fantasy-land/empty"]=a.empty,a["fantasy-land/of"]=a.of,a["fantasy-land/map"]=a.map;var dn=s(function(f,m){return L(m,Fe(f,m))}),Bu=s(function(f,m){return m>=f.length?$(m,"any character/byte"):L(m+1,Ze(f,m))}),Mu=s(function(f,m){return L(f.length,f.slice(m))}),jr=s(function(f,m){return m<f.length?$(m,"EOF"):L(m,null)}),Iu=Ke(/[0-9]/).desc("a digit"),ju=Ke(/[0-9]*/).desc("optional digits"),$u=Ke(/[a-z]/i).desc("a letter"),Vu=Ke(/[a-z]*/i).desc("optional letters"),_u=Ke(/\s*/).desc("optional whitespace"),Gu=Ke(/\s+/).desc("whitespace"),ss=it("\r"),as=it(`
`),os=it(`\r
`),us=Pe(os,as,ss).desc("newline"),Hu=Pe(us,jr);s.all=Mu,s.alt=Pe,s.any=Bu,s.cr=ss,s.createLanguage=function(f){var m={};for(var b in f)({}).hasOwnProperty.call(f,b)&&function(F){m[F]=is(function(){return f[F](m)})}(b);return m},s.crlf=os,s.custom=function(f){return s(f(L,$))},s.digit=Iu,s.digits=ju,s.empty=Ir,s.end=Hu,s.eof=jr,s.fail=Hn,s.formatError=Dt,s.index=dn,s.isParser=v,s.lazy=is,s.letter=$u,s.letters=Vu,s.lf=as,s.lookahead=Un,s.makeFailure=$,s.makeSuccess=L,s.newline=us,s.noneOf=function(f){return Wn(function(m){return f.indexOf(m)<0}).desc("none of '"+f+"'")},s.notFollowedBy=rs,s.of=yt,s.oneOf=function(f){for(var m=f.split(""),b=0;b<m.length;b++)m[b]="'"+m[b]+"'";return Wn(function(F){return f.indexOf(F)>=0}).desc(m)},s.optWhitespace=_u,s.Parser=s,s.range=function(f,m){return Wn(function(b){return f<=b&&b<=m}).desc(f+"-"+m)},s.regex=Ke,s.regexp=Ke,s.sepBy=Rt,s.sepBy1=Lt,s.seq=bt,s.seqMap=Te,s.seqObj=function(){for(var f,m={},b=0,F=(f=arguments,Array.prototype.slice.call(f)),k=F.length,S=0;S<k;S+=1){var O=F[S];if(!v(O)){if(A(O)&&O.length===2&&typeof O[0]=="string"&&v(O[1])){var I=O[0];if(Object.prototype.hasOwnProperty.call(m,I))throw new Error("seqObj: duplicate key "+I);m[I]=!0,b++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(b===0)throw new Error("seqObj expects at least one named parser, found zero");return s(function(q,fe){for(var re,Ye={},be=0;be<k;be+=1){var Je,Bt;if(A(F[be])?(Je=F[be][0],Bt=F[be][1]):(Je=null,Bt=F[be]),!(re=j(Bt._(q,fe),re)).status)return re;Je&&(Ye[Je]=re.value),fe=re.index}return j(L(fe,Ye),re)})},s.string=it,s.succeed=yt,s.takeWhile=function(f){return De(f),s(function(m,b){for(var F=b;F<m.length&&f(Ze(m,F));)F++;return L(F,m.slice(b,F))})},s.test=Wn,s.whitespace=Gu,s["fantasy-land/empty"]=Ir,s["fantasy-land/of"]=yt,s.Binary={bitSeq:g,bitSeqObj:function(f){D();var m={},b=0,F=l(function(S){if(A(S)){var O=S;if(O.length!==2)throw new Error("["+O.join(", ")+"] should be length 2, got length "+O.length);if(me(O[0]),ae(O[1]),Object.prototype.hasOwnProperty.call(m,O[0]))throw new Error("duplicate key in bitSeqObj: "+O[0]);return m[O[0]]=!0,b++,O}return ae(S),[null,S]},f);if(b<1)throw new Error("bitSeqObj expects at least one named pair, got ["+f.join(", ")+"]");var k=l(function(S){return S[0]},F);return g(l(function(S){return S[1]},F)).map(function(S){return u(function(O,I){return I[0]!==null&&(O[I[0]]=I[1]),O},{},l(function(O,I){return[O,S[I]]},k))})},byte:function(f){if(D(),ae(f),f>255)throw new Error("Value specified to byte constructor ("+f+"=0x"+f.toString(16)+") is larger in value than a single byte.");var m=(f>15?"0x":"0x0")+f.toString(16);return s(function(b,F){var k=Ze(b,F);return k===f?L(F+1,k):$(F,m)})},buffer:function(f){return y("buffer",f).map(function(m){return Buffer.from(m)})},encodedString:function(f,m){return y("string",m).map(function(b){return b.toString(f)})},uintBE:C,uint8BE:C(1),uint16BE:C(2),uint32BE:C(4),uintLE:x,uint8LE:x(1),uint16LE:x(2),uint32LE:x(4),intBE:E,int8BE:E(1),int16BE:E(2),int32BE:E(4),intLE:R,int8LE:R(1),int16LE:R(2),int32LE:R(4),floatBE:y("floatBE",4).map(function(f){return f.readFloatBE(0)}),floatLE:y("floatLE",4).map(function(f){return f.readFloatLE(0)}),doubleBE:y("doubleBE",8).map(function(f){return f.readDoubleBE(0)}),doubleLE:y("doubleLE",8).map(function(f){return f.readDoubleLE(0)})},n.exports=s}])})})(p);var ji=()=>/(?:[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26D3\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26F9(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC3\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E\uDC70\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED7\uDEDD-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE])))?))?|\uDC6F(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDD75(?:\uFE0F|\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF6](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC2\uDED0-\uDED9\uDEE0-\uDEE7]|\uDD3C(?:\u200D[\u2640\u2642]\uFE0F?|\uD83C[\uDFFB-\uDFFF])?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF-\uDDB3\uDDBC\uDDBD]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?))/g;function Vo(t){return t==null?t:t.shiftToAll().normalize()}function Ia(t){return t.includes("/")&&(t=t.substring(t.lastIndexOf("/")+1)),t.endsWith(".md")&&(t=t.substring(0,t.length-3)),t}p.exports.alt(p.exports.regex(new RegExp(ji(),"")),p.exports.regex(/[0-9\p{Letter}_-]+/u).map(t=>t.toLocaleLowerCase()),p.exports.whitespace.map(t=>"-"),p.exports.any.map(t=>"")).many().map(t=>t.join(""));var qf=p.exports.alt(p.exports.regex(new RegExp(ji(),"")),p.exports.regex(/[0-9\p{Letter}_-]+/u),p.exports.whitespace.map(t=>" "),p.exports.any.map(t=>" ")).many().map(t=>t.join("").split(/\s+/).join(" ").trim());function zf(t){return qf.tryParse(t)}function Zf(t){return t=Vo(t),t=N.fromObject(Object.fromEntries(Object.entries(t.toObject()).filter(([,e])=>e>0))),t.toHuman()}var Nn;(function(t){function e(v,A=Ii,_=!1){let L=n(v);if(!L)return A.renderNullAs;switch(L.type){case"null":return A.renderNullAs;case"string":return L.value;case"number":case"boolean":return""+L.value;case"html":return L.value.outerHTML;case"widget":return L.value.markdown();case"link":return L.value.markdown();case"function":return"<function>";case"array":let $="";return _&&($+="["),$+=L.value.map(j=>e(j,A,!0)).join(", "),_&&($+="]"),$;case"object":return"{ "+Object.entries(L.value).map(j=>j[0]+": "+e(j[1],A,!0)).join(", ")+" }";case"date":return L.value.second==0&&L.value.hour==0&&L.value.minute==0?L.value.toFormat(A.defaultDateFormat):L.value.toFormat(A.defaultDateTimeFormat);case"duration":return Zf(L.value)}}t.toString=e;function n(v){return D(v)?{type:"null",value:v}:l(v)?{type:"number",value:v}:u(v)?{type:"string",value:v}:y(v)?{type:"boolean",value:v}:h(v)?{type:"duration",value:v}:d(v)?{type:"date",value:v}:C(v)?{type:"widget",value:v}:g(v)?{type:"array",value:v}:T(v)?{type:"link",value:v}:R(v)?{type:"function",value:v}:x(v)?{type:"html",value:v}:E(v)?{type:"object",value:v}:void 0}t.wrapValue=n;function r(v,A){if(E(v)){let _={};for(let[L,$]of Object.entries(v))_[L]=r($,A);return _}else if(g(v)){let _=[];for(let L of v)_.push(r(L,A));return _}else return A(v)}t.mapLeaves=r;function i(v,A,_){var L,$;if(v===void 0&&(v=null),A===void 0&&(A=null),v===null&&A===null)return 0;if(v===null)return-1;if(A===null)return 1;let j=n(v),U=n(A);if(j===void 0&&U===void 0)return 0;if(j===void 0)return-1;if(U===void 0)return 1;if(j.type!=U.type)return j.type.localeCompare(U.type);if(j.value===U.value)return 0;switch(j.type){case"string":return j.value.localeCompare(U.value);case"number":return j.value<U.value?-1:j.value==U.value?0:1;case"null":return 0;case"boolean":return j.value==U.value?0:j.value?1:-1;case"link":let Fe=j.value,X=U.value,Ze=_??(oe=>oe),ae=Ze(Fe.path).localeCompare(Ze(X.path));if(ae!=0)return ae;let De=Fe.type.localeCompare(X.type);return De!=0?De:Fe.subpath&&!X.subpath?1:!Fe.subpath&&X.subpath?-1:!Fe.subpath&&!X.subpath?0:((L=Fe.subpath)!==null&&L!==void 0?L:"").localeCompare(($=X.subpath)!==null&&$!==void 0?$:"");case"date":return j.value<U.value?-1:j.value.equals(U.value)?0:1;case"duration":return j.value<U.value?-1:j.value.equals(U.value)?0:1;case"array":let me=j.value,Oe=U.value;for(let oe=0;oe<Math.min(me.length,Oe.length);oe++){let ue=i(me[oe],Oe[oe]);if(ue!=0)return ue}return me.length-Oe.length;case"object":let ht=j.value,ce=U.value,pt=Array.from(Object.keys(ht)),Ve=Array.from(Object.keys(ce));pt.sort(),Ve.sort();let mt=i(pt,Ve);if(mt!=0)return mt;for(let oe of pt){let ue=i(ht[oe],ce[oe]);if(ue!=0)return ue}return 0;case"widget":case"html":case"function":return 0}}t.compareValue=i;function s(v){var A;return(A=n(v))===null||A===void 0?void 0:A.type}t.typeOf=s;function a(v){let A=n(v);if(!A)return!1;switch(A.type){case"number":return A.value!=0;case"string":return A.value.length>0;case"boolean":return A.value;case"link":return!!A.value.path;case"date":return A.value.toMillis()!=0;case"duration":return A.value.as("seconds")!=0;case"object":return Object.keys(A.value).length>0;case"array":return A.value.length>0;case"null":return!1;case"html":case"widget":case"function":return!0}}t.isTruthy=a;function o(v){if(v==null)return v;if(t.isArray(v))return[].concat(v.map(A=>o(A)));if(t.isObject(v)){let A={};for(let[_,L]of Object.entries(v))A[_]=o(L);return A}else return v}t.deepCopy=o;function u(v){return typeof v=="string"}t.isString=u;function l(v){return typeof v=="number"}t.isNumber=l;function d(v){return v instanceof B}t.isDate=d;function h(v){return v instanceof N}t.isDuration=h;function D(v){return v==null}t.isNull=D;function g(v){return Array.isArray(v)}t.isArray=g;function y(v){return typeof v=="boolean"}t.isBoolean=y;function T(v){return v instanceof te}t.isLink=T;function C(v){return v instanceof An}t.isWidget=C;function x(v){return typeof HTMLElement<"u"?v instanceof HTMLElement:!1}t.isHtml=x;function E(v){return typeof v=="object"&&!x(v)&&!C(v)&&!g(v)&&!h(v)&&!d(v)&&!T(v)&&v!==void 0&&!D(v)}t.isObject=E;function R(v){return typeof v=="function"}t.isFunction=R})(Nn||(Nn={}));var ja;(function(t){function e(i){return Nn.isObject(i)&&Object.keys(i).length==2&&"key"in i&&"rows"in i}t.isElementGroup=e;function n(i){for(let s of i)if(!e(s))return!1;return!0}t.isGrouping=n;function r(i){if(n(i)){let s=0;for(let a of i)s+=r(a.rows);return s}else return i.length}t.count=r})(ja||(ja={}));var te=class{constructor(e){Object.assign(this,e)}static file(e,n=!1,r){return new te({path:e,embed:n,display:r,subpath:void 0,type:"file"})}static infer(e,n=!1,r){if(e.includes("#^")){let i=e.split("#^");return te.block(i[0],i[1],n,r)}else if(e.includes("#")){let i=e.split("#");return te.header(i[0],i[1],n,r)}else return te.file(e,n,r)}static header(e,n,r,i){return new te({path:e,embed:r,display:i,subpath:zf(n),type:"header"})}static block(e,n,r,i){return new te({path:e,embed:r,display:i,subpath:n,type:"block"})}static fromObject(e){return new te(e)}equals(e){return e==null||e==null?!1:this.path==e.path&&this.type==e.type&&this.subpath==e.subpath}toString(){return this.markdown()}toObject(){return{path:this.path,type:this.type,subpath:this.subpath,display:this.display,embed:this.embed}}withPath(e){return new te(Object.assign({},this,{path:e}))}withDisplay(e){return new te(Object.assign({},this,{display:e}))}withHeader(e){return te.header(this.path,e,this.embed,this.display)}toFile(){return te.file(this.path,this.embed,this.display)}toEmbed(){if(this.embed)return this;{let e=new te(this);return e.embed=!0,e}}fromEmbed(){if(this.embed){let e=new te(this);return e.embed=!1,e}else return this}markdown(){let e=(this.embed?"!":"")+"[["+this.obsidianLink();return this.display?e+="|"+this.display:(e+="|"+Ia(this.path),(this.type=="header"||this.type=="block")&&(e+=" > "+this.subpath)),e+="]]",e}obsidianLink(){var e,n;let r=this.path.replace("|","\\|");return this.type=="header"?r+"#"+((e=this.subpath)===null||e===void 0?void 0:e.replace("|","\\|")):this.type=="block"?r+"#^"+((n=this.subpath)===null||n===void 0?void 0:n.replace("|","\\|")):r}fileName(){return Ia(this.path).replace(".md","")}},An=class{constructor(e){this.$widget=e}},Ci=class extends An{constructor(e,n){super("dataview:list-pair"),this.key=e,this.value=n}markdown(){return`${Nn.toString(this.key)}: ${Nn.toString(this.value)}`}},ki=class extends An{constructor(e,n){super("dataview:external-link"),this.url=e,this.display=n}markdown(){var e;return`[${(e=this.display)!==null&&e!==void 0?e:this.url}](${this.url})`}},$a;(function(t){function e(a,o){return new Ci(a,o)}t.listPair=e;function n(a,o){return new ki(a,o)}t.externalLink=n;function r(a){return a.$widget==="dataview:list-pair"}t.isListPair=r;function i(a){return a.$widget==="dataview:external-link"}t.isExternalLink=i;function s(a){return r(a)||i(a)}t.isBuiltin=s})($a||($a={}));var Z;(function(t){function e(D){return{type:"variable",name:D}}t.variable=e;function n(D){return{type:"literal",value:D}}t.literal=n;function r(D,g,y){return{type:"binaryop",left:D,op:g,right:y}}t.binaryOp=r;function i(D,g){return{type:"index",object:D,index:g}}t.index=i;function s(D){let g=D.split("."),y=t.variable(g[0]);for(let T=1;T<g.length;T++)y=t.index(y,t.literal(g[T]));return y}t.indexVariable=s;function a(D,g){return{type:"lambda",arguments:D,value:g}}t.lambda=a;function o(D,g){return{type:"function",func:D,arguments:g}}t.func=o;function u(D){return{type:"list",values:D}}t.list=u;function l(D){return{type:"object",values:D}}t.object=l;function d(D){return{type:"negated",child:D}}t.negate=d;function h(D){return D=="<="||D=="<"||D==">"||D==">="||D=="!="||D=="="}t.isCompareOp=h,t.NULL=t.literal(null)})(Z||(Z={}));var qe;(function(t){function e(d){return{type:"tag",tag:d}}t.tag=e;function n(d){return{type:"csv",path:d}}t.csv=n;function r(d){return{type:"folder",folder:d}}t.folder=r;function i(d,h){return{type:"link",file:d,direction:h?"incoming":"outgoing"}}t.link=i;function s(d,h,D){return{type:"binaryop",left:d,op:h,right:D}}t.binaryOp=s;function a(d,h){return{type:"binaryop",left:d,op:"&",right:h}}t.and=a;function o(d,h){return{type:"binaryop",left:d,op:"|",right:h}}t.or=o;function u(d){return{type:"negate",child:d}}t.negate=u;function l(){return{type:"empty"}}t.empty=l})(qe||(qe={}));var Va=new RegExp(ji(),""),Si={year:N.fromObject({years:1}),years:N.fromObject({years:1}),yr:N.fromObject({years:1}),yrs:N.fromObject({years:1}),month:N.fromObject({months:1}),months:N.fromObject({months:1}),mo:N.fromObject({months:1}),mos:N.fromObject({months:1}),week:N.fromObject({weeks:1}),weeks:N.fromObject({weeks:1}),wk:N.fromObject({weeks:1}),wks:N.fromObject({weeks:1}),w:N.fromObject({weeks:1}),day:N.fromObject({days:1}),days:N.fromObject({days:1}),d:N.fromObject({days:1}),hour:N.fromObject({hours:1}),hours:N.fromObject({hours:1}),hr:N.fromObject({hours:1}),hrs:N.fromObject({hours:1}),h:N.fromObject({hours:1}),minute:N.fromObject({minutes:1}),minutes:N.fromObject({minutes:1}),min:N.fromObject({minutes:1}),mins:N.fromObject({minutes:1}),m:N.fromObject({minutes:1}),second:N.fromObject({seconds:1}),seconds:N.fromObject({seconds:1}),sec:N.fromObject({seconds:1}),secs:N.fromObject({seconds:1}),s:N.fromObject({seconds:1})},Oi={now:()=>B.local(),today:()=>B.local().startOf("day"),yesterday:()=>B.local().startOf("day").minus(N.fromObject({days:1})),tomorrow:()=>B.local().startOf("day").plus(N.fromObject({days:1})),sow:()=>B.local().startOf("week"),"start-of-week":()=>B.local().startOf("week"),eow:()=>B.local().endOf("week"),"end-of-week":()=>B.local().endOf("week"),soy:()=>B.local().startOf("year"),"start-of-year":()=>B.local().startOf("year"),eoy:()=>B.local().endOf("year"),"end-of-year":()=>B.local().endOf("year"),som:()=>B.local().startOf("month"),"start-of-month":()=>B.local().startOf("month"),eom:()=>B.local().endOf("month"),"end-of-month":()=>B.local().endOf("month")},Ti=["FROM","WHERE","LIMIT","GROUP","FLATTEN"];function Kf(t){let e=-1;for(;(e=t.indexOf("|",e+1))>=0;)if(!(e>0&&t[e-1]=="\\"))return[t.substring(0,e).replace(/\\\|/g,"|"),t.substring(e+1)];return[t.replace(/\\\|/g,"|"),void 0]}function Yf(t){let[e,n]=Kf(t);return te.infer(e,!1,n)}function Cn(t,e,n){return p.exports.seqMap(t,p.exports.seq(p.exports.optWhitespace,e,p.exports.optWhitespace,t).many(),(r,i)=>{if(i.length==0)return r;let s=n(r,i[0][1],i[0][3]);for(let a=1;a<i.length;a++)s=n(s,i[a][1],i[a][3]);return s})}function Jf(t,...e){return p.exports.custom((n,r)=>(i,s)=>{let a=t._(i,s);if(!a.status)return a;for(let o of e){let u=o(a.value)._(i,a.index);if(!u.status)return a;a=u}return a})}var Be=p.exports.createLanguage({number:t=>p.exports.regexp(/-?[0-9]+(\.[0-9]+)?/).map(e=>Number.parseFloat(e)).desc("number"),string:t=>p.exports.string('"').then(p.exports.alt(t.escapeCharacter,p.exports.noneOf('"\\')).atLeast(0).map(e=>e.join(""))).skip(p.exports.string('"')).desc("string"),escapeCharacter:t=>p.exports.string("\\").then(p.exports.any).map(e=>e==='"'?'"':e==="\\"?"\\":"\\"+e),bool:t=>p.exports.regexp(/true|false|True|False/).map(e=>e.toLowerCase()=="true").desc("boolean ('true' or 'false')"),tag:t=>p.exports.seqMap(p.exports.string("#"),p.exports.alt(p.exports.regexp(/[^\u2000-\u206F\u2E00-\u2E7F'!"#$%&()*+,.:;<=>?@^`{|}~\[\]\\\s]/).desc("text")).many(),(e,n)=>e+n.join("")).desc("tag ('#hello/stuff')"),identifier:t=>p.exports.seqMap(p.exports.alt(p.exports.regexp(/\p{Letter}/u),p.exports.regexp(Va).desc("text")),p.exports.alt(p.exports.regexp(/[0-9\p{Letter}_-]/u),p.exports.regexp(Va).desc("text")).many(),(e,n)=>e+n.join("")).desc("variable identifier"),link:t=>p.exports.regexp(/\[\[([^\[\]]*?)\]\]/u,1).map(e=>Yf(e)).desc("file link"),embedLink:t=>p.exports.seqMap(p.exports.string("!").atMost(1),t.link,(e,n)=>(e.length>0&&(n.embed=!0),n)).desc("file link"),binaryPlusMinus:t=>p.exports.regexp(/\+|-/).map(e=>e).desc("'+' or '-'"),binaryMulDiv:t=>p.exports.regexp(/\*|\/|%/).map(e=>e).desc("'*' or '/' or '%'"),binaryCompareOp:t=>p.exports.regexp(/>=|<=|!=|>|<|=/).map(e=>e).desc("'>=' or '<=' or '!=' or '=' or '>' or '<'"),binaryBooleanOp:t=>p.exports.regexp(/and|or|&|\|/i).map(e=>e.toLowerCase()=="and"?"&":e.toLowerCase()=="or"?"|":e).desc("'and' or 'or'"),rootDate:t=>p.exports.seqMap(p.exports.regexp(/\d{4}/),p.exports.string("-"),p.exports.regexp(/\d{2}/),(e,n,r)=>B.fromObject({year:Number.parseInt(e),month:Number.parseInt(r)})).desc("date in format YYYY-MM[-DDTHH-MM-SS.MS]"),dateShorthand:t=>p.exports.alt(...Object.keys(Oi).sort((e,n)=>n.length-e.length).map(p.exports.string)),date:t=>Jf(t.rootDate,e=>p.exports.seqMap(p.exports.string("-"),p.exports.regexp(/\d{2}/),(n,r)=>e.set({day:Number.parseInt(r)})),e=>p.exports.seqMap(p.exports.string("T"),p.exports.regexp(/\d{2}/),(n,r)=>e.set({hour:Number.parseInt(r)})),e=>p.exports.seqMap(p.exports.string(":"),p.exports.regexp(/\d{2}/),(n,r)=>e.set({minute:Number.parseInt(r)})),e=>p.exports.seqMap(p.exports.string(":"),p.exports.regexp(/\d{2}/),(n,r)=>e.set({second:Number.parseInt(r)})),e=>p.exports.alt(p.exports.seqMap(p.exports.string("."),p.exports.regexp(/\d{3}/),(n,r)=>e.set({millisecond:Number.parseInt(r)})),p.exports.succeed(e)),e=>p.exports.alt(p.exports.seqMap(p.exports.string("+").or(p.exports.string("-")),p.exports.regexp(/\d{1,2}(:\d{2})?/),(n,r)=>e.setZone("UTC"+n+r,{keepLocalTime:!0})),p.exports.seqMap(p.exports.string("Z"),()=>e.setZone("utc",{keepLocalTime:!0})),p.exports.seqMap(p.exports.string("["),p.exports.regexp(/[0-9A-Za-z+-\/]+/u),p.exports.string("]"),(n,r,i)=>e.setZone(r,{keepLocalTime:!0})))).assert(e=>e.isValid,"valid date").desc("date in format YYYY-MM[-DDTHH-MM-SS.MS]"),datePlus:t=>p.exports.alt(t.dateShorthand.map(e=>Oi[e]()),t.date).desc("date in format YYYY-MM[-DDTHH-MM-SS.MS] or in shorthand"),durationType:t=>p.exports.alt(...Object.keys(Si).sort((e,n)=>n.length-e.length).map(p.exports.string)),duration:t=>p.exports.seqMap(t.number,p.exports.optWhitespace,t.durationType,(e,n,r)=>Si[r].mapUnits(i=>i*e)).sepBy1(p.exports.string(",").trim(p.exports.optWhitespace).or(p.exports.optWhitespace)).map(e=>e.reduce((n,r)=>n.plus(r))).desc("duration like 4hr2min"),rawNull:t=>p.exports.string("null"),tagSource:t=>t.tag.map(e=>qe.tag(e)),csvSource:t=>p.exports.seqMap(p.exports.string("csv(").skip(p.exports.optWhitespace),t.string,p.exports.string(")"),(e,n,r)=>qe.csv(n)),linkIncomingSource:t=>t.link.map(e=>qe.link(e.path,!0)),linkOutgoingSource:t=>p.exports.seqMap(p.exports.string("outgoing(").skip(p.exports.optWhitespace),t.link,p.exports.string(")"),(e,n,r)=>qe.link(n.path,!1)),folderSource:t=>t.string.map(e=>qe.folder(e)),parensSource:t=>p.exports.seqMap(p.exports.string("("),p.exports.optWhitespace,t.source,p.exports.optWhitespace,p.exports.string(")"),(e,n,r,i,s)=>r),negateSource:t=>p.exports.seqMap(p.exports.alt(p.exports.string("-"),p.exports.string("!")),t.atomSource,(e,n)=>qe.negate(n)),atomSource:t=>p.exports.alt(t.parensSource,t.negateSource,t.linkOutgoingSource,t.linkIncomingSource,t.folderSource,t.tagSource,t.csvSource),binaryOpSource:t=>Cn(t.atomSource,t.binaryBooleanOp.map(e=>e),qe.binaryOp),source:t=>t.binaryOpSource,variableField:t=>t.identifier.chain(e=>Ti.includes(e.toUpperCase())?p.exports.fail("Variable fields cannot be a keyword ("+Ti.join(" or ")+")"):p.exports.succeed(Z.variable(e))).desc("variable"),numberField:t=>t.number.map(e=>Z.literal(e)).desc("number"),stringField:t=>t.string.map(e=>Z.literal(e)).desc("string"),boolField:t=>t.bool.map(e=>Z.literal(e)).desc("boolean"),dateField:t=>p.exports.seqMap(p.exports.string("date("),p.exports.optWhitespace,t.datePlus,p.exports.optWhitespace,p.exports.string(")"),(e,n,r,i,s)=>Z.literal(r)).desc("date"),durationField:t=>p.exports.seqMap(p.exports.string("dur("),p.exports.optWhitespace,t.duration,p.exports.optWhitespace,p.exports.string(")"),(e,n,r,i,s)=>Z.literal(r)).desc("duration"),nullField:t=>t.rawNull.map(e=>Z.NULL),linkField:t=>t.link.map(e=>Z.literal(e)),listField:t=>t.field.sepBy(p.exports.string(",").trim(p.exports.optWhitespace)).wrap(p.exports.string("[").skip(p.exports.optWhitespace),p.exports.optWhitespace.then(p.exports.string("]"))).map(e=>Z.list(e)).desc("list ('[1, 2, 3]')"),objectField:t=>p.exports.seqMap(t.identifier.or(t.string),p.exports.string(":").trim(p.exports.optWhitespace),t.field,(e,n,r)=>({name:e,value:r})).sepBy(p.exports.string(",").trim(p.exports.optWhitespace)).wrap(p.exports.string("{").skip(p.exports.optWhitespace),p.exports.optWhitespace.then(p.exports.string("}"))).map(e=>{let n={};for(let r of e)n[r.name]=r.value;return Z.object(n)}).desc("object ('{ a: 1, b: 2 }')"),atomInlineField:t=>p.exports.alt(t.date,t.duration.map(e=>Vo(e)),t.string,t.tag,t.embedLink,t.bool,t.number,t.rawNull),inlineFieldList:t=>t.atomInlineField.sepBy(p.exports.string(",").trim(p.exports.optWhitespace).lookahead(t.atomInlineField)),inlineField:t=>p.exports.alt(p.exports.seqMap(t.atomInlineField,p.exports.string(",").trim(p.exports.optWhitespace),t.inlineFieldList,(e,n,r)=>[e].concat(r)),t.atomInlineField),atomField:t=>p.exports.alt(t.embedLink.map(e=>Z.literal(e)),t.negatedField,t.linkField,t.listField,t.objectField,t.lambdaField,t.parensField,t.boolField,t.numberField,t.stringField,t.dateField,t.durationField,t.nullField,t.variableField),indexField:t=>p.exports.seqMap(t.atomField,p.exports.alt(t.dotPostfix,t.indexPostfix,t.functionPostfix).many(),(e,n)=>{let r=e;for(let i of n)switch(i.type){case"dot":r=Z.index(r,Z.literal(i.field));break;case"index":r=Z.index(r,i.field);break;case"function":r=Z.func(r,i.fields);break}return r}),negatedField:t=>p.exports.seqMap(p.exports.string("!"),t.indexField,(e,n)=>Z.negate(n)).desc("negated field"),parensField:t=>p.exports.seqMap(p.exports.string("("),p.exports.optWhitespace,t.field,p.exports.optWhitespace,p.exports.string(")"),(e,n,r,i,s)=>r),lambdaField:t=>p.exports.seqMap(t.identifier.sepBy(p.exports.string(",").trim(p.exports.optWhitespace)).wrap(p.exports.string("(").trim(p.exports.optWhitespace),p.exports.string(")").trim(p.exports.optWhitespace)),p.exports.string("=>").trim(p.exports.optWhitespace),t.field,(e,n,r)=>({type:"lambda",arguments:e,value:r})),dotPostfix:t=>p.exports.seqMap(p.exports.string("."),t.identifier,(e,n)=>({type:"dot",field:n})),indexPostfix:t=>p.exports.seqMap(p.exports.string("["),p.exports.optWhitespace,t.field,p.exports.optWhitespace,p.exports.string("]"),(e,n,r,i,s)=>({type:"index",field:r})),functionPostfix:t=>p.exports.seqMap(p.exports.string("("),p.exports.optWhitespace,t.field.sepBy(p.exports.string(",").trim(p.exports.optWhitespace)),p.exports.optWhitespace,p.exports.string(")"),(e,n,r,i,s)=>({type:"function",fields:r})),binaryMulDivField:t=>Cn(t.indexField,t.binaryMulDiv,Z.binaryOp),binaryPlusMinusField:t=>Cn(t.binaryMulDivField,t.binaryPlusMinus,Z.binaryOp),binaryCompareField:t=>Cn(t.binaryPlusMinusField,t.binaryCompareOp,Z.binaryOp),binaryBooleanField:t=>Cn(t.binaryCompareField,t.binaryBooleanOp,Z.binaryOp),binaryOpField:t=>t.binaryBooleanField,field:t=>t.binaryOpField});function Qf(t){try{return Sr.success(Be.field.tryParse(t))}catch(e){return Sr.failure(""+e)}}var Or;(function(t){function e(r,i){return{name:r,field:i}}t.named=e;function n(r,i){return{field:r,direction:i}}t.sortBy=n})(Or||(Or={}));function Xf(t){return p.exports.custom((e,n)=>(r,i)=>{let s=t._(r,i);return s.status?Object.assign({},s,{value:[s.value,r.substring(i,s.index)]}):s})}function ed(t){return t.split(/[\r\n]+/).map(e=>e.trim()).join("")}var td=p.exports.createLanguage({queryType:t=>p.exports.alt(p.exports.regexp(/TABLE|LIST|TASK|CALENDAR/i)).map(e=>e.toLowerCase()).desc("query type ('TABLE', 'LIST', 'TASK', or 'CALENDAR')"),explicitNamedField:t=>p.exports.seqMap(Be.field.skip(p.exports.whitespace),p.exports.regexp(/AS/i).skip(p.exports.whitespace),Be.identifier.or(Be.string),(e,n,r)=>Or.named(r,e)),namedField:t=>p.exports.alt(t.explicitNamedField,Xf(Be.field).map(([e,n])=>Or.named(ed(n),e))),sortField:t=>p.exports.seqMap(Be.field.skip(p.exports.optWhitespace),p.exports.regexp(/ASCENDING|DESCENDING|ASC|DESC/i).atMost(1),(e,n)=>{let r=n.length==0?"ascending":n[0].toLowerCase();return r=="desc"&&(r="descending"),r=="asc"&&(r="ascending"),{field:e,direction:r}}),headerClause:t=>t.queryType.skip(p.exports.whitespace).chain(e=>{switch(e){case"table":return p.exports.seqMap(p.exports.regexp(/WITHOUT\s+ID/i).skip(p.exports.optWhitespace).atMost(1),p.exports.sepBy(t.namedField,p.exports.string(",").trim(p.exports.optWhitespace)),(n,r)=>({type:"table",fields:r,showId:n.length==0}));case"list":return p.exports.seqMap(p.exports.regexp(/WITHOUT\s+ID/i).skip(p.exports.optWhitespace).atMost(1),Be.field.atMost(1),(n,r)=>({type:"list",format:r.length==1?r[0]:void 0,showId:n.length==0}));case"task":return p.exports.succeed({type:"task"});case"calendar":return p.exports.seqMap(t.namedField,n=>({type:"calendar",showId:!0,field:n}));default:return p.exports.fail(`Unrecognized query type '${e}'`)}}).desc("TABLE or LIST or TASK or CALENDAR"),fromClause:t=>p.exports.seqMap(p.exports.regexp(/FROM/i),p.exports.whitespace,Be.source,(e,n,r)=>r),whereClause:t=>p.exports.seqMap(p.exports.regexp(/WHERE/i),p.exports.whitespace,Be.field,(e,n,r)=>({type:"where",clause:r})).desc("WHERE <expression>"),sortByClause:t=>p.exports.seqMap(p.exports.regexp(/SORT/i),p.exports.whitespace,t.sortField.sepBy1(p.exports.string(",").trim(p.exports.optWhitespace)),(e,n,r)=>({type:"sort",fields:r})).desc("SORT field [ASC/DESC]"),limitClause:t=>p.exports.seqMap(p.exports.regexp(/LIMIT/i),p.exports.whitespace,Be.field,(e,n,r)=>({type:"limit",amount:r})).desc("LIMIT <value>"),flattenClause:t=>p.exports.seqMap(p.exports.regexp(/FLATTEN/i).skip(p.exports.whitespace),t.namedField,(e,n)=>({type:"flatten",field:n})).desc("FLATTEN <value> [AS <name>]"),groupByClause:t=>p.exports.seqMap(p.exports.regexp(/GROUP BY/i).skip(p.exports.whitespace),t.namedField,(e,n)=>({type:"group",field:n})).desc("GROUP BY <value> [AS <name>]"),clause:t=>p.exports.alt(t.fromClause,t.whereClause,t.sortByClause,t.limitClause,t.groupByClause,t.flattenClause),query:t=>p.exports.seqMap(t.headerClause.trim(p.exports.optWhitespace),t.fromClause.trim(p.exports.optWhitespace).atMost(1),t.clause.trim(p.exports.optWhitespace).many(),(e,n,r)=>({header:e,source:n.length==0?qe.folder(""):n[0],operations:r,settings:Ii}))}),nd=t=>{var e;return t?(e=t.plugins.plugins.dataview)===null||e===void 0?void 0:e.api:window.DataviewAPI},rd=t=>t.plugins.enabledPlugins.has("dataview");ze.DATE_SHORTHANDS=Oi;ze.DURATION_TYPES=Si;ze.EXPRESSION=Be;ze.KEYWORDS=Ti;ze.QUERY_LANGUAGE=td;ze.getAPI=nd;ze.isPluginEnabled=rd;ze.parseField=Qf});var Yo=st((qg,Ko)=>{Ko.exports=Zo;function Zo(t,e,n,r){if(typeof n!="function")throw new Error("method for before hook must be a function");return r||(r={}),Array.isArray(e)?e.reverse().reduce(function(i,s){return Zo.bind(null,t,s,i,r)},n)():Promise.resolve().then(function(){return t.registry[e]?t.registry[e].reduce(function(i,s){return s.hook.bind(null,i,r)},n)():n(r)})}});var Qo=st((zg,Jo)=>{Jo.exports=ld;function ld(t,e,n,r){var i=r;t.registry[n]||(t.registry[n]=[]),e==="before"&&(r=function(s,a){return Promise.resolve().then(i.bind(null,a)).then(s.bind(null,a))}),e==="after"&&(r=function(s,a){var o;return Promise.resolve().then(s.bind(null,a)).then(function(u){return o=u,i(o,a)}).then(function(){return o})}),e==="error"&&(r=function(s,a){return Promise.resolve().then(s.bind(null,a)).catch(function(o){return i(o,a)})}),t.registry[n].push({hook:r,orig:i})}});var eu=st((Zg,Xo)=>{Xo.exports=cd;function cd(t,e,n){if(t.registry[e]){var r=t.registry[e].map(function(i){return i.orig}).indexOf(n);r!==-1&&t.registry[e].splice(r,1)}}});var ou=st((Kg,In)=>{var iu=Yo(),fd=Qo(),dd=eu(),tu=Function.bind,nu=tu.bind(tu);function su(t,e,n){var r=nu(dd,null).apply(null,n?[e,n]:[e]);t.api={remove:r},t.remove=r,["before","error","after","wrap"].forEach(function(i){var s=n?[e,i,n]:[e,i];t[i]=t.api[i]=nu(fd,null).apply(null,s)})}function hd(){var t="h",e={registry:{}},n=iu.bind(null,e,t);return su(n,e,t),n}function au(){var t={registry:{}},e=iu.bind(null,t);return su(e,t),e}var ru=!1;function on(){return ru||(console.warn('[before-after-hook]: "Hook()" repurposing warning, use "Hook.Collection()". Read more: https://git.io/upgrade-before-after-hook-to-1.4'),ru=!0),au()}on.Singular=hd.bind();on.Collection=au.bind();In.exports=on;In.exports.Hook=on;In.exports.Singular=on.Singular;In.exports.Collection=on.Collection});var Du=st((cn,gu)=>{"use strict";var kd=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Pt=kd();gu.exports=cn=Pt.fetch;Pt.fetch&&(cn.default=Pt.fetch.bind(Pt));cn.Headers=Pt.Headers;cn.Request=Pt.Request;cn.Response=Pt.Response});var vu=st((tD,yu)=>{yu.exports=bu;function bu(t,e){if(t&&e)return bu(t)(e);if(typeof t!="function")throw new TypeError("need wrapper function");return Object.keys(t).forEach(function(r){n[r]=t[r]}),n;function n(){for(var r=new Array(arguments.length),i=0;i<r.length;i++)r[i]=arguments[i];var s=t.apply(this,r),a=r[r.length-1];return typeof s=="function"&&s!==a&&Object.keys(a).forEach(function(o){s[o]=a[o]}),s}}});var xu=st((nD,qi)=>{var wu=vu();qi.exports=wu(Lr);qi.exports.strict=wu(Fu);Lr.proto=Lr(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return Lr(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return Fu(this)},configurable:!0})});function Lr(t){var e=function(){return e.called?e.value:(e.called=!0,e.value=t.apply(this,arguments))};return e.called=!1,e}function Fu(t){var e=function(){if(e.called)throw new Error(e.onceError);return e.called=!0,e.value=t.apply(this,arguments)},n=t.name||"Function wrapped with `once`";return e.onceError=n+" shouldn't be called more than once",e.called=!1,e}});var fh={};$r(fh,{default:()=>Br});module.exports=Yu(fh);var Mr=require("obsidian");var M=require("obsidian");var ye=require("obsidian");var cs={github:{user:"",repo:"",branch:"main",token:"",automaticallyMergePR:!0,api:{tiersForApi:"Github Free/Pro/Team (default)",hostname:""},worflow:{customCommitMsg:"[PUBLISHER] Merge",workflowName:""}},upload:{behavior:"fixed",defaultName:"",rootFolder:"",yamlFolderKey:"",frontmatterTitle:{enable:!1,key:"title"},replaceTitle:[],replacePath:[],autoclean:{enable:!1,excluded:[]},folderNote:{enable:!1,rename:"index.md"},metadataExtractorPath:""},conversion:{hardbreak:!1,dataview:!0,censorText:[],tags:{inline:!1,exclude:[],fields:[]},links:{internal:!1,unshared:!1,wiki:!1}},embed:{attachments:!0,keySendFile:[],notes:!1,folder:""},plugin:{shareKey:"share",fileMenu:!1,editorMenu:!1,excludedFolder:[],externalShare:!1,copyLink:{enable:!1,links:"",removePart:[],addCmd:!1},noticeError:!1}};function le(t){return le=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(t)}function xe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Vr(t,e){if(le(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(le(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pn(t){var e=Vr(t,"string");return le(e)==="symbol"?e:String(e)}function fs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pn(r.key),r)}}function Ee(t,e,n){return e&&fs(t.prototype,e),n&&fs(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ne(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mn(t,e){return mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},mn(t,e)}function Vt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mn(t,e)}function wt(t,e){if(e&&(le(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ne(t)}function Ce(t){return Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ce(t)}function _e(t,e,n){return e=pn(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _r(t){if(Array.isArray(t))return t}function Gr(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function zn(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Hr(t,e){if(t){if(typeof t=="string")return zn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zn(t,e)}}function Ur(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wr(t){return _r(t)||Gr(t)||Hr(t)||Ur()}function ds(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function hs(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ds(Object(n),!0).forEach(function(r){_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ds(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Ju={type:"logger",log:function(e){this.output("log",e)},warn:function(e){this.output("warn",e)},error:function(e){this.output("error",e)},output:function(e,n){console&&console[e]&&console[e].apply(console,n)}},Qu=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};xe(this,t),this.init(e,n)}return Ee(t,[{key:"init",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=r.prefix||"i18next:",this.logger=n||Ju,this.options=r,this.debug=r.debug}},{key:"setDebug",value:function(n){this.debug=n}},{key:"log",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return this.forward(r,"log","",!0)}},{key:"warn",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return this.forward(r,"warn","",!0)}},{key:"error",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return this.forward(r,"error","")}},{key:"deprecate",value:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return this.forward(r,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(n,r,i,s){return s&&!this.debug?null:(typeof n[0]=="string"&&(n[0]="".concat(i).concat(this.prefix," ").concat(n[0])),this.logger[r](n))}},{key:"create",value:function(n){return new t(this.logger,hs(hs({},{prefix:"".concat(this.prefix,":").concat(n,":")}),this.options))}},{key:"clone",value:function(n){return n=n||this.options,n.prefix=n.prefix||this.prefix,new t(this.logger,n)}}]),t}(),He=new Qu,at=function(){function t(){xe(this,t),this.observers={}}return Ee(t,[{key:"on",value:function(n,r){var i=this;return n.split(" ").forEach(function(s){i.observers[s]=i.observers[s]||[],i.observers[s].push(r)}),this}},{key:"off",value:function(n,r){if(this.observers[n]){if(!r){delete this.observers[n];return}this.observers[n]=this.observers[n].filter(function(i){return i!==r})}}},{key:"emit",value:function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];if(this.observers[n]){var a=[].concat(this.observers[n]);a.forEach(function(u){u.apply(void 0,i)})}if(this.observers["*"]){var o=[].concat(this.observers["*"]);o.forEach(function(u){u.apply(u,[n].concat(i))})}}}]),t}();function gn(){var t,e,n=new Promise(function(r,i){t=r,e=i});return n.resolve=t,n.reject=e,n}function ps(t){return t==null?"":""+t}function Xu(t,e,n){t.forEach(function(r){e[r]&&(n[r]=e[r])})}function zr(t,e,n){function r(o){return o&&o.indexOf("###")>-1?o.replace(/###/g,"."):o}function i(){return!t||typeof t=="string"}for(var s=typeof e!="string"?[].concat(e):e.split(".");s.length>1;){if(i())return{};var a=r(s.shift());!t[a]&&n&&(t[a]=new n),Object.prototype.hasOwnProperty.call(t,a)?t=t[a]:t={}}return i()?{}:{obj:t,k:r(s.shift())}}function ms(t,e,n){var r=zr(t,e,Object),i=r.obj,s=r.k;i[s]=n}function el(t,e,n,r){var i=zr(t,e,Object),s=i.obj,a=i.k;s[a]=s[a]||[],r&&(s[a]=s[a].concat(n)),r||s[a].push(n)}function Yn(t,e){var n=zr(t,e),r=n.obj,i=n.k;if(r)return r[i]}function gs(t,e,n){var r=Yn(t,n);return r!==void 0?r:Yn(e,n)}function Ps(t,e,n){for(var r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?typeof t[r]=="string"||t[r]instanceof String||typeof e[r]=="string"||e[r]instanceof String?n&&(t[r]=e[r]):Ps(t[r],e[r],n):t[r]=e[r]);return t}function _t(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var tl={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function nl(t){return typeof t=="string"?t.replace(/[&<>"'\/]/g,function(e){return tl[e]}):t}var Qn=typeof window<"u"&&window.navigator&&typeof window.navigator.userAgentData>"u"&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,rl=[" ",",","?","!",";"];function il(t,e,n){e=e||"",n=n||"";var r=rl.filter(function(o){return e.indexOf(o)<0&&n.indexOf(o)<0});if(r.length===0)return!0;var i=new RegExp("(".concat(r.map(function(o){return o==="?"?"\\?":o}).join("|"),")")),s=!i.test(t);if(!s){var a=t.indexOf(n);a>0&&!i.test(t.substring(0,a))&&(s=!0)}return s}function Ds(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Zn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ds(Object(n),!0).forEach(function(r){_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ds(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function sl(t){var e=al();return function(){var r=Ce(t),i;if(e){var s=Ce(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return wt(this,i)}}function al(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ns(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(t){if(t[e])return t[e];for(var r=e.split(n),i=t,s=0;s<r.length;++s){if(!i||typeof i[r[s]]=="string"&&s+1<r.length)return;if(i[r[s]]===void 0){for(var a=2,o=r.slice(s,s+a).join(n),u=i[o];u===void 0&&r.length>s+a;)a++,o=r.slice(s,s+a).join(n),u=i[o];if(u===void 0)return;if(u===null)return null;if(e.endsWith(o)){if(typeof u=="string")return u;if(o&&typeof u[o]=="string")return u[o]}var l=r.slice(s+a).join(n);return l?Ns(u,l,n):void 0}i=i[r[s]]}return i}}var ol=function(t){Vt(n,t);var e=sl(n);function n(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};return xe(this,n),i=e.call(this),Qn&&at.call(Ne(i)),i.data=r||{},i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.options.ignoreJSONStructure===void 0&&(i.options.ignoreJSONStructure=!0),i}return Ee(n,[{key:"addNamespaces",value:function(i){this.options.ns.indexOf(i)<0&&this.options.ns.push(i)}},{key:"removeNamespaces",value:function(i){var s=this.options.ns.indexOf(i);s>-1&&this.options.ns.splice(s,1)}},{key:"getResource",value:function(i,s,a){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},u=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,l=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure,d=[i,s];a&&typeof a!="string"&&(d=d.concat(a)),a&&typeof a=="string"&&(d=d.concat(u?a.split(u):a)),i.indexOf(".")>-1&&(d=i.split("."));var h=Yn(this.data,d);return h||!l||typeof a!="string"?h:Ns(this.data&&this.data[i]&&this.data[i][s],a,u)}},{key:"addResource",value:function(i,s,a,o){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1},l=this.options.keySeparator;l===void 0&&(l=".");var d=[i,s];a&&(d=d.concat(l?a.split(l):a)),i.indexOf(".")>-1&&(d=i.split("."),o=s,s=d[1]),this.addNamespaces(s),ms(this.data,d,o),u.silent||this.emit("added",i,s,a,o)}},{key:"addResources",value:function(i,s,a){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(var u in a)(typeof a[u]=="string"||Object.prototype.toString.apply(a[u])==="[object Array]")&&this.addResource(i,s,u,a[u],{silent:!0});o.silent||this.emit("added",i,s,a)}},{key:"addResourceBundle",value:function(i,s,a,o,u){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1},d=[i,s];i.indexOf(".")>-1&&(d=i.split("."),o=a,a=s,s=d[1]),this.addNamespaces(s);var h=Yn(this.data,d)||{};o?Ps(h,a,u):h=Zn(Zn({},h),a),ms(this.data,d,h),l.silent||this.emit("added",i,s,a)}},{key:"removeResourceBundle",value:function(i,s){this.hasResourceBundle(i,s)&&delete this.data[i][s],this.removeNamespaces(s),this.emit("removed",i,s)}},{key:"hasResourceBundle",value:function(i,s){return this.getResource(i,s)!==void 0}},{key:"getResourceBundle",value:function(i,s){return s||(s=this.options.defaultNS),this.options.compatibilityAPI==="v1"?Zn(Zn({},{}),this.getResource(i,s)):this.getResource(i,s)}},{key:"getDataByLanguage",value:function(i){return this.data[i]}},{key:"hasLanguageSomeTranslations",value:function(i){var s=this.getDataByLanguage(i),a=s&&Object.keys(s)||[];return!!a.find(function(o){return s[o]&&Object.keys(s[o]).length>0})}},{key:"toJSON",value:function(){return this.data}}]),n}(at),As={processors:{},addPostProcessor:function(e){this.processors[e.name]=e},handle:function(e,n,r,i,s){var a=this;return e.forEach(function(o){a.processors[o]&&(n=a.processors[o].process(n,r,i,s))}),n}};function bs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function de(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?bs(Object(n),!0).forEach(function(r){_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bs(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ul(t){var e=ll();return function(){var r=Ce(t),i;if(e){var s=Ce(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return wt(this,i)}}function ll(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ys={},vs=function(t){Vt(n,t);var e=ul(n);function n(r){var i,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return xe(this,n),i=e.call(this),Qn&&at.call(Ne(i)),Xu(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],r,Ne(i)),i.options=s,i.options.keySeparator===void 0&&(i.options.keySeparator="."),i.logger=He.create("translator"),i}return Ee(n,[{key:"changeLanguage",value:function(i){i&&(this.language=i)}},{key:"exists",value:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(i==null)return!1;var a=this.resolve(i,s);return a&&a.res!==void 0}},{key:"extractFromKey",value:function(i,s){var a=s.nsSeparator!==void 0?s.nsSeparator:this.options.nsSeparator;a===void 0&&(a=":");var o=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,u=s.ns||this.options.defaultNS||[],l=a&&i.indexOf(a)>-1,d=!this.options.userDefinedKeySeparator&&!s.keySeparator&&!this.options.userDefinedNsSeparator&&!s.nsSeparator&&!il(i,a,o);if(l&&!d){var h=i.match(this.interpolator.nestingRegexp);if(h&&h.length>0)return{key:i,namespaces:u};var D=i.split(a);(a!==o||a===o&&this.options.ns.indexOf(D[0])>-1)&&(u=D.shift()),i=D.join(o)}return typeof u=="string"&&(u=[u]),{key:i,namespaces:u}}},{key:"translate",value:function(i,s,a){var o=this;if(le(s)!=="object"&&this.options.overloadTranslationOptionHandler&&(s=this.options.overloadTranslationOptionHandler(arguments)),s||(s={}),i==null)return"";Array.isArray(i)||(i=[String(i)]);var u=s.returnDetails!==void 0?s.returnDetails:this.options.returnDetails,l=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,d=this.extractFromKey(i[i.length-1],s),h=d.key,D=d.namespaces,g=D[D.length-1],y=s.lng||this.language,T=s.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(y&&y.toLowerCase()==="cimode"){if(T){var C=s.nsSeparator||this.options.nsSeparator;return u?{res:"".concat(g).concat(C).concat(h),usedKey:h,exactUsedKey:h,usedLng:y,usedNS:g}:"".concat(g).concat(C).concat(h)}return u?{res:h,usedKey:h,exactUsedKey:h,usedLng:y,usedNS:g}:h}var x=this.resolve(i,s),E=x&&x.res,R=x&&x.usedKey||h,v=x&&x.exactUsedKey||h,A=Object.prototype.toString.apply(E),_=["[object Number]","[object Function]","[object RegExp]"],L=s.joinArrays!==void 0?s.joinArrays:this.options.joinArrays,$=!this.i18nFormat||this.i18nFormat.handleAsObject,j=typeof E!="string"&&typeof E!="boolean"&&typeof E!="number";if($&&E&&j&&_.indexOf(A)<0&&!(typeof L=="string"&&A==="[object Array]")){if(!s.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");var U=this.options.returnedObjectHandler?this.options.returnedObjectHandler(R,E,de(de({},s),{},{ns:D})):"key '".concat(h," (").concat(this.language,")' returned an object instead of string.");return u?(x.res=U,x):U}if(l){var Fe=A==="[object Array]",X=Fe?[]:{},Ze=Fe?v:R;for(var ae in E)if(Object.prototype.hasOwnProperty.call(E,ae)){var De="".concat(Ze).concat(l).concat(ae);X[ae]=this.translate(De,de(de({},s),{joinArrays:!1,ns:D})),X[ae]===De&&(X[ae]=E[ae])}E=X}}else if($&&typeof L=="string"&&A==="[object Array]")E=E.join(L),E&&(E=this.extendTranslation(E,i,s,a));else{var me=!1,Oe=!1,ht=s.count!==void 0&&typeof s.count!="string",ce=n.hasDefaultValue(s),pt=ht?this.pluralResolver.getSuffix(y,s.count,s):"",Ve=s["defaultValue".concat(pt)]||s.defaultValue;!this.isValidLookup(E)&&ce&&(me=!0,E=Ve),this.isValidLookup(E)||(Oe=!0,E=h);var mt=s.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,oe=mt&&Oe?void 0:E,ue=ce&&Ve!==E&&this.options.updateMissing;if(Oe||me||ue){if(this.logger.log(ue?"updateKey":"missingKey",y,g,h,ue?Ve:E),l){var fn=this.resolve(h,de(de({},s),{},{keySeparator:!1}));fn&&fn.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}var gt=[],Dt=this.languageUtils.getFallbackCodes(this.options.fallbackLng,s.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Dt&&Dt[0])for(var At=0;At<Dt.length;At++)gt.push(Dt[At]);else this.options.saveMissingTo==="all"?gt=this.languageUtils.toResolveHierarchy(s.lng||this.language):gt.push(s.lng||this.language);var bt=function(Pe,Rt,Lt){var it=ce&&Lt!==E?Lt:oe;o.options.missingKeyHandler?o.options.missingKeyHandler(Pe,g,Rt,it,ue,s):o.backendConnector&&o.backendConnector.saveMissing&&o.backendConnector.saveMissing(Pe,g,Rt,it,ue,s),o.emit("missingKey",Pe,g,Rt,E)};this.options.saveMissing&&(this.options.saveMissingPlurals&&ht?gt.forEach(function(Te){o.pluralResolver.getSuffixes(Te,s).forEach(function(Pe){bt([Te],h+Pe,s["defaultValue".concat(Pe)]||Ve)})}):bt(gt,h,Ve))}E=this.extendTranslation(E,i,s,x,a),Oe&&E===h&&this.options.appendNamespaceToMissingKey&&(E="".concat(g,":").concat(h)),(Oe||me)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?E=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(g,":").concat(h):h,me?E:void 0):E=this.options.parseMissingKeyHandler(E))}return u?(x.res=E,x):E}},{key:"extendTranslation",value:function(i,s,a,o,u){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)i=this.i18nFormat.parse(i,de(de({},this.options.interpolation.defaultVariables),a),o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!a.skipInterpolation){a.interpolation&&this.interpolator.init(de(de({},a),{interpolation:de(de({},this.options.interpolation),a.interpolation)}));var d=typeof i=="string"&&(a&&a.interpolation&&a.interpolation.skipOnVariables!==void 0?a.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables),h;if(d){var D=i.match(this.interpolator.nestingRegexp);h=D&&D.length}var g=a.replace&&typeof a.replace!="string"?a.replace:a;if(this.options.interpolation.defaultVariables&&(g=de(de({},this.options.interpolation.defaultVariables),g)),i=this.interpolator.interpolate(i,g,a.lng||this.language,a),d){var y=i.match(this.interpolator.nestingRegexp),T=y&&y.length;h<T&&(a.nest=!1)}a.nest!==!1&&(i=this.interpolator.nest(i,function(){for(var E=arguments.length,R=new Array(E),v=0;v<E;v++)R[v]=arguments[v];return u&&u[0]===R[0]&&!a.context?(l.logger.warn("It seems you are nesting recursively key: ".concat(R[0]," in key: ").concat(s[0])),null):l.translate.apply(l,R.concat([s]))},a)),a.interpolation&&this.interpolator.reset()}var C=a.postProcess||this.options.postProcess,x=typeof C=="string"?[C]:C;return i!=null&&x&&x.length&&a.applyPostProcessor!==!1&&(i=As.handle(x,i,s,this.options&&this.options.postProcessPassResolved?de({i18nResolved:o},a):a,this)),i}},{key:"resolve",value:function(i){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o,u,l,d,h;return typeof i=="string"&&(i=[i]),i.forEach(function(D){if(!s.isValidLookup(o)){var g=s.extractFromKey(D,a),y=g.key;u=y;var T=g.namespaces;s.options.fallbackNS&&(T=T.concat(s.options.fallbackNS));var C=a.count!==void 0&&typeof a.count!="string",x=C&&!a.ordinal&&a.count===0&&s.pluralResolver.shouldUseIntlApi(),E=a.context!==void 0&&(typeof a.context=="string"||typeof a.context=="number")&&a.context!=="",R=a.lngs?a.lngs:s.languageUtils.toResolveHierarchy(a.lng||s.language,a.fallbackLng);T.forEach(function(v){s.isValidLookup(o)||(h=v,!ys["".concat(R[0],"-").concat(v)]&&s.utils&&s.utils.hasLoadedNamespace&&!s.utils.hasLoadedNamespace(h)&&(ys["".concat(R[0],"-").concat(v)]=!0,s.logger.warn('key "'.concat(u,'" for languages "').concat(R.join(", "),`" won't get resolved as namespace "`).concat(h,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),R.forEach(function(A){if(!s.isValidLookup(o)){d=A;var _=[y];if(s.i18nFormat&&s.i18nFormat.addLookupKeys)s.i18nFormat.addLookupKeys(_,y,A,v,a);else{var L;C&&(L=s.pluralResolver.getSuffix(A,a.count,a));var $="".concat(s.options.pluralSeparator,"zero");if(C&&(_.push(y+L),x&&_.push(y+$)),E){var j="".concat(y).concat(s.options.contextSeparator).concat(a.context);_.push(j),C&&(_.push(j+L),x&&_.push(j+$))}}for(var U;U=_.pop();)s.isValidLookup(o)||(l=U,o=s.getResource(A,v,U,a))}}))})}}),{res:o,usedKey:u,exactUsedKey:l,usedLng:d,usedNS:h}}},{key:"isValidLookup",value:function(i){return i!==void 0&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")}},{key:"getResource",value:function(i,s,a){var o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(i,s,a,o):this.resourceStore.getResource(i,s,a,o)}}],[{key:"hasDefaultValue",value:function(i){var s="defaultValue";for(var a in i)if(Object.prototype.hasOwnProperty.call(i,a)&&s===a.substring(0,s.length)&&i[a]!==void 0)return!0;return!1}}]),n}(at);function qr(t){return t.charAt(0).toUpperCase()+t.slice(1)}var ws=function(){function t(e){xe(this,t),this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=He.create("languageUtils")}return Ee(t,[{key:"getScriptPartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return null;var r=n.split("-");return r.length===2||(r.pop(),r[r.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(r.join("-"))}},{key:"getLanguagePartFromCode",value:function(n){if(!n||n.indexOf("-")<0)return n;var r=n.split("-");return this.formatLanguageCode(r[0])}},{key:"formatLanguageCode",value:function(n){if(typeof n=="string"&&n.indexOf("-")>-1){var r=["hans","hant","latn","cyrl","cans","mong","arab"],i=n.split("-");return this.options.lowerCaseLng?i=i.map(function(s){return s.toLowerCase()}):i.length===2?(i[0]=i[0].toLowerCase(),i[1]=i[1].toUpperCase(),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=qr(i[1].toLowerCase()))):i.length===3&&(i[0]=i[0].toLowerCase(),i[1].length===2&&(i[1]=i[1].toUpperCase()),i[0]!=="sgn"&&i[2].length===2&&(i[2]=i[2].toUpperCase()),r.indexOf(i[1].toLowerCase())>-1&&(i[1]=qr(i[1].toLowerCase())),r.indexOf(i[2].toLowerCase())>-1&&(i[2]=qr(i[2].toLowerCase()))),i.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?n.toLowerCase():n}},{key:"isSupportedCode",value:function(n){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(n=this.getLanguagePartFromCode(n)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(n)>-1}},{key:"getBestMatchFromCodes",value:function(n){var r=this;if(!n)return null;var i;return n.forEach(function(s){if(!i){var a=r.formatLanguageCode(s);(!r.options.supportedLngs||r.isSupportedCode(a))&&(i=a)}}),!i&&this.options.supportedLngs&&n.forEach(function(s){if(!i){var a=r.getLanguagePartFromCode(s);if(r.isSupportedCode(a))return i=a;i=r.options.supportedLngs.find(function(o){if(o.indexOf(a)===0)return o})}}),i||(i=this.getFallbackCodes(this.options.fallbackLng)[0]),i}},{key:"getFallbackCodes",value:function(n,r){if(!n)return[];if(typeof n=="function"&&(n=n(r)),typeof n=="string"&&(n=[n]),Object.prototype.toString.apply(n)==="[object Array]")return n;if(!r)return n.default||[];var i=n[r];return i||(i=n[this.getScriptPartFromCode(r)]),i||(i=n[this.formatLanguageCode(r)]),i||(i=n[this.getLanguagePartFromCode(r)]),i||(i=n.default),i||[]}},{key:"toResolveHierarchy",value:function(n,r){var i=this,s=this.getFallbackCodes(r||this.options.fallbackLng||[],n),a=[],o=function(l){l&&(i.isSupportedCode(l)?a.push(l):i.logger.warn("rejecting language code not found in supportedLngs: ".concat(l)))};return typeof n=="string"&&n.indexOf("-")>-1?(this.options.load!=="languageOnly"&&o(this.formatLanguageCode(n)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&o(this.getScriptPartFromCode(n)),this.options.load!=="currentOnly"&&o(this.getLanguagePartFromCode(n))):typeof n=="string"&&o(this.formatLanguageCode(n)),s.forEach(function(u){a.indexOf(u)<0&&o(i.formatLanguageCode(u))}),a}}]),t}(),cl=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],fl={1:function(e){return Number(e>1)},2:function(e){return Number(e!=1)},3:function(e){return 0},4:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},5:function(e){return Number(e==0?0:e==1?1:e==2?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5)},6:function(e){return Number(e==1?0:e>=2&&e<=4?1:2)},7:function(e){return Number(e==1?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2)},8:function(e){return Number(e==1?0:e==2?1:e!=8&&e!=11?2:3)},9:function(e){return Number(e>=2)},10:function(e){return Number(e==1?0:e==2?1:e<7?2:e<11?3:4)},11:function(e){return Number(e==1||e==11?0:e==2||e==12?1:e>2&&e<20?2:3)},12:function(e){return Number(e%10!=1||e%100==11)},13:function(e){return Number(e!==0)},14:function(e){return Number(e==1?0:e==2?1:e==3?2:3)},15:function(e){return Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2)},16:function(e){return Number(e%10==1&&e%100!=11?0:e!==0?1:2)},17:function(e){return Number(e==1||e%10==1&&e%100!=11?0:1)},18:function(e){return Number(e==0?0:e==1?1:2)},19:function(e){return Number(e==1?0:e==0||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3)},20:function(e){return Number(e==1?0:e==0||e%100>0&&e%100<20?1:2)},21:function(e){return Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0)},22:function(e){return Number(e==1?0:e==2?1:(e<0||e>10)&&e%10==0?2:3)}},dl=["v1","v2","v3"],Fs={zero:0,one:1,two:2,few:3,many:4,other:5};function hl(){var t={};return cl.forEach(function(e){e.lngs.forEach(function(n){t[n]={numbers:e.nr,plurals:fl[e.fc]}})}),t}var pl=function(){function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};xe(this,t),this.languageUtils=e,this.options=n,this.logger=He.create("pluralResolver"),(!this.options.compatibilityJSON||this.options.compatibilityJSON==="v4")&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=hl()}return Ee(t,[{key:"addRule",value:function(n,r){this.rules[n]=r}},{key:"getRule",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(n,{type:r.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[n]||this.rules[this.languageUtils.getLanguagePartFromCode(n)]}},{key:"needsPlural",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=this.getRule(n,r);return this.shouldUseIntlApi()?i&&i.resolvedOptions().pluralCategories.length>1:i&&i.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(n,i).map(function(s){return"".concat(r).concat(s)})}},{key:"getSuffixes",value:function(n){var r=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=this.getRule(n,i);return s?this.shouldUseIntlApi()?s.resolvedOptions().pluralCategories.sort(function(a,o){return Fs[a]-Fs[o]}).map(function(a){return"".concat(r.options.prepend).concat(a)}):s.numbers.map(function(a){return r.getSuffix(n,a,i)}):[]}},{key:"getSuffix",value:function(n,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=this.getRule(n,i);return s?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(s.select(r)):this.getSuffixRetroCompatible(s,r):(this.logger.warn("no plural rule found for: ".concat(n)),"")}},{key:"getSuffixRetroCompatible",value:function(n,r){var i=this,s=n.noAbs?n.plurals(r):n.plurals(Math.abs(r)),a=n.numbers[s];this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1&&(a===2?a="plural":a===1&&(a=""));var o=function(){return i.options.prepend&&a.toString()?i.options.prepend+a.toString():a.toString()};return this.options.compatibilityJSON==="v1"?a===1?"":typeof a=="number"?"_plural_".concat(a.toString()):o():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&n.numbers.length===2&&n.numbers[0]===1?o():this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString()}},{key:"shouldUseIntlApi",value:function(){return!dl.includes(this.options.compatibilityJSON)}}]),t}();function xs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ae(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xs(Object(n),!0).forEach(function(r){_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xs(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var ml=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};xe(this,t),this.logger=He.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||function(n){return n},this.init(e)}return Ee(t,[{key:"init",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};n.interpolation||(n.interpolation={escapeValue:!0});var r=n.interpolation;this.escape=r.escape!==void 0?r.escape:nl,this.escapeValue=r.escapeValue!==void 0?r.escapeValue:!0,this.useRawValueToEscape=r.useRawValueToEscape!==void 0?r.useRawValueToEscape:!1,this.prefix=r.prefix?_t(r.prefix):r.prefixEscaped||"{{",this.suffix=r.suffix?_t(r.suffix):r.suffixEscaped||"}}",this.formatSeparator=r.formatSeparator?r.formatSeparator:r.formatSeparator||",",this.unescapePrefix=r.unescapeSuffix?"":r.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":r.unescapeSuffix||"",this.nestingPrefix=r.nestingPrefix?_t(r.nestingPrefix):r.nestingPrefixEscaped||_t("$t("),this.nestingSuffix=r.nestingSuffix?_t(r.nestingSuffix):r.nestingSuffixEscaped||_t(")"),this.nestingOptionsSeparator=r.nestingOptionsSeparator?r.nestingOptionsSeparator:r.nestingOptionsSeparator||",",this.maxReplaces=r.maxReplaces?r.maxReplaces:1e3,this.alwaysFormat=r.alwaysFormat!==void 0?r.alwaysFormat:!1,this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var n="".concat(this.prefix,"(.+?)").concat(this.suffix);this.regexp=new RegExp(n,"g");var r="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(r,"g");var i="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(i,"g")}},{key:"interpolate",value:function(n,r,i,s){var a=this,o,u,l,d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function h(C){return C.replace(/\$/g,"$$$$")}var D=function(x){if(x.indexOf(a.formatSeparator)<0){var E=gs(r,d,x);return a.alwaysFormat?a.format(E,void 0,i,Ae(Ae(Ae({},s),r),{},{interpolationkey:x})):E}var R=x.split(a.formatSeparator),v=R.shift().trim(),A=R.join(a.formatSeparator).trim();return a.format(gs(r,d,v),A,i,Ae(Ae(Ae({},s),r),{},{interpolationkey:v}))};this.resetRegExp();var g=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,y=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,T=[{regex:this.regexpUnescape,safeValue:function(x){return h(x)}},{regex:this.regexp,safeValue:function(x){return a.escapeValue?h(a.escape(x)):h(x)}}];return T.forEach(function(C){for(l=0;o=C.regex.exec(n);){var x=o[1].trim();if(u=D(x),u===void 0)if(typeof g=="function"){var E=g(n,o,s);u=typeof E=="string"?E:""}else if(s&&Object.prototype.hasOwnProperty.call(s,x))u="";else if(y){u=o[0];continue}else a.logger.warn("missed to pass in variable ".concat(x," for interpolating ").concat(n)),u="";else typeof u!="string"&&!a.useRawValueToEscape&&(u=ps(u));var R=C.safeValue(u);if(n=n.replace(o[0],R),y?(C.regex.lastIndex+=u.length,C.regex.lastIndex-=o[0].length):C.regex.lastIndex=0,l++,l>=a.maxReplaces)break}}),n}},{key:"nest",value:function(n,r){var i=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a,o,u;function l(g,y){var T=this.nestingOptionsSeparator;if(g.indexOf(T)<0)return g;var C=g.split(new RegExp("".concat(T,"[ ]*{"))),x="{".concat(C[1]);g=C[0],x=this.interpolate(x,u);var E=x.match(/'/g),R=x.match(/"/g);(E&&E.length%2===0&&!R||R.length%2!==0)&&(x=x.replace(/'/g,'"'));try{u=JSON.parse(x),y&&(u=Ae(Ae({},y),u))}catch(v){return this.logger.warn("failed parsing options string in nesting for key ".concat(g),v),"".concat(g).concat(T).concat(x)}return delete u.defaultValue,g}for(;a=this.nestingRegexp.exec(n);){var d=[];u=Ae({},s),u=u.replace&&typeof u.replace!="string"?u.replace:u,u.applyPostProcessor=!1,delete u.defaultValue;var h=!1;if(a[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(a[1])){var D=a[1].split(this.formatSeparator).map(function(g){return g.trim()});a[1]=D.shift(),d=D,h=!0}if(o=r(l.call(this,a[1].trim(),u),u),o&&a[0]===n&&typeof o!="string")return o;typeof o!="string"&&(o=ps(o)),o||(this.logger.warn("missed to resolve ".concat(a[1]," for nesting ").concat(n)),o=""),h&&(o=d.reduce(function(g,y){return i.format(g,y,s.lng,Ae(Ae({},s),{},{interpolationkey:a[1].trim()}))},o.trim())),n=n.replace(a[0],o),this.regexp.lastIndex=0}return n}}]),t}();function Es(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Es(Object(n),!0).forEach(function(r){_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Es(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gl(t){var e=t.toLowerCase().trim(),n={};if(t.indexOf("(")>-1){var r=t.split("(");e=r[0].toLowerCase().trim();var i=r[1].substring(0,r[1].length-1);if(e==="currency"&&i.indexOf(":")<0)n.currency||(n.currency=i.trim());else if(e==="relativetime"&&i.indexOf(":")<0)n.range||(n.range=i.trim());else{var s=i.split(";");s.forEach(function(a){if(a){var o=a.split(":"),u=Wr(o),l=u[0],d=u.slice(1),h=d.join(":").trim().replace(/^'+|'+$/g,"");n[l.trim()]||(n[l.trim()]=h),h==="false"&&(n[l.trim()]=!1),h==="true"&&(n[l.trim()]=!0),isNaN(h)||(n[l.trim()]=parseInt(h,10))}})}}return{formatName:e,formatOptions:n}}function Gt(t){var e={};return function(r,i,s){var a=i+JSON.stringify(s),o=e[a];return o||(o=t(i,s),e[a]=o),o(r)}}var Dl=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};xe(this,t),this.logger=He.create("formatter"),this.options=e,this.formats={number:Gt(function(n,r){var i=new Intl.NumberFormat(n,Qe({},r));return function(s){return i.format(s)}}),currency:Gt(function(n,r){var i=new Intl.NumberFormat(n,Qe(Qe({},r),{},{style:"currency"}));return function(s){return i.format(s)}}),datetime:Gt(function(n,r){var i=new Intl.DateTimeFormat(n,Qe({},r));return function(s){return i.format(s)}}),relativetime:Gt(function(n,r){var i=new Intl.RelativeTimeFormat(n,Qe({},r));return function(s){return i.format(s,r.range||"day")}}),list:Gt(function(n,r){var i=new Intl.ListFormat(n,Qe({},r));return function(s){return i.format(s)}})},this.init(e)}return Ee(t,[{key:"init",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}},i=r.interpolation;this.formatSeparator=i.formatSeparator?i.formatSeparator:i.formatSeparator||","}},{key:"add",value:function(n,r){this.formats[n.toLowerCase().trim()]=r}},{key:"addCached",value:function(n,r){this.formats[n.toLowerCase().trim()]=Gt(r)}},{key:"format",value:function(n,r,i){var s=this,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},o=r.split(this.formatSeparator),u=o.reduce(function(l,d){var h=gl(d),D=h.formatName,g=h.formatOptions;if(s.formats[D]){var y=l;try{var T=a&&a.formatParams&&a.formatParams[a.interpolationkey]||{},C=T.locale||T.lng||a.locale||a.lng||i;y=s.formats[D](l,C,Qe(Qe(Qe({},g),a),T))}catch(x){s.logger.warn(x)}return y}else s.logger.warn("there was no format function for ".concat(D));return l},n);return u}}]),t}();function Cs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ks(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Cs(Object(n),!0).forEach(function(r){_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cs(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function bl(t){var e=yl();return function(){var r=Ce(t),i;if(e){var s=Ce(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return wt(this,i)}}function yl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function vl(t,e){t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)}var wl=function(t){Vt(n,t);var e=bl(n);function n(r,i,s){var a,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return xe(this,n),a=e.call(this),Qn&&at.call(Ne(a)),a.backend=r,a.store=i,a.services=s,a.languageUtils=s.languageUtils,a.options=o,a.logger=He.create("backendConnector"),a.waitingReads=[],a.maxParallelReads=o.maxParallelReads||10,a.readingCalls=0,a.maxRetries=o.maxRetries>=0?o.maxRetries:5,a.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,a.state={},a.queue=[],a.backend&&a.backend.init&&a.backend.init(s,o.backend,o),a}return Ee(n,[{key:"queueLoad",value:function(i,s,a,o){var u=this,l={},d={},h={},D={};return i.forEach(function(g){var y=!0;s.forEach(function(T){var C="".concat(g,"|").concat(T);!a.reload&&u.store.hasResourceBundle(g,T)?u.state[C]=2:u.state[C]<0||(u.state[C]===1?d[C]===void 0&&(d[C]=!0):(u.state[C]=1,y=!1,d[C]===void 0&&(d[C]=!0),l[C]===void 0&&(l[C]=!0),D[T]===void 0&&(D[T]=!0)))}),y||(h[g]=!0)}),(Object.keys(l).length||Object.keys(d).length)&&this.queue.push({pending:d,pendingCount:Object.keys(d).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(l),pending:Object.keys(d),toLoadLanguages:Object.keys(h),toLoadNamespaces:Object.keys(D)}}},{key:"loaded",value:function(i,s,a){var o=i.split("|"),u=o[0],l=o[1];s&&this.emit("failedLoading",u,l,s),a&&this.store.addResourceBundle(u,l,a),this.state[i]=s?-1:2;var d={};this.queue.forEach(function(h){el(h.loaded,[u],l),vl(h,i),s&&h.errors.push(s),h.pendingCount===0&&!h.done&&(Object.keys(h.loaded).forEach(function(D){d[D]||(d[D]={});var g=h.loaded[D];g.length&&g.forEach(function(y){d[D][y]===void 0&&(d[D][y]=!0)})}),h.done=!0,h.errors.length?h.callback(h.errors):h.callback())}),this.emit("loaded",d),this.queue=this.queue.filter(function(h){return!h.done})}},{key:"read",value:function(i,s,a){var o=this,u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,l=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,d=arguments.length>5?arguments[5]:void 0;if(!i.length)return d(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:i,ns:s,fcName:a,tried:u,wait:l,callback:d});return}this.readingCalls++;var h=function(T,C){if(o.readingCalls--,o.waitingReads.length>0){var x=o.waitingReads.shift();o.read(x.lng,x.ns,x.fcName,x.tried,x.wait,x.callback)}if(T&&C&&u<o.maxRetries){setTimeout(function(){o.read.call(o,i,s,a,u+1,l*2,d)},l);return}d(T,C)},D=this.backend[a].bind(this.backend);if(D.length===2){try{var g=D(i,s);g&&typeof g.then=="function"?g.then(function(y){return h(null,y)}).catch(h):h(null,g)}catch(y){h(y)}return}return D(i,s,h)}},{key:"prepareLoading",value:function(i,s){var a=this,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),u&&u();typeof i=="string"&&(i=this.languageUtils.toResolveHierarchy(i)),typeof s=="string"&&(s=[s]);var l=this.queueLoad(i,s,o,u);if(!l.toLoad.length)return l.pending.length||u(),null;l.toLoad.forEach(function(d){a.loadOne(d)})}},{key:"load",value:function(i,s,a){this.prepareLoading(i,s,{},a)}},{key:"reload",value:function(i,s,a){this.prepareLoading(i,s,{reload:!0},a)}},{key:"loadOne",value:function(i){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",o=i.split("|"),u=o[0],l=o[1];this.read(u,l,"read",void 0,void 0,function(d,h){d&&s.logger.warn("".concat(a,"loading namespace ").concat(l," for language ").concat(u," failed"),d),!d&&h&&s.logger.log("".concat(a,"loaded namespace ").concat(l," for language ").concat(u),h),s.loaded(i,d,h)})}},{key:"saveMissing",value:function(i,s,a,o,u){var l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},d=arguments.length>6&&arguments[6]!==void 0?arguments[6]:function(){};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(s)){this.logger.warn('did not save key "'.concat(a,'" as the namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(a==null||a==="")){if(this.backend&&this.backend.create){var h=ks(ks({},l),{},{isUpdate:u}),D=this.backend.create.bind(this.backend);if(D.length<6)try{var g;D.length===5?g=D(i,s,a,o,h):g=D(i,s,a,o),g&&typeof g.then=="function"?g.then(function(y){return d(null,y)}).catch(d):d(null,g)}catch(y){d(y)}else D(i,s,a,o,d,h)}!i||!i[0]||this.store.addResource(i[0],s,a,o)}}}]),n}(at);function Ss(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(e){var n={};if(le(e[1])==="object"&&(n=e[1]),typeof e[1]=="string"&&(n.defaultValue=e[1]),typeof e[2]=="string"&&(n.tDescription=e[2]),le(e[2])==="object"||le(e[3])==="object"){var r=e[3]||e[2];Object.keys(r).forEach(function(i){n[i]=r[i]})}return n},interpolation:{escapeValue:!0,format:function(e,n,r,i){return e},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function Os(t){return typeof t.ns=="string"&&(t.ns=[t.ns]),typeof t.fallbackLng=="string"&&(t.fallbackLng=[t.fallbackLng]),typeof t.fallbackNS=="string"&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t}function Ts(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ge(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ts(Object(n),!0).forEach(function(r){_e(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ts(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fl(t){var e=xl();return function(){var r=Ce(t),i;if(e){var s=Ce(this).constructor;i=Reflect.construct(r,arguments,s)}else i=r.apply(this,arguments);return wt(this,i)}}function xl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Kn(){}function El(t){var e=Object.getOwnPropertyNames(Object.getPrototypeOf(t));e.forEach(function(n){typeof t[n]=="function"&&(t[n]=t[n].bind(t))})}var Jn=function(t){Vt(n,t);var e=Fl(n);function n(){var r,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;if(xe(this,n),r=e.call(this),Qn&&at.call(Ne(r)),r.options=Os(i),r.services={},r.logger=He,r.modules={external:[]},El(Ne(r)),s&&!r.isInitialized&&!i.isClone){if(!r.options.initImmediate)return r.init(i,s),wt(r,Ne(r));setTimeout(function(){r.init(i,s)},0)}return r}return Ee(n,[{key:"init",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;typeof s=="function"&&(a=s,s={}),!s.defaultNS&&s.defaultNS!==!1&&s.ns&&(typeof s.ns=="string"?s.defaultNS=s.ns:s.ns.indexOf("translation")<0&&(s.defaultNS=s.ns[0]));var o=Ss();this.options=Ge(Ge(Ge({},o),this.options),Os(s)),this.options.compatibilityAPI!=="v1"&&(this.options.interpolation=Ge(Ge({},o.interpolation),this.options.interpolation)),s.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=s.keySeparator),s.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=s.nsSeparator);function u(x){return x?typeof x=="function"?new x:x:null}if(!this.options.isClone){this.modules.logger?He.init(u(this.modules.logger),this.options):He.init(null,this.options);var l;this.modules.formatter?l=this.modules.formatter:typeof Intl<"u"&&(l=Dl);var d=new ws(this.options);this.store=new ol(this.options.resources,this.options);var h=this.services;h.logger=He,h.resourceStore=this.store,h.languageUtils=d,h.pluralResolver=new pl(d,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),l&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(h.formatter=u(l),h.formatter.init(h,this.options),this.options.interpolation.format=h.formatter.format.bind(h.formatter)),h.interpolator=new ml(this.options),h.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},h.backendConnector=new wl(u(this.modules.backend),h.resourceStore,h,this.options),h.backendConnector.on("*",function(x){for(var E=arguments.length,R=new Array(E>1?E-1:0),v=1;v<E;v++)R[v-1]=arguments[v];i.emit.apply(i,[x].concat(R))}),this.modules.languageDetector&&(h.languageDetector=u(this.modules.languageDetector),h.languageDetector.init&&h.languageDetector.init(h,this.options.detection,this.options)),this.modules.i18nFormat&&(h.i18nFormat=u(this.modules.i18nFormat),h.i18nFormat.init&&h.i18nFormat.init(this)),this.translator=new vs(this.services,this.options),this.translator.on("*",function(x){for(var E=arguments.length,R=new Array(E>1?E-1:0),v=1;v<E;v++)R[v-1]=arguments[v];i.emit.apply(i,[x].concat(R))}),this.modules.external.forEach(function(x){x.init&&x.init(i)})}if(this.format=this.options.interpolation.format,a||(a=Kn),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){var D=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);D.length>0&&D[0]!=="dev"&&(this.options.lng=D[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined");var g=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"];g.forEach(function(x){i[x]=function(){var E;return(E=i.store)[x].apply(E,arguments)}});var y=["addResource","addResources","addResourceBundle","removeResourceBundle"];y.forEach(function(x){i[x]=function(){var E;return(E=i.store)[x].apply(E,arguments),i}});var T=gn(),C=function(){var E=function(v,A){i.isInitialized&&!i.initializedStoreOnce&&i.logger.warn("init: i18next is already initialized. You should call init just once!"),i.isInitialized=!0,i.options.isClone||i.logger.log("initialized",i.options),i.emit("initialized",i.options),T.resolve(A),a(v,A)};if(i.languages&&i.options.compatibilityAPI!=="v1"&&!i.isInitialized)return E(null,i.t.bind(i));i.changeLanguage(i.options.lng,E)};return this.options.resources||!this.options.initImmediate?C():setTimeout(C,0),T}},{key:"loadResources",value:function(i){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Kn,o=a,u=typeof i=="string"?i:this.language;if(typeof i=="function"&&(o=i),!this.options.resources||this.options.partialBundledLanguages){if(u&&u.toLowerCase()==="cimode")return o();var l=[],d=function(g){if(g){var y=s.services.languageUtils.toResolveHierarchy(g);y.forEach(function(T){l.indexOf(T)<0&&l.push(T)})}};if(u)d(u);else{var h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.forEach(function(D){return d(D)})}this.options.preload&&this.options.preload.forEach(function(D){return d(D)}),this.services.backendConnector.load(l,this.options.ns,function(D){!D&&!s.resolvedLanguage&&s.language&&s.setResolvedLanguage(s.language),o(D)})}else o(null)}},{key:"reloadResources",value:function(i,s,a){var o=gn();return i||(i=this.languages),s||(s=this.options.ns),a||(a=Kn),this.services.backendConnector.reload(i,s,function(u){o.resolve(),a(u)}),o}},{key:"use",value:function(i){if(!i)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!i.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return i.type==="backend"&&(this.modules.backend=i),(i.type==="logger"||i.log&&i.warn&&i.error)&&(this.modules.logger=i),i.type==="languageDetector"&&(this.modules.languageDetector=i),i.type==="i18nFormat"&&(this.modules.i18nFormat=i),i.type==="postProcessor"&&As.addPostProcessor(i),i.type==="formatter"&&(this.modules.formatter=i),i.type==="3rdParty"&&this.modules.external.push(i),this}},{key:"setResolvedLanguage",value:function(i){if(!(!i||!this.languages)&&!(["cimode","dev"].indexOf(i)>-1))for(var s=0;s<this.languages.length;s++){var a=this.languages[s];if(!(["cimode","dev"].indexOf(a)>-1)&&this.store.hasLanguageSomeTranslations(a)){this.resolvedLanguage=a;break}}}},{key:"changeLanguage",value:function(i,s){var a=this;this.isLanguageChangingTo=i;var o=gn();this.emit("languageChanging",i);var u=function(D){a.language=D,a.languages=a.services.languageUtils.toResolveHierarchy(D),a.resolvedLanguage=void 0,a.setResolvedLanguage(D)},l=function(D,g){g?(u(g),a.translator.changeLanguage(g),a.isLanguageChangingTo=void 0,a.emit("languageChanged",g),a.logger.log("languageChanged",g)):a.isLanguageChangingTo=void 0,o.resolve(function(){return a.t.apply(a,arguments)}),s&&s(D,function(){return a.t.apply(a,arguments)})},d=function(D){!i&&!D&&a.services.languageDetector&&(D=[]);var g=typeof D=="string"?D:a.services.languageUtils.getBestMatchFromCodes(D);g&&(a.language||u(g),a.translator.language||a.translator.changeLanguage(g),a.services.languageDetector&&a.services.languageDetector.cacheUserLanguage&&a.services.languageDetector.cacheUserLanguage(g)),a.loadResources(g,function(y){l(y,g)})};return!i&&this.services.languageDetector&&!this.services.languageDetector.async?d(this.services.languageDetector.detect()):!i&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(d):this.services.languageDetector.detect(d):d(i),o}},{key:"getFixedT",value:function(i,s,a){var o=this,u=function l(d,h){var D;if(le(h)!=="object"){for(var g=arguments.length,y=new Array(g>2?g-2:0),T=2;T<g;T++)y[T-2]=arguments[T];D=o.options.overloadTranslationOptionHandler([d,h].concat(y))}else D=Ge({},h);D.lng=D.lng||l.lng,D.lngs=D.lngs||l.lngs,D.ns=D.ns||l.ns,D.keyPrefix=D.keyPrefix||a||l.keyPrefix;var C=o.options.keySeparator||".",x;return D.keyPrefix&&Array.isArray(d)?x=d.map(function(E){return"".concat(D.keyPrefix).concat(C).concat(E)}):x=D.keyPrefix?"".concat(D.keyPrefix).concat(C).concat(d):d,o.t(x,D)};return typeof i=="string"?u.lng=i:u.lngs=i,u.ns=s,u.keyPrefix=a,u}},{key:"t",value:function(){var i;return this.translator&&(i=this.translator).translate.apply(i,arguments)}},{key:"exists",value:function(){var i;return this.translator&&(i=this.translator).exists.apply(i,arguments)}},{key:"setDefaultNamespace",value:function(i){this.options.defaultNS=i}},{key:"hasLoadedNamespace",value:function(i){var s=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var o=this.resolvedLanguage||this.languages[0],u=this.options?this.options.fallbackLng:!1,l=this.languages[this.languages.length-1];if(o.toLowerCase()==="cimode")return!0;var d=function(g,y){var T=s.services.backendConnector.state["".concat(g,"|").concat(y)];return T===-1||T===2};if(a.precheck){var h=a.precheck(this,d);if(h!==void 0)return h}return!!(this.hasResourceBundle(o,i)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||d(o,i)&&(!u||d(l,i)))}},{key:"loadNamespaces",value:function(i,s){var a=this,o=gn();return this.options.ns?(typeof i=="string"&&(i=[i]),i.forEach(function(u){a.options.ns.indexOf(u)<0&&a.options.ns.push(u)}),this.loadResources(function(u){o.resolve(),s&&s(u)}),o):(s&&s(),Promise.resolve())}},{key:"loadLanguages",value:function(i,s){var a=gn();typeof i=="string"&&(i=[i]);var o=this.options.preload||[],u=i.filter(function(l){return o.indexOf(l)<0});return u.length?(this.options.preload=o.concat(u),this.loadResources(function(l){a.resolve(),s&&s(l)}),a):(s&&s(),Promise.resolve())}},{key:"dir",value:function(i){if(i||(i=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!i)return"rtl";var s=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],a=this.services&&this.services.languageUtils||new ws(Ss());return s.indexOf(a.getLanguagePartFromCode(i))>-1||i.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}},{key:"cloneInstance",value:function(){var i=this,s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Kn,o=Ge(Ge(Ge({},this.options),s),{isClone:!0}),u=new n(o);(s.debug!==void 0||s.prefix!==void 0)&&(u.logger=u.logger.clone(s));var l=["store","services","language"];return l.forEach(function(d){u[d]=i[d]}),u.services=Ge({},this.services),u.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u.translator=new vs(u.services,u.options),u.translator.on("*",function(d){for(var h=arguments.length,D=new Array(h>1?h-1:0),g=1;g<h;g++)D[g-1]=arguments[g];u.emit.apply(u,[d].concat(D))}),u.init(o,a),u.translator.options=u.options,u.translator.backendConnector.services.utils={hasLoadedNamespace:u.hasLoadedNamespace.bind(u)},u}},{key:"toJSON",value:function(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}]),n}(at);_e(Jn,"createInstance",function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return new Jn(t,e)});var c=Jn.createInstance();c.createInstance=Jn.createInstance;var Xh=c.createInstance,ep=c.dir,tp=c.init,np=c.loadResources,rp=c.reloadResources,ip=c.use,sp=c.changeLanguage,ap=c.getFixedT,op=c.t,up=c.exists,lp=c.setDefaultNamespace,cp=c.hasLoadedNamespace,fp=c.loadNamespaces,dp=c.loadLanguages;var Xn=class extends ye.Modal{constructor(n,r,i,s){super(n);this.allRegex=i,this.settings=r,this.onSubmit=s}classValue(n){this.settings.upload.replacePath=n.filter(r=>r.type==="path"),this.settings.upload.replaceTitle=n.filter(r=>r.type==="title")}forbiddenValue(n,r){let i=r==="path"?c.t("common.path.folder"):c.t("common.path.file");i=i.toLowerCase();let s=!1;return n=="/"?(new ye.Notice(c.t("settings.regexReplacing.forbiddenValue",{what:i,forbiddenChar:n})),n="",s=!0):n.match(/[><:"|?*]|(\\\/)|(^\w+\/\w+)|(\\)/)&&r==="title"?(new ye.Notice(c.t("settings.regexReplacing.forbiddenValue",{what:i,forbiddenChar:n.match(/[><:"|?*]|(\\\/)|(^\w+\/\w+)|(\\)/)[0]})),n="",s=!0):r==="path"&&(n.match(/[\\><:"|?*]/)?(new ye.Notice(c.t("settings.regexReplacing.forbiddenValue",{what:i,forbiddenChar:n.match(/[\\><:"|?*]/)[0]})),n="",s=!0):n.match(/(^\w+\/\w+)|(\\\/)/)&&new ye.Notice(c.t("settings.regexReplacing.warningPath"))),[n,s]}onOpen(){let{contentEl:n}=this;n.empty(),this.settings.upload.behavior==="fixed"?n.createEl("h2",{text:c.t("settings.regexReplacing.modal.title.only")}):n.createEl("h2",{text:c.t("settings.regexReplacing.modal.title.all")}),this.settings.upload.replacePath?this.settings.upload.replaceTitle||(this.settings.upload.replaceTitle=[]):this.settings.upload.replacePath=[],this.settings.upload.replacePath.forEach(r=>{r.type||(r.type="path")}),this.settings.upload.replaceTitle.forEach(r=>{r.type||(r.type="title")});for(let r of this.allRegex){let i=new ye.Setting(n).setClass("github-publisher-censor-entry").addText(s=>{s.inputEl.style.width="100%",s.setPlaceholder(c.t("regex.entry")).setValue(r.regex).onChange(a=>{r.regex=a})}).addText(s=>{s.inputEl.style.width="100%",s.setPlaceholder(c.t("regex.replace")).setValue(r.replacement).onChange(a=>{r.replacement=a})});this.settings.upload.behavior!=="fixed"?i.addDropdown(s=>{s.addOption("path",c.t("common.path.folder")).addOption("title",c.t("common.path.file")).setValue(r.type).onChange(a=>{r.type=a})}):i.addButton(s=>{s.buttonEl.classList.add("github-publisher-disabled-button"),s.setButtonText(c.t("common.path.file"))}),i.addExtraButton(s=>{s.setIcon("trash").onClick(()=>{this.allRegex.splice(this.allRegex.indexOf(r),1),this.onOpen()})})}new ye.Setting(n).setClass("github-publisher-modals").addButton(r=>{r.setIcon("plus").onClick(()=>{this.allRegex.push({regex:"",replacement:"",type:"title"}),this.onOpen()})}).addButton(r=>{r.setButtonText(c.t("common.save")).onClick(()=>{let i=[];this.allRegex.forEach(s=>{let a=this.forbiddenValue(s.regex,s.type),o=this.forbiddenValue(s.replacement,s.type);i.push(a[1]),i.push(o[1]),(a[1]||o[1])&&(s.regex=a[0],s.replacement=o[0])}),i.includes(!0)||(this.onSubmit(this.allRegex),this.close())})})}onClose(){let{contentEl:n}=this;n.empty()}},er=class extends ye.Modal{constructor(n,r,i){super(n);this.settings=r,this.onSubmit=i}onOpen(){let{contentEl:n}=this;n.empty(),n.createEl("p",{text:c.t("settings.regexReplacing.modal.title.text")}).createEl("p",{text:c.t("settings.regexReplacing.modal.desc")}).createEl("p",{text:c.t("settings.regexReplacing.empty")});for(let r of this.settings.conversion.censorText){let i=r.after?"arrow-down":"arrow-up",s=r.after?c.t("common.after").toLowerCase():c.t("common.before").toLowerCase(),a=c.t("settings.regexReplacing.momentReplaceRegex",{moment:s});new ye.Setting(n).setClass("github-publisher-censor-entry").addText(o=>{o.inputEl.style.width="100%",o.setPlaceholder(c.t("regex.entry")).setValue(r.entry).onChange(u=>w(this,null,function*(){r.entry=u}))}).addText(o=>{o.inputEl.style.width="100%",o.setPlaceholder(c.t("regex.replace")).setValue(r.replace).onChange(u=>w(this,null,function*(){r.replace=u}))}).addExtraButton(o=>{o.setIcon("trash").setTooltip(c.t("common.delete",{things:"Regex"})).onClick(()=>w(this,null,function*(){this.settings.conversion.censorText.splice(this.settings.conversion.censorText.indexOf(r),1),this.onOpen()}))}).addExtraButton(o=>{o.setTooltip(a).setIcon(i).onClick(()=>w(this,null,function*(){r.after=!r.after,this.onOpen()}))})}new ye.Setting(n).addButton(r=>{r.setIcon("plus").setTooltip(c.t("common.add",{things:"Regex"})).onClick(()=>w(this,null,function*(){let i={entry:"",replace:"",after:!1};this.settings.conversion.censorText.push(i),this.onOpen()}))}).addButton(r=>{r.setButtonText(c.t("common.save")).onClick(()=>{this.onSubmit(this.settings),this.close()})})}onClose(){let{contentEl:n}=this;n.empty()}};function Ft(t){for(let[e,n]of Object.entries(t))e!="components"&&n.show()}function Ut(t){for(let[e,n]of Object.entries(t))e!="components"&&n.hide()}function Rs(t,e,n,r){let i=t.upload;i.behavior==="yaml"?(Ft(e),Ft(n),Ft(r)):(Ut(e),Ut(n),i.behavior==="obsidian"?Ft(r):Ut(r))}function tr(t,e,n){return w(this,null,function*(){let r=n.settings.upload;t.length===0&&r.defaultName?(r.autoclean.enable=!1,yield n.saveSettings(),e.setDisabled(!0),e.components[0].toggleEl.classList.remove("is-enabled")):t.length===0&&r.behavior!=="yaml"?(r.autoclean.enable=!1,e.setDisabled(!0),e.components[0].toggleEl.classList.remove("is-enabled")):(e.setDisabled(!1),r.autoclean.enable&&e.components[0].toggleEl.classList.add("is-enabled"))})}function Zr(t,e,n,r,i){return w(this,null,function*(){let s=i.settings.upload;r==="yaml"?(Ft(t),Ft(e),tr(s.rootFolder,n,i).then()):(s.defaultName.length>0&&(n.setDisabled(!1),s.autoclean.enable&&n.components[0].toggleEl.classList.add("is-enabled")),Ut(t),Ut(e))})}function Ls(t,e,n){let r=n.settings.upload;t?(e.setDisabled(!0),e.components[0].toggleEl.classList.remove("is-enabled"),r.autoclean.enable=!1,n.saveSettings().then()):(e.setDisabled(!1),r.autoclean.enable&&e.components[0].toggleEl.classList.add("is-enabled"))}function Bs(t,e){t?Ft(e):Ut(e)}function Ms(t){let e="";return t.upload.behavior==="yaml"&&(e=`${t.upload.yamlFolderKey}: ${t.upload.defaultName}
`),`${t.plugin.shareKey}: true
`+e+`links:
  mdlinks: ${t.conversion.links.wiki}
  convert: true
  internals: ${t.conversion.links.internal}
  nonShared: ${t.conversion.links.unshared}
embed:
  send: ${t.embed.notes}
  remove: false
attachment:
  send: ${t.embed.attachments}
  folder: ${t.embed.folder}
dataview: ${t.conversion.dataview}
hardBreak: ${t.conversion.hardbreak}
repo:
  owner: ${t.github.user}
  repo: ${t.github.repo}
  branch: ${t.github.branch}
  autoclean: ${t.upload.autoclean.enable}
baseLink: ${t.plugin.copyLink.links}`}function Is(t){let e=document.createDocumentFragment();return e.createEl("ul",null,n=>{n.createEl("li",null,r=>{r.createEl("code",{text:`${t.plugin.shareKey}:`,cls:"code-title"}),r.createEl("span",{text:` ${c.t("settings.help.frontmatter.share")}`})}),n.createEl("li",null,r=>{r.createEl("code",{text:"path:",cls:"code-title"}),r.createEl("span",{text:` ${c.t("settings.help.frontmatter.path")}`})}),n.createEl("li",null,r=>{r.createEl("code",{text:"links:",cls:"code-title"})}),n.createEl("ul",null,r=>{r.createEl("li",null,i=>{i.createEl("code",{text:"mdlinks"}),i.createEl("span",{text:`: ${c.t("settings.help.frontmatter.mdlinks")}`})}),r.createEl("li",null,i=>{i.createEl("code",{text:"convert"}),i.createEl("span",null,s=>{s.createEl("span",{text:`: ${c.t("settings.help.frontmatter.convert.enableOrDisable")} `}),s.createEl("code",{text:" [[link]] "}),s.createEl("span",{text:c.t("common.or")}),s.createEl("code",{text:" [](link) "}),s.createEl("span",{text:c.t("settings.help.frontmatter.convert.syntax")})})}),r.createEl("li",null,i=>{i.createEl("code",{text:"internals"}),i.createEl("span",{text:`: ${c.t("settings.help.frontmatter.internals")}`})}),r.createEl("li",null,i=>{i.createEl("code",{text:"nonShared"}),i.createEl("span",{text:`: ${c.t("settings.help.frontmatter.nonShared")}`})})}),n.createEl("li",{text:"embed:",cls:"code code-title"}),n.createEl("ul",null,r=>{r.createEl("li",null,i=>{i.createEl("code",{text:"send"}),i.createEl("span",{text:`: ${c.t("settings.help.frontmatter.embed.send")}`})}),r.createEl("li",null,i=>{i.createEl("code",{text:"remove"}),i.createEl("span",{text:`: ${c.t("settings.help.frontmatter.embed.remove")}`})})}),n.createEl("li",{text:"attachment:",cls:"code code-title"}),n.createEl("ul",null,r=>{r.createEl("li",null,i=>{i.createEl("code",{text:"send"}),i.createEl("span",{text:`: ${c.t("settings.help.frontmatter.attachment.send")}`})}),r.createEl("li",null,i=>{i.createEl("code",{text:"folder"}),i.createEl("span",{text:`: ${c.t("settings.help.frontmatter.attachment.folder")}`})})}),n.createEl("li",null,r=>{r.createEl("code",{text:"dataview",cls:"code-title"}),r.createEl("span",{text:`: ${c.t("settings.help.frontmatter.dataview")}`})}),n.createEl("li",null,r=>{r.createEl("code",{text:"hardbreak",cls:"code-title"}),r.createEl("span",{text:`: ${c.t("settings.help.frontmatter.hardBreak")}`})}),n.createEl("li",null,r=>{r.createEl("code",{text:"repo",cls:"code-title"}),r.createEl("span",{text:`: ${c.t("settings.help.frontmatter.repo.desc")}`}),r.createEl("ul",null,i=>{i.createEl("li",null,s=>{s.createEl("code",{text:"owner"}),s.createEl("span",{text:`: ${c.t("settings.help.frontmatter.repo.owner")}`})}),i.createEl("li",null,s=>{s.createEl("code",{text:"repo"}),s.createEl("span",{text:`: ${c.t("settings.help.frontmatter.repo.repo")}`})}),i.createEl("li",null,s=>{s.createEl("code",{text:"branch"}),s.createEl("span",{text:`: ${c.t("settings.help.frontmatter.repo.branch")}`})}),i.createEl("li",null,s=>{s.createEl("code",{text:"autoclean"}),s.createEl("span",{text:`: ${c.t("settings.help.frontmatter.autoclean")}`})})})}),n.createEl("li",null,r=>{r.createEl("code",{text:`${t.upload.frontmatterTitle.key}`,cls:"code-title"}),r.createEl("span",{text:`: ${c.t("settings.help.frontmatter.titleKey")}`})}),n.createEl("li",null,r=>{r.createEl("code",{text:"baseLink",cls:"code-title"}),r.createEl("span",{text:`: ${c.t("settings.help.frontmatter.baselink")}`})})}),e}function js(){let t=document.createDocumentFragment();return t.createEl("ul",null,e=>{e.createEl("li",null,n=>{n.createEl("a",{text:c.t("settings.help.usefulLinks.documentation"),href:c.t("settings.help.usefulLinks.links")})}),e.createEl("li",null,n=>{n.createEl("a",{text:c.t("settings.help.usefulLinks.repository"),href:"https://github.com/ObsidianPublisher/obsidian-github-publisher"})}),e.createEl("li",null,n=>{n.createEl("a",{text:c.t("settings.help.usefulLinks.issue"),href:"https://github.com/ObsidianPublisher/obsidian-github-publisher/issues"})}),e.createEl("li",null,n=>{n.createEl("a",{text:c.t("settings.help.usefulLinks.discussion"),href:"https://github.com/ObsidianPublisher/obsidian-github-publisher/discussions"})})}),t}function $s(t){let e=document.createDocumentFragment();return e.createEl("p",null,n=>{n.createEl("span",{text:c.t("settings.help.multiRepoHelp.desc")}),n.createEl("code",{text:"multipleRepo"}),n.createEl("span",{text:` ${c.t("settings.help.multiRepoHelp.desc2")}:`}),n.createEl("ul",null,r=>{r.createEl("li",{text:"owner"}).addClass("code"),r.createEl("li",{text:"repo"}).addClass("code"),r.createEl("li",{text:"branch"}).addClass("code"),r.createEl("li",{text:"autoclean"}).addClass("code")}),n.createEl("span",{text:c.t("settings.help.multiRepoHelp.exampleDesc")})}),e.createEl("pre",{cls:"language-yaml"}).createEl("code",{text:`multipleRepo:
  - owner: ${t.github.user}
    repo: ${t.github.repo}
    branch: ${t.github.branch}
    autoclean: false
  - owner: ${t.github.user}
    repo: my_second_brain
    branch: master
    autoclean: false`,cls:"language-yaml"}),e}function Vs(){let t=document.createDocumentFragment();return t.createEl("p",null,e=>{e.createEl("a",null,n=>{n.createEl("img",null,r=>{r.setAttr("src","https://storage.ko-fi.com/cdn/kofi2.png?v=3"),r.setAttr("alt","Buy Me A Coffee"),r.setAttr("style","height: 60px !important;width: 217px !important;")}),n.setAttr("href","https://ko-fi.com/lisandra_dev")}),e.setAttr("style","text-align: center;")}),t}var bn=require("obsidian");var et=require("obsidian");var rr=require("obsidian");function Kr(t,e){let n=e;if(!e){let r=t.match(/\/([gimy]+)$/);n=r?Array.from(new Set(r[1].split(""))).join(""):""}return new RegExp(t.replace(/\/(.+)\/.*/,"$1"),n)}function nr(t,e,n){if(!e.conversion.censorText)return t;let r=e.conversion.censorText.filter(i=>!i.after);n&&(r=e.conversion.censorText.filter(i=>i.after));for(let i of r)if(i.entry.trim().length>0){let s=i.entry,a=i.replace;if(s.match(/\/.+\//)){let o=Kr(s,i.flags);t=t.replace(o,a)}else t=t.replaceAll(s,a)}return t}function _s(t,e,n){if(!e.conversion.dataview)return[];let r=/\[\[(.*?)\]\]/gim,i=t.matchAll(r),s=[];if(!i)return[];if(i)for(let a of i){let o=a[1].replace(/(.*)\\?\|/i,""),u=a[1].replace(/\\?\|(.*)/,""),l=n.getAbstractFileByPath(u)instanceof rr.TFile?n.getAbstractFileByPath(u):null;l&&s.push({linked:l,linkFrom:u,altText:o})}return s}function Gs(t,e,n,r,i,s,a,o){return w(this,null,function*(){let u=Ue(t,r,n,i),l=yield n.getFileCache(e.linked).frontmatter,d=yield ee(r,l),h=sr(a,d),D=Us(r.plugin.shareKey,l,o);if(e.linked.extension==="md"&&(h===!1||D===!1))return e.destinationFilePath?e.destinationFilePath:e.linked.basename;if(e.linked.path===t.path)return Ue(e.linked,r,n,i).split("/").at(-1);let g=e.linked.extension==="md"?Ue(e.linked,r,n,i):Dn(e.linked,r,ir(s,r)),y=u.split("/"),T=g.split("/"),C=(_,L)=>{let $=0;for(;_[$]===L[$];)$++;return _.slice($)},x=C(y,T),E=C(T,y),v=function(_){let L=[];for(let $ of _)$!=_.at(-1)&&L.push("..");return L}(x);v.length===0&&v.push(".");let A=v.concat(E).join("/");return(A.trim()==="."||A.trim()==="")&&(A=Ue(e.linked,r,n,i).split("/").at(-1)),A})}function kl(t,e,n,r){let i=n.upload.folderNote.rename,a=`${t.parent.path!=="/"?`/${t.parent.path}/`:"/"}${Wt(r,n)}`;if(!n.upload.folderNote.enable)return a;let o=t.parent.name;if(r.replace(".md","")===o)return`/${t.parent.path}/${i}`;let u=e.getAbstractFileByPath(t.path.replace(".md",""));return u&&u instanceof rr.TFolder?`/${u.path}/${i}`:a}function Sl(t,e,n,r){r=kl(t,n,e,r);let s=(e.upload.defaultName.length>0?e.upload.defaultName:"")+r,a=s.split("/").slice(0,-1).join("/"),o=s.split("/").at(-1);return a=Hs(a,e),a+"/"+o}function Ol(t,e,n){let r=Jr(e,n),i=r.endsWith("/")?r.split("/").at(-2):r.split("/").at(-1);return n.upload.folderNote.enable&&t.replace(".md","").toLowerCase()===i.toLowerCase()?n.upload.folderNote.rename:Wt(t,n)}function Tl(t,e,n){let r=t.upload,i=Jr(e,t),s=Ol(n,e,t),a="";return r.rootFolder.length>0&&!i.includes(r.rootFolder)&&(a=r.rootFolder+"/"),i.trim().length===0?s:Hs(a+i,t)+"/"+s}function Wt(t,e){let n=e.upload;if(t===n.folderNote.rename&&n.folderNote.enable||n.replaceTitle.length===0)return t;t=t.replace(".md","");for(let r of n.replaceTitle)if(r.regex.trim().length>0){let i=r.regex,s=r.replacement;if(i.match(/\/.+\//)){let a=Kr(i);t=t.replace(a,s)}else t=t.replaceAll(i,s)}return t+".md"}function Hs(t,e){let n=e.upload;if(n.behavior==="fixed"||n.replacePath.length===0)return t;for(let r of n.replacePath)if(r.regex.trim().length>0){let i=r.regex,s=r.replacement;if(i.match(/\/.+\//)){let a=i.match(/\/([gimy]+)$/),o=a?Array.from(new Set(a[1].split(""))).join(""):"",u=new RegExp(i.replace(/\/(.+)\/.*/,"$1"),o);t=t.replace(u,s)}else t=t.replaceAll(i,s)}return t}function Yr(t,e,n){let r=e.name;return t&&n.upload.frontmatterTitle.enable&&t[n.upload.frontmatterTitle.key]&&t[n.upload.frontmatterTitle.key]!==e.name&&(r=t[n.upload.frontmatterTitle.key]+".md"),r}function Ue(t,e,n,r){var i;if(t.extension==="md"){let s=(i=n.getCache(t.path))==null?void 0:i.frontmatter,a=Yr(s,t,e),o=Wt(a,e);if(!Xe(s,e,t))return a;if(s.path){let u=s.path instanceof Array?s.path.join("/"):s.path;return u==""||u=="/"?o:u+"/"+o}else return e.upload.behavior==="yaml"?Tl(e,s,a):e.upload.behavior==="obsidian"?Sl(t,e,r,a):e.upload.defaultName.length>0?e.upload.defaultName+"/"+o:o}}function Dn(t,e,n){if(n){if(n&&n.attachmentLinks!==void 0)return n.attachmentLinks+"/"+t.name}else{let r=e.embed.folder;return r.length>0?r+"/"+t.name:e.upload.defaultName.length>0?e.upload.defaultName+"/"+t.name:t.path}return t.path}function V(t,e){e.plugin.noticeError?new et.Notice(t):console.log(t)}function Qr(t,e){return w(this,null,function*(){if(et.Platform.isMobile||!t.plugins.enabledPlugins.has("metadata-extractor")||e.upload.metadataExtractorPath.length===0)return null;let n={allExceptMdFile:null,metadataFile:null,tagsFile:null},r=`${t.vault.configDir}/plugins/metadata-extractor`,i=t.plugins.plugins["metadata-extractor"];return i&&i.settings?(i.settings.allExceptMdFile.length>0&&(n.allExceptMdFile=r+"/"+i.settings.allExceptMdFile),i.settings.metadataFile.length>0&&(n.metadataFile=r+"/"+i.settings.metadataFile),i.settings.tagFile.length>0&&(n.tagsFile=r+"/"+i.settings.tagFile),n):null})}function Pl(t){return t.match(/\/*$/)[0].length!=1&&(t=t.replace(/\/*$/,"")+"/"),t}function ar(t,e,n,r,i){return w(this,null,function*(){var h;let s=i.plugin.copyLink,a=i.github;if(!s.enable)return;let o=Ue(t,i,n,r),u=s.links;u.length===0&&(e instanceof Array?u=`https://${a.user}.github.io/${i.github.repo}/`:u=`https://${e.owner}.github.io/${e.repo}/`);let l=(h=n.getFileCache(t))==null?void 0:h.frontmatter.baselink;if(l!==void 0&&(u=l),u=Pl(u),s.removePart.length>0)for(let D of s.removePart)D.length>0&&(o=o.replace(D.trim(),""));let d=encodeURI(u+o);console.log(d,o),yield navigator.clipboard.writeText(d)})}function Xr(t,e,n,r){return w(this,null,function*(){r=Array.isArray(r)?r:[r];for(let i of r)yield Nl(t,e,n,i)})}function Nl(t,e,n,r){return w(this,null,function*(){let i=e instanceof et.TFile?'"'+e.basename+'"':e,s="",a=`${r.owner}:${r.repo}`;if(e instanceof String?s=c.t("informations.successfullPublish",{nbNotes:i,repoInfo:a}):s=c.t("informations.successPublishOneNote",{file:i,repoInfo:a}),n.github.worflow.workflowName.length>0){let o=c.t("informations.sendMessage",{nbNotes:i,repoOwner:r.owner,repoInfo:r.repo})+`.
`+c.t("informations.waitingWorkflow");new et.Notice(o),(yield t.workflowGestion(r))&&new et.Notice(s)}else new et.Notice(s)})}function Ws(t){let e=JSON.stringify(t,(n,r)=>typeof r=="string"?r.trim().toLowerCase():r);return JSON.parse(e)}function ir(t,e){let n=null;e.embed.folder.length>0?n=e.embed.folder:e.upload.defaultName.length>0&&(n=e.upload.defaultName);let r={convertWiki:e.conversion.links.wiki,attachment:e.embed.attachments,embed:e.embed.notes,attachmentLinks:n,links:!0,removeEmbed:!1,dataview:e.conversion.dataview,hardbreak:e.conversion.hardbreak,convertInternalNonShared:e.conversion.links.unshared,convertInternalLinks:e.conversion.links.internal};return t.links!==void 0&&(typeof t.links=="object"?(t.links.convert!==void 0&&(r.links=t.links.convert),t.links.internals!==void 0&&(r.convertInternalLinks=t.links.internals),t.links.mdlinks!==void 0&&(r.convertWiki=t.links.mdlinks),t.links.nonShared!==void 0&&(r.convertInternalNonShared=t.links.nonShared)):r.links=t.links),t.embed!==void 0&&(typeof t.embed=="object"?(t.embed.send!==void 0&&(r.embed=t.embed.send),t.embed.remove!==void 0&&(r.removeEmbed=t.embed.remove)):r.embed=t.embed),t.attachment!==void 0&&(typeof t.attachment=="object"?(t.attachment.send!==void 0&&(r.attachment=t.attachment.send),t.attachment.folder!==void 0&&(r.attachmentLinks=t.attachment.folder)):r.attachment=t.attachment),t.attachmentLinks!==void 0&&(r.attachmentLinks=t.attachmentLinks.toString().replace(/\/$/,"")),t.mdlinks!==void 0&&(r.convertWiki=t.mdlinks),t.removeEmbed!==void 0&&(r.removeEmbed=t.removeEmbed),t.dataview!==void 0&&(r.dataview=t.dataview),t.hardbreak!==void 0&&(r.hardbreak=t.hardbreak),t.internals!==void 0&&(r.convertInternalLinks=t.internals),t.nonShared!==void 0&&(r.convertInternalNonShared=t.nonShared),r}function ee(t,e){let n=t.github,r={branch:n.branch,repo:n.repo,owner:n.user,autoclean:t.upload.autoclean.enable};if(t.upload.behavior==="fixed"&&(r.autoclean=!1),!e||e.multipleRepo===void 0||e.repo===void 0)return r;let i=null;if(e.multipleRepo){let s=Al(e,r);return s.length===1?s[0]:s}else if(e.repo)if(typeof e.repo=="object")e.repo.branch!==void 0&&(r.branch=e.repo.branch),e.repo.repo!==void 0&&(r.repo=e.repo.repo),e.repo.owner!==void 0&&(r.owner=e.repo.owner),e.repo.autoclean!==void 0&&(r.autoclean=e.repo.autoclean,i=!0);else{let s=e.repo.split("/");i=s.length>4?!0:null,r=qs(s,r)}return e.autoclean!==void 0&&i===null&&(r.autoclean=e.autoclean),r}function Al(t,e){let n=[];if(t.multipleRepo instanceof Array&&t.multipleRepo.length>0)for(let r of t.multipleRepo)if(typeof r=="object"){let i={branch:e.branch,repo:e.repo,owner:e.owner,autoclean:!1};r.branch!==void 0&&(i.branch=r.branch),r.repo!==void 0&&(i.repo=r.repo),r.owner!==void 0&&(i.owner=r.owner),r.autoclean!==void 0&&(i.autoclean=r.autoclean),n.push(i)}else{let i=r.split("/"),s={branch:e.branch,repo:e.repo,owner:e.owner,autoclean:!1};n.push(qs(i,s))}return n.filter((r,i,s)=>s.findIndex(a=>a.repo===r.repo&&a.owner===r.owner&&a.branch===r.branch&&a.autoclean===r.autoclean)===i)}function qs(t,e){let n={branch:e.branch,repo:e.repo,owner:e.owner,autoclean:!1};return t.length>=4&&(n.branch=t[2],n.repo=t[1],n.owner=t[0],n.autoclean=t[3]==="true"),t.length===3?(n.branch=t[2],n.repo=t[1],n.owner=t[0]):t.length===2?(n.repo=t[1],n.owner=t[0]):t.length===1&&(n.repo=t[0]),n}function Jr(t,e){let n=e.upload.yamlFolderKey,r=t[n]!==void 0?t[n]:e.upload.defaultName;return r instanceof Array&&(r=r.join("/")),r}function Us(t,e,n){let r=e&&e[t]?e[t]:!1;return r?!0:!r&&n.convertInternalNonShared===!0}function Xe(t,e,n){if(!n||n.extension!=="md"||t===null)return!1;let r=e.plugin.excludedFolder;if(t===void 0||t[e.plugin.shareKey]===void 0)return!1;if(r.length>0)for(let i=0;i<r.length;i++){let s=r[i].match(/^\/(.*)\/[igmsuy]*$/),a=s?new RegExp(s[1],s[2]):null;if(a&&a.test(n.path)||n.path.contains(r[i].trim()))return!1}return t[e.plugin.shareKey]}function he(t){return t.match(/(png|jpe?g|gif|bmp|svg|mp[34]|web[mp]|wav|m4a|ogg|3gp|flac|ogv|mov|mkv|pdf)$/i)}function sr(t,e){t=t instanceof Array?t:[t],e=e instanceof Array?e:[e];let n=(r,i)=>r.owner===i.owner&&r.repo===i.repo&&r.branch===i.branch;for(let r of e)for(let i of t)if(n(r,i))return!0;for(let r of t)for(let i of e)if(n(r,i))return!0;return!1}function or(t,e){t=Array.isArray(t)?t:[t];let n=[];if(e.github.token.length===0){n.push(!0);let i=c.t("error.whatEmpty.ghToken");new bn.Notice(c.t("error.isEmpty",{repoInfo:i}))}if(e.github.token.length!=0)for(let i of t)if(i.repo.length===0){n.push(!0);let s=c.t("error.whatEmpty.repo");new bn.Notice(c.t("error.isEmpty",{repoInfo:s}))}else if(i.owner.length===0){n.push(!0);let s=c.t("error.whatEmpty.owner");new bn.Notice(c.t("error.isEmpty",{repoInfo:s}))}else if(i.branch.length===0){n.push(!0);let s=c.t("error.whatEmpty.branch");new bn.Notice(c.t("error.isEmpty",{repoInfo:s}))}else n.push(!1);return!n.every(i=>i===!0)}function zs(t){let e=t.convertWiki,n=t.attachment,r=t.embed,i=t.links;return!e&&i&&n&&r&&!t.removeEmbed}function ur(t,e,n,r,i){return w(this,null,function*(){var s;try{let a=r?(s=i.getFileCache(r))==null?void 0:s.frontmatter:null,o=ee(n,a);or(o,n)&&(yield e.checkRepository(o,!1))}catch(a){V(a,n)}})}function xt(t,e,n,r){return w(this,null,function*(){try{if(or(r,n))return yield e.checkRepository(r,!0),!0}catch(i){return V(i,n),!1}})}var pe=require("obsidian");function lr(t,e){return w(this,null,function*(){Object.keys(t).includes("editorMenu")&&(V(c.t("informations.migrating.oldSettings"),e.settings),e.settings={github:{user:t.githubName?t.githubName:e.settings.github.user?e.settings.github.user:"",repo:t.githubRepo?t.githubRepo:e.settings.github.repo?e.settings.github.repo:"",token:t.GhToken?t.GhToken:e.settings.github.token?e.settings.github.token:"",branch:t.githubBranch,automaticallyMergePR:t.automaticallyMergePR,api:{tiersForApi:t.tiersForApi,hostname:t.hostname},worflow:{workflowName:t.workflowName,customCommitMsg:t.customCommitMsg}},upload:{behavior:t.downloadedFolder,defaultName:t.folderDefaultName,rootFolder:t.rootFolder,yamlFolderKey:t.yamlFolderKey,frontmatterTitle:{enable:t.useFrontmatterTitle,key:t.frontmatterTitleKey},replaceTitle:[{regex:t.frontmatterTitleRegex,replacement:t.frontmatterTitleReplacement,type:"title"}],replacePath:[{regex:t.subFolder,replacement:"",type:"path"}],autoclean:{enable:t.autoCleanUp,excluded:t.autoCleanUpExcluded},folderNote:{enable:t.folderNote,rename:t.folderNoteRename},metadataExtractorPath:t.metadataExtractorPath},conversion:{hardbreak:t.hardBreak,dataview:t.convertDataview,censorText:t.censorText,tags:{inline:t.inlineTags,exclude:t.excludeDataviewValue,fields:t.dataviewFields},links:{internal:t.convertForGithub,unshared:t.convertInternalNonShared,wiki:t.convertWikiLinks}},embed:{attachments:t.embedImage,keySendFile:t.metadataFileFields,notes:t.embedNotes,folder:t.defaultImageFolder},plugin:{shareKey:t.shareKey,fileMenu:t.fileMenu,editorMenu:t.editorMenu,excludedFolder:t.excludedFolder,externalShare:t.shareExternalModified,copyLink:{enable:t.copyLink,links:t.mainLink,removePart:t.linkRemover.split(/[,\n]\W*/).map(n=>n.trim())},noticeError:t.logNotice}},yield e.saveSettings()),e.settings.upload.replaceTitle instanceof Array||(V(c.t("informations.migrating.fileReplace"),e.settings),e.settings.upload.replaceTitle=[e.settings.upload.replaceTitle],yield e.saveSettings()),e.settings.upload.subFolder&&!e.settings.upload.replacePath.find(n=>n.regex==="/"+e.settings.upload.subFolder)&&(V(c.t("informations.migrating.subFolder"),e.settings),e.settings.upload.subFolder.length>0&&e.settings.upload.replacePath.push({regex:"/"+e.settings.upload.subFolder,replacement:"",type:"path"}),delete e.settings.upload.subFolder,yield e.saveSettings());for(let n of e.settings.conversion.censorText)n.flags&&(n.entry="/"+n.entry+"/"+n.flags,delete n.flags,yield e.saveSettings())})}var cr=class extends pe.Modal{constructor(n,r,i,s){super(n);this.plugin=r,this.settingsPage=i,this.settingsTab=s}onOpen(){let{contentEl:n}=this;new pe.Setting(n).setName(c.t("modals.import.title")).setDesc(c.t("modals.import.desc")),new pe.Setting(n).then(r=>{let i=createSpan({cls:"github-publisher-import-error",text:c.t("modals.import.error.span")});r.nameEl.appendChild(i);let s=o=>w(this,null,function*(){if(o)try{let u=JSON.parse(o);if(Object.keys(u).includes("editorMenu"))yield lr(u,this.plugin),V("Migrated settings from old to new format",this.plugin.settings);else{V("Imported settings as new format",this.plugin.settings),u=u,u.upload.replaceTitle instanceof Array||(u.upload.replaceTitle=[u.upload.replaceTitle]),Object.keys(u).includes("github")&&(u.github.repo=this.plugin.settings.github.repo,u.github.token=this.plugin.settings.github.token,u.github.user=this.plugin.settings.github.user);for(let[l,d]of Object.entries(u))this.plugin.settings[l]=d;this.plugin.saveSettings()}this.close()}catch(u){i.addClass("active"),i.setText(`${c.t("modals.import.error.span")}${u}`)}else i.addClass("active"),i.setText(`${c.t("modals.import.error.span")}: ${c.t("modals.import.error.isEmpty")}`)});r.controlEl.createEl("input",{cls:"github-publisher-import-input",attr:{id:"github-publisher-import-input",name:"github-publisher-import-input",type:"file",accept:".json"}},o=>{o.addEventListener("change",u=>{let l=new FileReader;l.onload=d=>w(this,null,function*(){yield s(d.target.result.toString().trim())}),l.readAsText(u.target.files[0])})}),r.controlEl.createEl("label",{cls:"github-publisher-import-label",text:c.t("modals.import.importFromFile"),attr:{for:"github-publisher-import-input"}}),new pe.TextAreaComponent(n).setPlaceholder(c.t("modals.import.paste")).then(o=>{new pe.ButtonComponent(n).setButtonText(c.t("common.save")).onClick(()=>w(this,null,function*(){yield s(o.getValue().trim())})).buttonEl.addClass("github-publisher-import-save-button")}).inputEl.addClass("github-publisher-import-textarea")})}onClose(){let{contentEl:n}=this;n.empty(),this.settingsPage.empty();let r=document.querySelector(".settings-tab-active.github-publisher")?document.querySelector(".settings-tab-active.github-publisher").innerText:c.t("settings.github.title");switch(r=r.trim(),r){case c.t("settings.github.title"):this.settingsTab.renderGithubConfiguration();break;case c.t("settings.upload.title"):this.settingsTab.renderUploadConfiguration();break;case c.t("settings.conversion.title"):this.settingsTab.renderTextConversion();break;case c.t("settings.embed.title"):this.settingsTab.renderEmbedConfiguration();break;case c.t("settings.plugin.title"):this.settingsTab.renderPluginSettings();break;case c.t("settings.help.title"):this.settingsTab.renderHelp();break}}},fr=class extends pe.Modal{constructor(n,r){super(n);this.plugin=r}onOpen(){let{contentEl:n,modalEl:r}=this;r.addClass("modal-github-publisher"),new pe.Setting(n).setName(c.t("modals.export.title")).setDesc(c.t("modals.export.desc")).then(i=>{let s=this.plugin.settings,a=JSON.stringify(s,null,2).replace(/,\s+"(repo|user|token)": "\w*"/g,"");i.controlEl.createEl("a",{cls:"github-publisher-copy",text:c.t("modals.export.copy"),href:"#"},o=>{new pe.TextAreaComponent(n).setValue(a).then(l=>{o.addEventListener("click",d=>{d.preventDefault(),l.inputEl.select(),l.inputEl.setSelectionRange(0,99999),document.execCommand("copy"),o.addClass("success"),setTimeout(()=>{o.parentNode&&o.removeClass("success")},2e3)})}).inputEl.addClass("github-publisher-export-textarea")}),pe.Platform.isDesktop?i.controlEl.createEl("a",{cls:"github-publisher-download",text:c.t("modals.export.download"),attr:{download:"github-publisher.json",href:`data:application/json;charset=utf-8,${encodeURIComponent(a)}`}}):pe.Platform.isMobile&&i.addButton(o=>o.setButtonText(c.t("modals.export.download")).onClick(()=>{this.app.vault.adapter.write(`${app.vault.configDir}/plugins/obsidian-mkdocs-publisher/._tempSettings.json`,a),this.app.openWithDefaultApp(`${app.vault.configDir}/plugins/obsidian-mkdocs-publisher/._tempSettings.json`)}))})}onClose(){try{this.app.vault.adapter.trashSystem(`${app.vault.configDir}/plugins/obsidian-mkdocs-publisher/._tempSettings.json`)}catch(r){}let{contentEl:n}=this;n.empty()}};var dr=class extends M.PluginSettingTab{constructor(n,r,i){super(n,r);this.plugin=r,this.branchName=i}display(){let{containerEl:n}=this;n.empty();let r={"github-configuration":{name:c.t("settings.github.title"),icon:"cloud"},"upload-configuration":{name:c.t("settings.upload.title"),icon:"upload"},"text-conversion":{name:c.t("settings.conversion.title"),icon:"file-text"},"embed-configuration":{name:c.t("settings.embed.title"),icon:"link"},"plugin-settings":{name:c.t("settings.plugin.title"),icon:"gear"},help:{name:c.t("settings.help.title"),icon:"info"}};new M.Setting(n).setClass("github-publisher-export-import").addButton(s=>{s.setButtonText(c.t("settings.exportSettings")).setClass("github-publisher-export").onClick(()=>{new fr(this.app,this.plugin).open()})}).addButton(s=>{s.setButtonText(c.t("settings.importSettings")).setClass("github-publisher-import").onClick(()=>{new cr(this.app,this.plugin,this.settingsPage,this).open()})});let i=n.createEl("nav",{cls:"settings-tab-bar github-publisher"});for(let[s,a]of Object.entries(r)){let o=i.createEl("div",{cls:"settings-tab github-publisher"}),u=o.createEl("div",{cls:"settings-tab-icon github-publisher"});(0,M.setIcon)(u,a.icon),o.createEl("div",{cls:"settings-tab-name github-publisher",text:a.name}),s==="github-configuration"&&o.addClass("settings-tab-active"),o.addEventListener("click",()=>{for(let l of i.children)l.removeClass("settings-tab-active");o.addClass("settings-tab-active"),this.renderSettingsPage(s)})}this.settingsPage=n.createEl("div",{cls:"settings-tab-page github-publisher"}),this.renderSettingsPage("github-configuration")}renderSettingsPage(n){switch(this.settingsPage.empty(),n){case"github-configuration":this.renderGithubConfiguration();break;case"upload-configuration":this.renderUploadConfiguration();break;case"text-conversion":this.renderTextConversion();break;case"embed-configuration":this.renderEmbedConfiguration();break;case"plugin-settings":this.renderPluginSettings();break;case"help":this.renderHelp();break}}renderGithubConfiguration(){let n=this.plugin.settings.github;new M.Setting(this.settingsPage).setName(c.t("settings.github.apiType.title")).setDesc(c.t("settings.github.apiType.desc")).addDropdown(i=>{i.addOption("Github Free/Pro/Team (default)",c.t("settings.github.apiType.dropdown.free")).addOption("Enterprise",c.t("settings.github.apiType.dropdown.enterprise")).setValue(n.api.tiersForApi).onChange(s=>w(this,null,function*(){n.api.tiersForApi=s,yield this.plugin.saveSettings(),this.renderSettingsPage("github-configuration")}))}),n.api.tiersForApi==="Enterprise"&&new M.Setting(this.settingsPage).setName(c.t("settings.github.apiType.hostname.title")).setDesc(c.t("settings.github.apiType.hostname.desc")).addText(i=>i.setPlaceholder("https://github.mycompany.com").setValue(n.api.hostname).onChange(s=>w(this,null,function*(){n.api.hostname=s.trim(),yield this.plugin.saveSettings()}))),new M.Setting(this.settingsPage).setName(c.t("settings.github.repoName.title")).setDesc(c.t("settings.github.repoName.desc")).addText(i=>i.setPlaceholder(c.t("settings.github.repoName.placeholder")).setValue(n.repo).onChange(s=>w(this,null,function*(){n.repo=s.trim(),yield this.plugin.saveSettings()}))),new M.Setting(this.settingsPage).setName(c.t("settings.github.username.title")).setDesc(c.t("settings.github.username.desc")).addText(i=>i.setPlaceholder(c.t("settings.github.username.title")).setValue(n.user).onChange(s=>w(this,null,function*(){n.user=s.trim(),yield this.plugin.saveSettings()})));let r=document.createDocumentFragment();r.createEl("span",null,i=>{i.innerText=c.t("settings.github.ghToken.desc"),i.createEl("a",null,s=>{s.innerText=c.t("common.here"),s.href="https://github.com/settings/tokens/new?scopes=repo,workflow"})}),new M.Setting(this.settingsPage).setName(c.t("settings.github.ghToken.title")).setDesc(r).addText(i=>i.setPlaceholder("ghb-15457498545647987987112184").setValue(n.token).onChange(s=>w(this,null,function*(){n.token=s.trim(),yield this.plugin.saveSettings()}))),new M.Setting(this.settingsPage).setName(c.t("settings.github.branch.title")).setDesc(c.t("settings.github.branch.desc")).addText(i=>i.setPlaceholder("main").setValue(n.branch).onChange(s=>w(this,null,function*(){n.branch=s.trim(),yield this.plugin.saveSettings()}))),new M.Setting(this.settingsPage).setName(c.t("settings.github.automaticallyMergePR")).addToggle(i=>i.setValue(n.automaticallyMergePR).onChange(s=>w(this,null,function*(){n.automaticallyMergePR=s,yield this.plugin.saveSettings()}))),new M.Setting(this.settingsPage).setClass("github-publisher-no-display").addButton(i=>i.setButtonText(c.t("settings.github.testConnection")).setClass("github-publisher-connect-button").onClick(()=>w(this,null,function*(){yield ur(this.branchName,this.plugin.reloadOctokit(),this.plugin.settings,null,this.app.metadataCache)}))),this.settingsPage.createEl("h3",{text:"Github Workflow"}),new M.Setting(this.settingsPage).setName(c.t("settings.githubWorkflow.prRequest.title")).setDesc(c.t("settings.githubWorkflow.prRequest.desc")).addText(i=>i.setPlaceholder("[PUBLISHER] MERGE").setValue(n.worflow.customCommitMsg).onChange(s=>w(this,null,function*(){n.worflow.customCommitMsg=s,yield this.plugin.saveSettings()}))),new M.Setting(this.settingsPage).setName(c.t("settings.githubWorkflow.githubAction.title")).setDesc(c.t("settings.githubWorkflow.githubAction.desc")).addText(i=>{i.setPlaceholder("ci").setValue(n.worflow.workflowName).onChange(s=>w(this,null,function*(){s=s.length>0?s.trim().replace(".yml","")+".yml":s,n.worflow.customCommitMsg=s,yield this.plugin.saveSettings()}))})}renderUploadConfiguration(){let n=this.plugin.settings.upload;new M.Setting(this.settingsPage).setName(c.t("settings.upload.folderBehavior.title")).setDesc(c.t("settings.upload.folderBehavior.desc")).addDropdown(d=>{d.addOptions({fixed:c.t("settings.upload.folderBehavior.fixedFolder"),yaml:c.t("settings.upload.folderBehavior.yaml"),obsidian:c.t("settings.upload.folderBehavior.obsidianPath")}).setValue(n.behavior).onChange(h=>w(this,null,function*(){n.behavior=h,yield Zr(r,i,l,h,this.plugin),yield this.plugin.saveSettings(),this.renderSettingsPage("upload-configuration")}))}),new M.Setting(this.settingsPage).setName(c.t("settings.upload.defaultFolder.title")).setDesc(c.t("settings.upload.defaultFolder.desc")).addText(d=>{d.setPlaceholder(c.t("settings.upload.defaultFolder.placeholder")).setValue(n.defaultName).onChange(h=>w(this,null,function*(){n.defaultName=h.replace(/\/$/,""),yield tr(h,l,this.plugin),yield this.plugin.saveSettings()}))});let r=new M.Setting(this.settingsPage).setName(c.t("settings.upload.frontmatterKey.title")).setClass("github-publisher").setDesc(c.t("settings.upload.frontmatterKey.desc")).addText(d=>{d.setPlaceholder(c.t("settings.upload.frontmatterKey.placeholder")).setValue(n.yamlFolderKey).onChange(h=>w(this,null,function*(){n.yamlFolderKey=h.trim(),yield this.plugin.saveSettings()}))}),i=new M.Setting(this.settingsPage).setName(c.t("settings.upload.rootFolder.title")).setClass("github-publisher").setDesc(c.t("settings.upload.rootFolder.desc")).addText(d=>{d.setPlaceholder("docs").setValue(n.rootFolder).onChange(h=>w(this,null,function*(){n.rootFolder=h.replace(/\/$/,""),yield tr(h,l,this.plugin),yield this.plugin.saveSettings()}))}),s=new M.Setting(this.settingsPage).setName(c.t("settings.upload.useFrontmatterTitle.title")).setDesc(c.t("settings.upload.useFrontmatterTitle.desc")).setClass("github-publisher-title").addToggle(d=>{d.setValue(n.frontmatterTitle.enable).onChange(h=>w(this,null,function*(){n.frontmatterTitle.enable=h,yield this.plugin.saveSettings(),this.renderSettingsPage("upload-configuration")}))});n.frontmatterTitle.enable&&s.addText(d=>{d.setPlaceholder("title").setValue(n.frontmatterTitle.key).onChange(h=>w(this,null,function*(){n.frontmatterTitle.key=h.trim(),yield this.plugin.saveSettings()}))});let a=c.t("settings.upload.regexFilePathTitle.title.FolderPathTitle");n.behavior==="fixed"&&(a=c.t("settings.upload.regexFilePathTitle.title.titleOnly")),new M.Setting(this.settingsPage).setName(a).setDesc(c.t("settings.upload.regexFilePathTitle.desc")).addButton(d=>{d.setIcon("pencil").onClick(()=>w(this,null,function*(){let h=n.replaceTitle;n.behavior!=="fixed"&&(h=h.concat(n.replacePath)),new Xn(this.app,this.plugin.settings,h,D=>{n.replacePath=D.filter(g=>g.type==="path"),n.replaceTitle=D.filter(g=>g.type==="title"),this.plugin.saveSettings()}).open()}))});let o=new M.Setting(this.settingsPage).setName(c.t("settings.conversion.links.folderNote.title")).setClass("github-publisher-folderNote").setDesc(c.t("settings.conversion.links.folderNote.desc")).addToggle(d=>{d.setValue(n.folderNote.enable).onChange(h=>w(this,null,function*(){n.folderNote.enable=h,yield this.plugin.saveSettings(),this.renderSettingsPage("upload-configuration")}))});n.folderNote.enable&&o.addText(d=>{d.setPlaceholder("folderNote").setValue(n.folderNote.rename).onChange(h=>w(this,null,function*(){n.folderNote.rename=h,yield this.plugin.saveSettings()}))}),Rs(this.plugin.settings,r,i,o),app.plugins.enabledPlugins.has("metadata-extractor")&&new M.Setting(this.settingsPage).setName(c.t("settings.githubWorkflow.useMetadataExtractor.title")).setDesc(c.t("settings.githubWorkflow.useMetadataExtractor.desc")).addText(d=>{d.setPlaceholder("docs/_assets/metadata").setValue(n.metadataExtractorPath).onChange(h=>w(this,null,function*(){n.metadataExtractorPath=h.trim(),yield this.plugin.saveSettings()}))});let u=n.behavior==="yaml"&&n.rootFolder.length===0||n.defaultName.length===0,l=new M.Setting(this.settingsPage).setName(c.t("settings.githubWorkflow.autoCleanUp.title")).setDesc(c.t("settings.githubWorkflow.autoCleanUp.desc")).setDisabled(u).addToggle(d=>{d.setValue(n.autoclean.enable).onChange(h=>w(this,null,function*(){n.autoclean.enable=h,yield this.plugin.saveSettings(),this.renderSettingsPage("upload-configuration")}))});n.autoclean.enable&&new M.Setting(this.settingsPage).setName(c.t("settings.githubWorkflow.excludedFiles.title")).setDesc(c.t("settings.githubWorkflow.excludedFiles.desc")).setClass("github-publisher-textarea").addTextArea(d=>{d.setPlaceholder("docs/assets/js, docs/assets/logo, /\\.js$/").setValue(n.autoclean.excluded.join(", ")).onChange(h=>w(this,null,function*(){n.autoclean.excluded=h.split(/[,\n]\W*/).map(D=>D.trim()).filter(D=>D.length>0),yield this.plugin.saveSettings()}))}),Ls(u,l,this.plugin),Zr(r,i,l,n.behavior,this.plugin)}renderTextConversion(){let n=this.plugin.settings.conversion;this.settingsPage.createEl("p",{text:c.t("settings.conversion.desc")}),this.settingsPage.createEl("h5",{text:c.t("settings.conversion.sectionTitle")}),new M.Setting(this.settingsPage).setName(c.t("settings.conversion.hardBreak.title")).setDesc(c.t("settings.conversion.hardBreak.desc")).addToggle(r=>{r.setValue(n.hardbreak).onChange(i=>w(this,null,function*(){n.hardbreak=i,yield this.plugin.saveSettings()}))}),new M.Setting(this.settingsPage).setName(c.t("settings.conversion.dataview.title")).setDesc(c.t("settings.conversion.dataview.desc")).addToggle(r=>{r.setValue(n.dataview).onChange(i=>w(this,null,function*(){n.dataview=i,yield this.plugin.saveSettings()}))}),new M.Setting(this.settingsPage).setName(c.t("settings.regexReplacing.modal.title.text")).setDesc(c.t("settings.regexReplacing.modal.desc")).addButton(r=>{r.setIcon("pencil").onClick(()=>w(this,null,function*(){new er(this.app,this.plugin.settings,i=>{this.plugin.settings.conversion.censorText=i.conversion.censorText,this.plugin.saveSettings()}).open()}))}),this.settingsPage.createEl("h5",{text:"Tags"}),new M.Setting(this.settingsPage).setName(c.t("settings.conversion.tags.inlineTags.title")).setDesc(c.t("settings.conversion.tags.inlineTags.desc")).addToggle(r=>{r.setValue(n.tags.inline).onChange(i=>w(this,null,function*(){n.tags.inline=i,yield this.plugin.saveSettings()}))}),new M.Setting(this.settingsPage).setName(c.t("settings.conversion.tags.title")).setDesc(c.t("settings.conversion.tags.desc")).setClass("github-publisher-textarea").addTextArea(r=>{r.inputEl.style.width="50%",r.setPlaceholder("field_name").setValue(n.tags.fields.join(",")).onChange(i=>w(this,null,function*(){n.tags.fields=i.split(/[,\n]\W*/).map(s=>s.trim()).filter(s=>s.length>0),yield this.plugin.saveSettings()}))}),new M.Setting(this.settingsPage).setName(c.t("settings.conversion.tags.exclude.title")).setDesc(c.t("settings.conversion.tags.exclude.desc")).setClass("github-publisher-textarea").addTextArea(r=>{r.setPlaceholder("field value").setValue(n.tags.exclude.join(",")).onChange(i=>w(this,null,function*(){n.tags.exclude=i.split(/[,\n]\W*/).map(s=>s.trim()).filter(s=>s.length>0),yield this.plugin.saveSettings()}))}),this.settingsPage.createEl("h5",{text:c.t("settings.conversion.links.title")}),this.settingsPage.createEl("p",{text:c.t("settings.conversion.links.desc")}),new M.Setting(this.settingsPage).setName(c.t("settings.conversion.links.internals.title")).setDesc(c.t("settings.conversion.links.internals.desc")).addToggle(r=>{r.setValue(n.links.internal).onChange(i=>w(this,null,function*(){n.links.internal=i,yield this.plugin.saveSettings(),this.renderSettingsPage("text-configuration")}))}),n.links.internal&&new M.Setting(this.settingsPage).setName(c.t("settings.conversion.links.nonShared.title")).setDesc(c.t("settings.conversion.links.nonShared.desc")).addToggle(r=>{r.setValue(n.links.unshared).onChange(i=>w(this,null,function*(){n.links.unshared=i,yield this.plugin.saveSettings()}))}),new M.Setting(this.settingsPage).setName(c.t("settings.conversion.links.wikilinks.title")).setDesc(c.t("settings.conversion.links.wikilinks.desc")).addToggle(r=>{r.setValue(n.links.wiki).onChange(i=>w(this,null,function*(){n.links.wiki=i,yield this.plugin.saveSettings()}))})}renderEmbedConfiguration(){let n=this.plugin.settings.embed;new M.Setting(this.settingsPage).setName(c.t("settings.embed.transferImage.title")).setDesc(c.t("settings.embed.transferImage.desc")).addToggle(i=>{i.setValue(n.attachments).onChange(s=>w(this,null,function*(){n.attachments=s,Bs(s,r),yield this.plugin.saveSettings()}))}),new M.Setting(this.settingsPage).setName(c.t("settings.embed.transferMetaFile.title")).setDesc(c.t("settings.embed.transferMetaFile.desc")).setClass("github-publisher-textarea").addTextArea(i=>{i.setPlaceholder("banner").setValue(n.keySendFile.join(", ")).onChange(s=>w(this,null,function*(){n.keySendFile=s.split(/[,\n]\W*/).map(a=>a.trim()).filter(a=>a.length>0),yield this.plugin.saveSettings()}))}),new M.Setting(this.settingsPage).setName(c.t("settings.embed.transferNotes.title")).setDesc(c.t("settings.embed.transferNotes.desc")).addToggle(i=>{i.setValue(n.notes).onChange(s=>w(this,null,function*(){n.notes=s,yield this.plugin.saveSettings()}))});let r=new M.Setting(this.settingsPage).setName(c.t("settings.embed.defaultImageFolder.title")).setDesc(c.t("settings.embed.defaultImageFolder.desc")).addText(i=>{i.setPlaceholder("docs/images").setValue(n.folder).onChange(s=>w(this,null,function*(){n.folder=s.replace(/\/$/,""),yield this.plugin.saveSettings()}))})}renderPluginSettings(){let n=this.plugin.settings.plugin;new M.Setting(this.settingsPage).setName(c.t("settings.plugin.shareKey.title")).setDesc(c.t("settings.plugin.shareKey.desc")).addText(r=>r.setPlaceholder("share").setValue(n.shareKey).onChange(i=>w(this,null,function*(){n.shareKey=i.trim(),yield this.plugin.saveSettings()}))),new M.Setting(this.settingsPage).setName(c.t("settings.plugin.excludedFolder.title")).setDesc(c.t("settings.plugin.excludedFolder.desc")).setClass("github-publisher-textarea").addTextArea(r=>r.setPlaceholder("_assets, Archive, /^_(.*)/gi").setValue(n.excludedFolder.join(", ")).onChange(i=>w(this,null,function*(){n.excludedFolder=i.split(/[,\n]\W*/).map(s=>s.trim()).filter(s=>s.length>0),yield this.plugin.saveSettings()}))),new M.Setting(this.settingsPage).setName(c.t("settings.plugin.fileMenu.title")).setDesc(c.t("settings.plugin.fileMenu.desc")).addToggle(r=>r.setValue(n.fileMenu).onChange(i=>w(this,null,function*(){n.fileMenu=i,yield this.plugin.saveSettings()}))),new M.Setting(this.settingsPage).setName(c.t("settings.plugin.editorMenu.title")).setDesc(c.t("settings.plugin.editorMenu.desc")).addToggle(r=>r.setValue(n.editorMenu).onChange(i=>w(this,null,function*(){n.editorMenu=i,yield this.plugin.saveSettings()}))),new M.Setting(this.settingsPage).setName(c.t("settings.plugin.shareExternalModified.title")).setDesc(c.t("settings.plugin.shareExternalModified.desc")).addToggle(r=>r.setValue(n.externalShare).onChange(i=>w(this,null,function*(){n.externalShare=i,yield this.plugin.saveSettings()}))),new M.Setting(this.settingsPage).setName(c.t("settings.plugin.copyLink.title")).setDesc(c.t("settings.plugin.copyLink.desc")).addToggle(r=>r.setValue(n.copyLink.enable).onChange(i=>w(this,null,function*(){n.copyLink.enable=i,yield this.plugin.saveSettings(),this.renderSettingsPage("plugin-settings")}))),n.copyLink.enable&&(new M.Setting(this.settingsPage).setName(c.t("settings.plugin.copyLink.baselink.title")).setDesc(c.t("settings.plugin.copyLink.baselink.desc")).setClass("github-publisher").addText(r=>{r.setPlaceholder("my_blog.com").setValue(n.copyLink.links).onChange(i=>w(this,null,function*(){n.copyLink.links=i,yield this.plugin.saveSettings()}))}),new M.Setting(this.settingsPage).setName(c.t("settings.plugin.copyLink.linkpathremover.title")).setDesc(c.t("settings.plugin.copyLink.linkpathremover.desc")).setClass("github-publisher").addText(r=>{r.setPlaceholder("docs").setValue(n.copyLink.removePart.join(", ")).onChange(i=>w(this,null,function*(){n.copyLink.removePart=i.split(/[,\n]\s*/).map(s=>s.trim()).filter(s=>s.length>0),yield this.plugin.saveSettings()}))}),new M.Setting(this.settingsPage).setName(c.t("settings.plugin.copyLink.command")).addToggle(r=>r.setValue(n.copyLink.addCmd).onChange(i=>w(this,null,function*(){n.copyLink.addCmd=i,yield this.plugin.saveSettings()})))),new M.Setting(this.settingsPage).setName(c.t("settings.plugin.logNoticeHeader.title")).setDesc(c.t("settings.plugin.logNoticeHeader.desc")).addToggle(r=>r.setValue(n.noticeError).onChange(i=>w(this,null,function*(){n.noticeError=i,yield this.plugin.saveSettings()})))}renderHelp(){this.settingsPage.createEl("h2",{text:c.t("settings.help.usefulLinks.title")}),this.settingsPage.appendChild(js()),this.settingsPage.createEl("hr"),this.settingsPage.createEl("h2",{text:c.t("settings.help.frontmatter.title")}),this.settingsPage.createEl("p",{text:c.t("settings.help.frontmatter.desc")}),this.settingsPage.createEl("pre",{cls:"language-yaml"}).createEl("code",{text:Ms(this.plugin.settings),cls:"language-yaml"}),this.settingsPage.appendChild(Is(this.plugin.settings)),this.settingsPage.createEl("h2",{text:c.t("settings.help.multiRepoHelp.title")}),this.settingsPage.appendChild($s(this.plugin.settings)),this.settingsPage.appendChild(Vs())}};var Hi=require("obsidian");var Tt=require("obsidian");var Xs="3.7.5",Ll=Xs,Bl=typeof atob=="function",Ml=typeof btoa=="function",zt=typeof Buffer=="function",Zs=typeof TextDecoder=="function"?new TextDecoder:void 0,Ks=typeof TextEncoder=="function"?new TextEncoder:void 0,Il="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",yn=Array.prototype.slice.call(Il),hr=(t=>{let e={};return t.forEach((n,r)=>e[n]=r),e})(yn),jl=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,ie=String.fromCharCode.bind(String),Ys=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),ea=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),ta=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),na=t=>{let e,n,r,i,s="",a=t.length%3;for(let o=0;o<t.length;){if((n=t.charCodeAt(o++))>255||(r=t.charCodeAt(o++))>255||(i=t.charCodeAt(o++))>255)throw new TypeError("invalid character found");e=n<<16|r<<8|i,s+=yn[e>>18&63]+yn[e>>12&63]+yn[e>>6&63]+yn[e&63]}return a?s.slice(0,a-3)+"===".substring(a):s},ni=Ml?t=>btoa(t):zt?t=>Buffer.from(t,"binary").toString("base64"):na,ei=zt?t=>Buffer.from(t).toString("base64"):t=>{let n=[];for(let r=0,i=t.length;r<i;r+=4096)n.push(ie.apply(null,t.subarray(r,r+4096)));return ni(n.join(""))},pr=(t,e=!1)=>e?ea(ei(t)):ei(t),$l=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?ie(192|e>>>6)+ie(128|e&63):ie(224|e>>>12&15)+ie(128|e>>>6&63)+ie(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return ie(240|e>>>18&7)+ie(128|e>>>12&63)+ie(128|e>>>6&63)+ie(128|e&63)}},Vl=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,ra=t=>t.replace(Vl,$l),Js=zt?t=>Buffer.from(t,"utf8").toString("base64"):Ks?t=>ei(Ks.encode(t)):t=>ni(ra(t)),qt=(t,e=!1)=>e?ea(Js(t)):Js(t),Qs=t=>qt(t,!0),_l=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Gl=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),n=e-65536;return ie((n>>>10)+55296)+ie((n&1023)+56320);case 3:return ie((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return ie((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},ia=t=>t.replace(_l,Gl),sa=t=>{if(t=t.replace(/\s+/g,""),!jl.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,n="",r,i;for(let s=0;s<t.length;)e=hr[t.charAt(s++)]<<18|hr[t.charAt(s++)]<<12|(r=hr[t.charAt(s++)])<<6|(i=hr[t.charAt(s++)]),n+=r===64?ie(e>>16&255):i===64?ie(e>>16&255,e>>8&255):ie(e>>16&255,e>>8&255,e&255);return n},ri=Bl?t=>atob(ta(t)):zt?t=>Buffer.from(t,"base64").toString("binary"):sa,aa=zt?t=>Ys(Buffer.from(t,"base64")):t=>Ys(ri(t).split("").map(e=>e.charCodeAt(0))),oa=t=>aa(ua(t)),Hl=zt?t=>Buffer.from(t,"base64").toString("utf8"):Zs?t=>Zs.decode(aa(t)):t=>ia(ri(t)),ua=t=>ta(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),ti=t=>Hl(ua(t)),Ul=t=>{if(typeof t!="string")return!1;let e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},la=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),ca=function(){let t=(e,n)=>Object.defineProperty(String.prototype,e,la(n));t("fromBase64",function(){return ti(this)}),t("toBase64",function(e){return qt(this,e)}),t("toBase64URI",function(){return qt(this,!0)}),t("toBase64URL",function(){return qt(this,!0)}),t("toUint8Array",function(){return oa(this)})},fa=function(){let t=(e,n)=>Object.defineProperty(Uint8Array.prototype,e,la(n));t("toBase64",function(e){return pr(this,e)}),t("toBase64URI",function(){return pr(this,!0)}),t("toBase64URL",function(){return pr(this,!0)})},Wl=()=>{ca(),fa()},mr={version:Xs,VERSION:Ll,atob:ri,atobPolyfill:sa,btoa:ni,btoaPolyfill:na,fromBase64:ti,toBase64:qt,encode:qt,encodeURI:Qs,encodeURL:Qs,utob:ra,btou:ia,decode:ti,isValid:Ul,fromUint8Array:pr,toUint8Array:oa,extendString:ca,extendUint8Array:fa,extendBuiltins:Wl};var vn=require("obsidian");function wn(t=!1,e,n,r,i,s){return w(this,null,function*(){s=Array.isArray(s)?s:[s];for(let a of s)yield ql(t,e,n,r,i,a)})}function ql(t=!1,e,n,r,i,s){return w(this,null,function*(){if(!s.autoclean)return;let a=yield i.getAllFileFromRepo(r,n,e,s),o=yield Zl(a,e);if(!o){let y="";return e.upload.defaultName.length>0&&(e.upload.defaultName.length>0?y=c.t("deletion.defaultFolder"):e.upload.behavior==="yaml"&&e.upload.rootFolder.length===0&&(y=c.t("deletion.rootFolder")),t||new vn.Notice("Error : "+y)),!1}let l=i.getAllFileWithPath().map(y=>({converted:y.converted,repo:y.repoFrontmatter})),d=0,h=0;for(let y of o){let T=l.some(E=>E.converted===y.file),C=y.file.trim().endsWith(".md")?!l.some(E=>E.converted===y.file&&JSON.stringify(E.repo)==JSON.stringify(s)):!1;if(T?C:!0){let E=y.file.contains(e.upload.folderNote.rename)?yield Yl(n,e,y.file,s):!1;try{E||(V(`trying to delete file : ${y.file} from ${s.owner}/${s.repo}`,e),(yield n.request("DELETE /repos/{owner}/{repo}/contents/{path}",{owner:s.owner,repo:s.repo,path:y.file,message:`DELETE FILE : ${y.file}`,sha:y.sha,branch:r})).status===200?d++:h++)}catch(R){R instanceof DOMException||V(R,e)}}}let D=c.t("deletion.noFile"),g="";return d>0&&(D=c.t("deletion.success",{nb:d.toString()})),h>0&&(g=c.t("deletion.failed",{nb:h.toString()})),t||new vn.Notice(D+g),!0})}function zl(t,e){let n=e.upload.autoclean.excluded;if(n.length>0)for(let r of n){let i=r.match(/^\/(.*)\/[igmsuy]*$/),s=i?new RegExp(i[1],i[2]):null;if(s&&s.test(t))return!0;if(t.trim().includes(r.trim())&&r.length>0)return!0}return!1}function Zl(t,e){return w(this,null,function*(){let n=[];for(let r of t){let i=e.upload.behavior,s=e.upload.rootFolder,a=e.upload.defaultName,o=e.embed.folder;if(i==="yaml"&&s.length===0||a.length===0)return null;(r.file.includes(a)||i==="yaml"&&r.file.includes(s)||o.length>0&&r.file.includes(o))&&!zl(r.file,e)&&(he(r.file)||r.file.match("md$"))&&n.push(r)}return n})}function Kl(t){let e=t.split("---")[1],n=(0,vn.parseYaml)(e);return Ws(n)}function Yl(t,e,n,r){return w(this,null,function*(){try{let i=yield t.request("GET /repos/{owner}/{repo}/contents/{path}",{owner:r.owner,repo:r.repo,path:n});if(i.status===200){let s=mr.decode(i.data.content),a=Kl(s);return a.index==="true"||a.delete==="false"||!a.share}}catch(i){if(!(i instanceof DOMException))return V(i,e),!1}})}var Zt=class{constructor(e,n,r=!1){this.attachment=!1;this.statusBarItem=e,this.counter=0,this.numberOfNotesToPublish=n,this.attachment=r,this.statusBarItem.createEl("span",{text:""});let i=c.t("common.files");this.attachment&&(i=c.t("common.attachments"));let s=c.t("statusBar.markedForSharing",{nb:this.numberOfNotesToPublish,type:i});this.status=this.statusBarItem.createEl("span",{text:`${s}`})}increment(){let e=c.t("common.files");this.attachment&&(e=c.t("common.attachments"));let n=c.t("statusBar.sharing",{type:e});this.status.setText(c.t("statusBar.counter",{msg:n,counter:++this.counter,nb:this.numberOfNotesToPublish}))}finish(e){let n=c.t("statusBar.success",{action:c.t("common.published"),type:c.t("common.files")});this.attachment&&(n=c.t("statusBar.success",{action:c.t("common.shared"),type:c.t("common.attachments")})),this.status.setText(c.t("statusBar.counter",{msg:n,counter:this.counter,nb:this.numberOfNotesToPublish})),setTimeout(()=>{this.statusBarItem.remove()},e)}error(){this.statusBarItem.remove()}};var ct=require("obsidian");var Gi=hn($i());function Vi(t,e,n){let r=e.convertWiki,i=e.attachment,s=e.links;if(zs(e))return t;let a=/!?\[\[.*?\]\]/g,o=t.match(a);if(o){let u=/(\[\[).*?([\]|])/;for(let l of o){let d=l.match(u),h=l.startsWith("!")?"!":"",D=l.startsWith("!");if(d){let g=l,y=d[0].replaceAll("[","").replaceAll("|","").replaceAll("]","").replaceAll("\\",""),T=d[0].replaceAll("[","").replaceAll("|","").replaceAll("]","").replaceAll("\\","").replaceAll("../","").replaceAll("./","").replace(/#.*/,""),C=n.find(x=>x.linkFrom.replace(/#.*/,"")===T);if(C){let x;C.linked.extension!=="md"?x=C.altText.length>0?C.altText:"":x=C.altText.length>0?C.altText:C.linked.basename;let E=e.removeEmbed&&D&&C.linked.extension==="md";if(r){let R=l.match(/(\|).*(]])/),v=y.split("/"),A=Ho(R,v,y.split(".").at(-1),y);g=_o(y,h,A)}C.linked.extension==="md"&&!s&&!D&&(g=x),(!i&&he(C.linked.extension)||E)&&(g=""),t=t.replace(l,g)}else if(!y.startsWith("http")){let x=l.match(/(\|).*(]])/),E=y.split("/"),R=Ho(x,E,y.split(".").at(-1),y),v=!he(y.trim())&&e.removeEmbed&&D;r&&(g=_o(y,h,R)),!he(y.trim())&&!s&&!D&&(g=R),(!i&&he(y.trim())||v)&&(g=""),t=t.replace(l,g)}}}}return t}function _o(t,e,n){let r=he(t.trim())?t.trim():t.replace(/#.*/,"").trim()+".md",i=t.match(/(#.*)/)?t.match(/(#.*)/)[0].replaceAll(" ","%20"):"",s=encodeURI(r);return`${e}[${n}](${s}${i})`}function id(t,e){return t.match(/\[{2}.*\]{2}/)&&!t.match(/(\|).*(]])/)?t.replace("|","").replace("]]",`|${e.altText}]]`):t}function Go(t){return t.replace(/[/\-\\^$*+?.()|[\]{}]/g,"\\$&")}function _i(t,e,n,r,i,s,a,o,u){return w(this,null,function*(){if(!u.convertInternalLinks)return t;for(let l of n){let d=yield Gs(i,l,r,e,s,a,o,u);d=d.replace(".md","");let h=l.anchor?l.anchor:"",D=Go(l.linkFrom.replace(l.anchor,"")).replaceAll(" ","%20")+h.replace("^","\\^"),g=Go(l.linkFrom),y=new RegExp(`(\\[{2}${g}(\\\\?\\|.*)?\\]{2})|(\\[.*\\]\\((${g}|${D})\\))`,"g"),T=t.match(y);if(T)for(let C of T){let x=new RegExp(`((${g})|(${D}))`),E=d;l.anchor&&(d=d.replace(/#.*/,""),E+=l.anchor);let R=C.replace(x,E);C.match(/\[.*\]\(.*\)/)&&(l.linked.extension==="md"&&(d=d.replaceAll(" ","%20")+h,d=d.replace(/(\.md)?(#.*)/,".md$2"),d=!d.match(/(#.*)/)&&!d.endsWith(".md")?d+".md":d),R=`[${C.match(/\[(.*)\]/)[1]}](${d})`),R=id(R,l),t=t.replace(C,R)}}return t})}function Ho(t,e,n,r){return t?t[0].replace("]]","").replace("|",""):n==="md"?e.length>1?e[e.length-1]:e[0]:r.split("/").at(-1)}function sd(t,e,n){try{return t=t.replace(/^\s*\\\s*$/gim,"<br/>"),n.hardbreak&&(t=t.replace(/\n/gm,`  
`)),t}catch(r){return V(r,e),t}}function Wo(t,e){return w(this,null,function*(){let n=t.split("---")[1],r=(0,ct.parseYaml)(n);r.tag&&(e=[...new Set([...e,...r.tag.map(a=>a.replaceAll("/","_"))])],delete r.tag),r.tags?r.tags=[...new Set([...r.tags.map(a=>a.replaceAll("/","_")),...e])]:r.tags=e;let i=(0,ct.stringifyYaml)(r),s=t.split("---").slice(2).join("---");return`---
${i}---
${s}`})}function ad(t,e,n,r,i,s){return w(this,null,function*(){var h;if(!t.conversion.tags.inline)return s;let a=(h=n.getFileCache(e))==null?void 0:h.tags,o=a?a.map(D=>D.tag.replace("#","").replaceAll("/","_")):[],u=(0,ct.parseFrontMatterTags)(i),l=u?u.map(D=>D.replace("#","").replaceAll("/","_")):[],d=[...new Set([...o,...l])];return d.length>0?yield Wo(s,d):s})}function Uo(t,e){let r=(s=>/([^/\\.]*)(\..*)?$/.exec(s)[1])(t.path).toString(),i=t.display?t.display.toString():r;return!e.conversion.tags.exclude.includes(i)&&!e.conversion.tags.fields.includes(r)?i:null}function od(t,e,n,r){return w(this,null,function*(){if(e.conversion.tags.fields.length===0||!r.plugins.enabledPlugins.has("dataview"))return t;let s=yield(0,Gi.getAPI)().page(n.path),a=[];for(let o of e.conversion.tags.fields){let u=s[o];if(u)if(u.constructor.name==="Link"){let l=Uo(u,e);a.push(l)}else if(u.constructor.name==="Array")for(let l of u){let d=l;l.constructor.name==="Link"?(d=Uo(l,e),a.push(d)):e.conversion.tags.exclude.includes(d.toString())||a.push(d.toString())}else e.conversion.tags.exclude.includes(u.toString())||a.push(u.toString())}return a.length>0?yield Wo(t,a.filter(Boolean)):t})}function ud(t,e,n,r,i,s,a,o,u){return w(this,null,function*(){if(!r.plugins.enabledPlugins.has("dataview"))return t;let l=r.vault,d=t,h=new RegExp("```dataview(.+?)```","gms"),D=(0,Gi.getAPI)(),g=t.matchAll(h);if(!g)return;let y=s.dataview;for(let T of g)try{let C=T[0],x=T[1],E=y?yield D.tryQueryMarkdown(x,e):"",R=_s(E,n,l);E=yield _i(E,n,R,i,o,l,a,u,s),E=Vi(E,s,R),d=d.replace(C,E)}catch(C){return V(C,n),new ct.Notice(c.t("error.dataview")),T[0]}return d})}function qo(t,e,n,r,i,s,a,o,u,l,d){return w(this,null,function*(){return t=nr(t,e,!1),t=yield ad(e,r,s,u.app,a,t),t=yield ud(t,r.path,e,u.app,s,n,a,r,d),t=yield od(t,e,r,u.app),t=sd(t,e,n),t=yield _i(t,e,o,s,r,l,a,d,n),t=Vi(t,n,o),t=nr(t,e,!0),t})}var Mn=class{constructor(e,n,r,i,s){this.vault=e,this.metadataCache=n,this.settings=r,this.octokit=i,this.plugin=s}statusBarForEmbed(e,n,r,i,s,a){return w(this,null,function*(){if(e.length>0)if(e.length>1){let o=this.plugin.addStatusBarItem(),u=new Zt(o,e.length,!0);try{for(let l of e)try{n.includes(l)||(l.extension==="md"&&i?yield this.publish(l,!1,r,a,n,!0):he(l.extension)&&s.attachment&&(yield this.uploadImage(l,r,s,a),n.push(l))),u.increment()}catch(d){new Tt.Notice(c.t("error.unablePublishNote",{file:l.name})),console.error(d)}u.finish(8e3)}catch(l){V(l,this.settings),new Tt.Notice(c.t("error.errorPublish",{repoInfo:`${a.owner}:${a.repo}/${r}`})),u.error()}}else{let o=e[0];n.includes(o)||(o.extension==="md"&&i?yield this.publish(o,!1,r,a,n,!0):he(o.extension)&&s.attachment&&(yield this.uploadImage(o,r,s,a),n.push(o)))}return n})}publish(o){return w(this,arguments,function*(e,n=!1,r,i,s=[],a=!1){let u=new an(this.vault,this.metadataCache,this.settings,this.octokit,this.plugin),l=this.metadataCache.getFileCache(e).frontmatter,d=or(ee(this.settings,l),this.settings);if(!Xe(l,this.settings,e)||s.includes(e)||!sr(ee(this.settings,l),i)||!d)return!1;try{V("Publishing file: "+e.path,this.settings),s.push(e);let h=ir(l,this.settings),D=u.getSharedEmbed(e,h);D=yield u.getMetadataLinks(e,D,l,h);let g=u.getLinkedByEmbedding(e),y=yield app.vault.cachedRead(e);y=yield qo(y,this.settings,h,e,app,this.metadataCache,l,g,this.plugin,this.vault,i);let T=Ue(e,this.settings,this.metadataCache,this.vault);i=Array.isArray(i)?i:[i];let C="";for(let R of i)C+=`[${R.owner}/${R.repo}/${R.branch}] `;let x=`Publishing ${e.name} to ${C}`;V(x,this.settings);let E=[];for(let R of i)E.push(yield this.uploadMultiple(e,y,r,h,T,R,D,s,a,u,n));return!E.every(R=>R===!1)}catch(h){return V(h,this.settings),!1}})}uploadMultiple(e,n,r,i,s,a,o,u,l,d,h){return w(this,null,function*(){return V(`Upload ${e.name}:${s} on ${a.owner}/${a.repo}:${r}`,this.settings),yield this.uploadText(n,s,e.name,r,a),yield this.statusBarForEmbed(o,u,r,l,i,a),h&&a.autoclean&&(yield wn(!0,this.settings,this.octokit,r,d,a)),!0})}upload(e,n,r="",i,s){return w(this,null,function*(){if(!s.repo)throw new Tt.Notice("Config error : You need to define a github repo in the plugin settings"),{};if(!s.owner)throw new Tt.Notice("Config error : You need to define your github username in the plugin settings"),{};let a=this.octokit,o=`PUSH NOTE : ${r}`;he(n)&&(r=n.split("/")[n.split("/").length-1],o=`PUSH ATTACHMENT : ${r}`);let u={owner:s.owner,repo:s.repo,path:n,message:`Adding ${r}`,content:e,sha:"",branch:i};try{let l=yield a.request("GET /repos/{owner}/{repo}/contents/{path}",{owner:s.owner,repo:s.repo,path:n,ref:i});l.status===200&&l.data.type==="file"&&(u.sha=l.data.sha)}catch(l){V("The 404 error is normal ! It means that the file does not exist yet. Don't worry \u2764\uFE0F.",this.settings)}u.message=o,yield a.request("PUT /repos/{owner}/{repo}/contents/{path}",u)})}uploadImage(e,n,r,i){return w(this,null,function*(){let s=yield this.vault.readBinary(e),a=(0,Tt.arrayBufferToBase64)(s),o=Dn(e,this.settings,r);yield this.upload(a,o,"",n,i)})}uploadText(e,n,r="",i,s){return w(this,null,function*(){try{let a=mr.encode(e).toString();yield this.upload(a,n,r,i,s)}catch(a){console.error(a)}})}uploadMetadataExtractorFiles(e,n,r){return w(this,null,function*(){if(e){for(let i of Object.values(e))if(i){let s=yield app.vault.adapter.read(i),a=this.settings.upload.metadataExtractorPath+"/"+i.split("/").pop();r=Array.isArray(r)?r:[r];for(let o of r)yield this.uploadText(s,a,i.split("/").pop(),n,o)}}})}workflowGestion(e){return w(this,null,function*(){let n=!1;if(this.settings.github.worflow.workflowName.length===0)return!1;{let r=this.octokit;for(yield r.request("POST /repos/{owner}/{repo}/actions/workflows/{workflow_id}/dispatches",{owner:e.owner,repo:e.repo,workflow_id:this.settings.github.worflow.workflowName,ref:e.branch});!n;){yield sleep(1e4);let i=yield r.request("GET /repos/{owner}/{repo}/actions/runs",{owner:e.owner,repo:e.repo});if(i.data.workflow_runs.length>0&&i.data.workflow_runs.find(a=>a.name===this.settings.github.worflow.workflowName.replace(".yml","")).status==="completed")return n=!0,!0}}})}};var zo=hn($i());var an=class extends Mn{constructor(n,r,i,s,a){super(n,r,i,s,a);this.vault=n,this.metadataCache=r,this.settings=i,this.octokit=s,this.plugin=a}getSharedFiles(){let n=this.vault.getMarkdownFiles(),r=[],i=this.settings.plugin.shareKey;for(let s of n)try{let a=this.metadataCache.getCache(s.path).frontmatter;a&&a[i]===!0&&r.push(s)}catch(a){}return r}getAllFileWithPath(){let n=this.vault.getFiles(),r=[],i=this.settings.plugin.shareKey;for(let s of n)if(he(s.extension)){let a=Dn(s,this.settings,null);r.push({converted:a,real:s.path})}else if(s.extension=="md"){let a=this.metadataCache.getCache(s.path).frontmatter;if(a&&a[i]===!0){let o=Ue(s,this.settings,this.metadataCache,this.vault);r.push({converted:o,real:s.path,repoFrontmatter:ee(this.settings,a)})}}return r}getLinkedByEmbedding(n){let r=this.getLinkedFiles(n),i=this.metadataCache.getFileCache(n).embeds;if(i!=null)for(let s of i)try{let a=this.metadataCache.getFirstLinkpathDest(s.link.replace(/#.*/,""),n.path);if(a!==null){let o=s.displayText!==a.path.replace(".md","")?s.displayText:a.basename,u;if(this.settings.upload.frontmatterTitle.enable){let d=this.metadataCache.getCache(a.path).frontmatter;d&&d[this.settings.upload.frontmatterTitle.key]&&(u=d[this.settings.upload.frontmatterTitle.key],o===a.basename&&(o=u))}let l={linked:a,linkFrom:s.link,altText:o,destinationFilePath:u};s.link.includes("#")&&(l.anchor="#"+s.link.split("#")[1]),r.push(l)}}catch(a){}return[...new Set(r)]}getLinkedFiles(n){let r=this.metadataCache.getCache(n.path).links,i=[];if(r!=null){for(let s of r)try{let a=this.metadataCache.getFirstLinkpathDest(s.link.replace(/#.*/,""),n.path);if(a){let o=s.displayText!==a.path.replace(".md","")?s.displayText:a.basename;s.original.match(/\[.*\]\(.*\)/)&&(o=s.original.match(/\[(.*)\]/)[1]);let u;if(this.settings.upload.frontmatterTitle.enable){let d=this.metadataCache.getCache(a.path).frontmatter;d&&d[this.settings.upload.frontmatterTitle.key]&&(u=d[this.settings.upload.frontmatterTitle.key],o===a.basename&&(o=u))}let l={linked:a,linkFrom:s.link,altText:o,destinationFilePath:u};s.link.includes("#")&&(l.anchor="#"+s.link.split("#")[1]),i.push(l)}}catch(a){V(a,this.settings),V("Error with this links : "+s.link,this.settings)}return[...new Set(i)]}return[]}getSharedEmbed(n,r){let i=this.metadataCache.getCache(n.path).embeds,s=[];if(i!=null){for(let a of i)try{let o=this.metadataCache.getFirstLinkpathDest(a.link.replace(/#(.*)/,""),n.path);s.push(this.imageSharedOrNote(o,r))}catch(o){V(o,this.settings),V("Error with this file : "+a.displayText,this.settings)}return[...new Set(s)].filter(a=>a!==null)}return[]}checkExcludedFolder(n){let r=this.settings.plugin.excludedFolder;if(r.length>0)for(let i=0;i<r.length;i++){let s=r[i].match(/^\/(.*)\/[igmsuy]*$/),a=s?new RegExp(s[1],s[2]):null;if(a&&a.test(n.path))return!0;if(n.path.contains(r[i].trim()))return!0}return!1}getLastEditedTimeRepo(n,r,i){return w(this,null,function*(){let a=(yield n.request("GET /repos/{owner}/{repo}/commits",{owner:i.github.user,repo:i.github.repo,path:r.file})).data[0];return new Date(a.commit.committer.date)})}getAllFileFromRepo(n,r,i,s){return w(this,null,function*(){let a=[];try{let o=yield r.request("GET /repos/{owner}/{repo}/git/trees/{tree_sha}",{owner:s.owner,repo:s.repo,tree_sha:n,recursive:"true"});if(o.status===200){let u=o.data.tree;for(let l of u){let d=h=>/([^/\\.]*)(\..*)?$/.exec(h)[1];l.type==="blob"&&d(l.path).length>0&&a.push({file:l.path,sha:l.sha})}}}catch(o){V(o,i)}return a})}getNewFiles(n,r,i){let s=[];for(let a of n)if(!r.some(o=>o.file===a.converted.trim())){let o=i.getAbstractFileByPath(a.real.trim());o&&o instanceof Hi.TFile&&o.extension==="md"&&s.push(o)}return s}getImageByPath(n,r,i){r.constructor.name==="Link"&&(r=r.path),n.constructor.name==="Link"&&(n=n.path);let s=this.metadataCache.getFirstLinkpathDest(r,n);return s!==null?this.imageSharedOrNote(s,i):null}imageSharedOrNote(n,r){let i=r.attachment,s=r.embed;return he(n.extension)&&i||s&&n.extension==="md"?n:null}getMetadataLinks(n,r,i,s){return w(this,null,function*(){for(let a of this.settings.embed.keySendFile)i[a]!=null&&this.metadataCache.getFirstLinkpathDest(i[a],n.path)!==null&&r.push(this.imageSharedOrNote(n,s));if(this.plugin.app.plugins.enabledPlugins.has("dataview")){let o=yield(0,zo.getAPI)().page(n.path);for(let u of this.settings.embed.keySendFile){let l=o[u];if(l!=null)if(l.constructor.name==="Array")for(let d of l)r.push(this.getImageByPath(d,l,s));else r.push(this.getImageByPath(l,l,s))}}return[...new Set(r)].filter(a=>a!=null)})}getEditedFiles(n,r,i,s){return w(this,null,function*(){for(let a of n)if(r.some(o=>o.file===a.converted.trim())){let o=r.find(d=>d.file===a.converted.trim()),u=yield this.getLastEditedTimeRepo(this.octokit,o,this.settings),l=i.getAbstractFileByPath(a.real.trim());if(l&&l instanceof Hi.TFile&&l.extension==="md"){let d=new Date(l.stat.mtime);d>u&&(V(`edited file : ${l.path} / ${d} vs ${u}`,this.settings),s.push(l))}}return s})}};var rt=require("obsidian");var Ar=class extends an{constructor(n,r,i,s,a){super(i,s,n,r,a);this.settings=n,this.octokit=r,this.plugin=a}newBranch(n,r){return w(this,null,function*(){r=Array.isArray(r)?r:[r];for(let i of r)yield this.newBranchOnRepo(n,i)})}newBranchOnRepo(n,r){return w(this,null,function*(){let s=(yield this.octokit.request("GET /repos/{owner}/{repo}/branches",{owner:r.owner,repo:r.repo})).data.find(a=>a.name===r.branch);try{let a=s.commit.sha,o=yield this.octokit.request("POST /repos/{owner}/{repo}/git/refs",{owner:r.owner,repo:r.repo,ref:"refs/heads/"+n,sha:a});return V(c.t("publish.branch.success",{branchStatus:o.status,repoInfo:r.repo}),this.settings),o.status===201}catch(a){try{V(a,this.settings);let u=(yield this.octokit.request("GET /repos/{owner}/{repo}/branches",{owner:r.owner,repo:r.repo})).data.find(l=>l.name===n);return V(c.t("publish.branch.alreadyExists",{branchName:u.name,repoInfo:r.repo}),this.settings),!!u}catch(o){return V(o,this.settings),!1}}})}pullRequestOnRepo(n,r){return w(this,null,function*(){try{return(yield this.octokit.request("POST /repos/{owner}/{repo}/pulls",{owner:r.owner,repo:r.repo,title:c.t("publish.branch.prMessage",{branchName:n}),body:"",head:n,base:r.branch})).data.number}catch(i){V(i,this.settings);try{return(yield this.octokit.request("GET /repos/{owner}/{repo}/pulls",{owner:r.owner,repo:r.repo,state:"open"})).data[0].number}catch(s){return V(c.t("publish.branch.error",{error:s,repoInfo:r.repo}),this.settings),0}}})}deleteBranchOnRepo(n,r){return w(this,null,function*(){try{return(yield this.octokit.request("DELETE /repos/{owner}/{repo}/git/refs/heads/"+n,{owner:r.owner,repo:r.repo})).status===200}catch(i){return!1}})}mergePullRequestOnRepo(n,r,i){return w(this,null,function*(){let s=this.plugin.settings.github.worflow.customCommitMsg.trim().length>0?`${this.plugin.settings.github.worflow.customCommitMsg} #${r}`:`[PUBLISHER] Merge #${r}`;try{return(yield this.octokit.request("PUT /repos/{owner}/{repo}/pulls/{pull_number}/merge",{owner:i.owner,repo:i.repo,pull_number:r,commit_title:s,merge_method:"squash"})).status===200}catch(a){return V(a,this.settings),new rt.Notice(c.t("error.mergeconflic")),!1}})}updateRepository(n,r){return w(this,null,function*(){r=Array.isArray(r)?r:[r];let i=[];for(let s of r)i.push(yield this.updateRepositoryOnOne(n,s));return!i.every(s=>s===!1)})}updateRepositoryOnOne(n,r){return w(this,null,function*(){try{let i=yield this.pullRequestOnRepo(n,r);return this.plugin.settings.github.automaticallyMergePR&&i!==0?(yield this.mergePullRequestOnRepo(n,i,r))?(yield this.deleteBranchOnRepo(n,r),!0):!1:!0}catch(i){V(i,this.settings);let s=`${r.owner}/${r.repo}`;return new rt.Notice(c.t("error.errorConfig",{repoInfo:s})),!1}})}checkRepository(n,r=!0){return w(this,null,function*(){n=Array.isArray(n)?n:[n];for(let i of n)try{(yield this.octokit.request("GET /repos/{owner}/{repo}",{owner:i.owner,repo:i.repo}).catch(a=>{a.status===404?new rt.Notice(c.t("commands.checkValidity.inRepo.error404",{repoInfo:`${i.owner}/${i.repo}`})):a.status===403?new rt.Notice(c.t("commands.checkValidity.inRepo.error403",{repoInfo:`${i.owner}/${i.repo}`})):a.status===301&&new rt.Notice(c.t("commands.checkValidity.inRepo.error301",{repoInfo:`${i.owner}/${i.repo}`}))})).status===200&&(V(c.t("commands.checkValidity.repoExistsTestBranch",{repoOwner:i.owner,repoName:i.repo,main:i.branch}),this.settings),(yield this.octokit.request("GET /repos/{owner}/{repo}/branches/{branch}",{owner:i.owner,repo:i.repo,branch:i.branch}).catch(o=>{o.status===404?new rt.Notice(c.t("commands.checkValidity.inBranch.error404",{repoInfo:`${i.owner}/${i.repo}`,branchInfo:i.branch})):o.status===403&&new rt.Notice(c.t("commands.checkValidity.inBranch.error403",{repoInfo:`${i.owner}/${i.repo}`,branchInfo:i.branch}))})).status===200&&!r&&new rt.Notice(c.t("commands.checkValidity.success",{repoInfo:`${i.owner}/${i.repo}/${i.branch}`})))}catch(s){break}})}};function ft(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&"version"in process?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}var Tu=hn(ou());function uu(t){return Object.prototype.toString.call(t)==="[object Object]"}function Rr(t){var e,n;return uu(t)===!1?!1:(e=t.constructor,e===void 0?!0:(n=e.prototype,!(uu(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}function pd(t){return t?Object.keys(t).reduce((e,n)=>(e[n.toLowerCase()]=t[n],e),{}):{}}function fu(t,e){let n=Object.assign({},t);return Object.keys(e).forEach(r=>{Rr(e[r])?r in t?n[r]=fu(t[r],e[r]):Object.assign(n,{[r]:e[r]}):Object.assign(n,{[r]:e[r]})}),n}function lu(t){for(let e in t)t[e]===void 0&&delete t[e];return t}function Wi(t,e,n){if(typeof e=="string"){let[i,s]=e.split(" ");n=Object.assign(s?{method:i,url:s}:{url:i},n)}else n=Object.assign({},e);n.headers=pd(n.headers),lu(n),lu(n.headers);let r=fu(t||{},n);return t&&t.mediaType.previews.length&&(r.mediaType.previews=t.mediaType.previews.filter(i=>!r.mediaType.previews.includes(i)).concat(r.mediaType.previews)),r.mediaType.previews=r.mediaType.previews.map(i=>i.replace(/-preview/,"")),r}function md(t,e){let n=/\?/.test(t)?"&":"?",r=Object.keys(e);return r.length===0?t:t+n+r.map(i=>i==="q"?"q="+e.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(e[i])}`).join("&")}var gd=/\{[^}]+\}/g;function Dd(t){return t.replace(/^\W+|\W+$/g,"").split(/,/)}function bd(t){let e=t.match(gd);return e?e.map(Dd).reduce((n,r)=>n.concat(r),[]):[]}function cu(t,e){return Object.keys(t).filter(n=>!e.includes(n)).reduce((n,r)=>(n[r]=t[r],n),{})}function du(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(e){return/%[0-9A-Fa-f]/.test(e)||(e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]")),e}).join("")}function ln(t){return encodeURIComponent(t).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function jn(t,e,n){return e=t==="+"||t==="#"?du(e):ln(e),n?ln(n)+"="+e:e}function un(t){return t!=null}function Ui(t){return t===";"||t==="&"||t==="?"}function yd(t,e,n,r){var i=t[n],s=[];if(un(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),r&&r!=="*"&&(i=i.substring(0,parseInt(r,10))),s.push(jn(e,i,Ui(e)?n:""));else if(r==="*")Array.isArray(i)?i.filter(un).forEach(function(a){s.push(jn(e,a,Ui(e)?n:""))}):Object.keys(i).forEach(function(a){un(i[a])&&s.push(jn(e,i[a],a))});else{let a=[];Array.isArray(i)?i.filter(un).forEach(function(o){a.push(jn(e,o))}):Object.keys(i).forEach(function(o){un(i[o])&&(a.push(ln(o)),a.push(jn(e,i[o].toString())))}),Ui(e)?s.push(ln(n)+"="+a.join(",")):a.length!==0&&s.push(a.join(","))}else e===";"?un(i)&&s.push(ln(n)):i===""&&(e==="&"||e==="?")?s.push(ln(n)+"="):i===""&&s.push("");return s}function vd(t){return{expand:wd.bind(null,t)}}function wd(t,e){var n=["+","#",".","/",";","?","&"];return t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(r,i,s){if(i){let o="",u=[];if(n.indexOf(i.charAt(0))!==-1&&(o=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(l){var d=/([^:\*]*)(?::(\d+)|(\*))?/.exec(l);u.push(yd(e,o,d[1],d[2]||d[3]))}),o&&o!=="+"){var a=",";return o==="?"?a="&":o!=="#"&&(a=o),(u.length!==0?o:"")+u.join(a)}else return u.join(",")}else return du(s)})}function hu(t){let e=t.method.toUpperCase(),n=(t.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),r=Object.assign({},t.headers),i,s=cu(t,["method","baseUrl","url","headers","request","mediaType"]),a=bd(n);n=vd(n).expand(s),/^http/.test(n)||(n=t.baseUrl+n);let o=Object.keys(t).filter(d=>a.includes(d)).concat("baseUrl"),u=cu(s,o);if(!/application\/octet-stream/i.test(r.accept)&&(t.mediaType.format&&(r.accept=r.accept.split(/,/).map(d=>d.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${t.mediaType.format}`)).join(",")),t.mediaType.previews.length)){let d=r.accept.match(/[\w-]+(?=-preview)/g)||[];r.accept=d.concat(t.mediaType.previews).map(h=>{let D=t.mediaType.format?`.${t.mediaType.format}`:"+json";return`application/vnd.github.${h}-preview${D}`}).join(",")}return["GET","HEAD"].includes(e)?n=md(n,u):"data"in u?i=u.data:Object.keys(u).length&&(i=u),!r["content-type"]&&typeof i<"u"&&(r["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(e)&&typeof i>"u"&&(i=""),Object.assign({method:e,url:n,headers:r},typeof i<"u"?{body:i}:null,t.request?{request:t.request}:null)}function Fd(t,e,n){return hu(Wi(t,e,n))}function pu(t,e){let n=Wi(t,e),r=Fd.bind(null,n);return Object.assign(r,{DEFAULTS:n,defaults:pu.bind(null,n),merge:Wi.bind(null,n),parse:hu})}var xd="7.0.5",Ed=`octokit-endpoint.js/${xd} ${ft()}`,Cd={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":Ed},mediaType:{format:"",previews:[]}},mu=pu(null,Cd);var Cu=hn(Du());var $n=class extends Error{constructor(e){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="Deprecation"}};var zi=hn(xu()),Sd=(0,zi.default)(t=>console.warn(t)),Od=(0,zi.default)(t=>console.warn(t)),dt=class extends Error{constructor(e,n,r){super(e),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="HttpError",this.status=n;let i;"headers"in r&&typeof r.headers<"u"&&(i=r.headers),"response"in r&&(this.response=r.response,i=r.response.headers);let s=Object.assign({},r.request);r.request.headers.authorization&&(s.headers=Object.assign({},r.request.headers,{authorization:r.request.headers.authorization.replace(/ .*$/," [REDACTED]")})),s.url=s.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=s,Object.defineProperty(this,"code",{get(){return Sd(new $n("[@octokit/request-error] `error.code` is deprecated, use `error.status`.")),n}}),Object.defineProperty(this,"headers",{get(){return Od(new $n("[@octokit/request-error] `error.headers` is deprecated, use `error.response.headers`.")),i||{}}})}};var Td="6.2.3";function Pd(t){return t.arrayBuffer()}function Eu(t){let e=t.request&&t.request.log?t.request.log:console;(Rr(t.body)||Array.isArray(t.body))&&(t.body=JSON.stringify(t.body));let n={},r,i;return(t.request&&t.request.fetch||globalThis.fetch||Cu.default)(t.url,Object.assign({method:t.method,body:t.body,headers:t.headers,redirect:t.redirect},t.request)).then(async a=>{i=a.url,r=a.status;for(let o of a.headers)n[o[0]]=o[1];if("deprecation"in n){let o=n.link&&n.link.match(/<([^>]+)>; rel="deprecation"/),u=o&&o.pop();e.warn(`[@octokit/request] "${t.method} ${t.url}" is deprecated. It is scheduled to be removed on ${n.sunset}${u?`. See ${u}`:""}`)}if(!(r===204||r===205)){if(t.method==="HEAD"){if(r<400)return;throw new dt(a.statusText,r,{response:{url:i,status:r,headers:n,data:void 0},request:t})}if(r===304)throw new dt("Not modified",r,{response:{url:i,status:r,headers:n,data:await Zi(a)},request:t});if(r>=400){let o=await Zi(a);throw new dt(Nd(o),r,{response:{url:i,status:r,headers:n,data:o},request:t})}return Zi(a)}}).then(a=>({status:r,url:i,headers:n,data:a})).catch(a=>{throw a instanceof dt||a.name==="AbortError"?a:new dt(a.message,500,{request:t})})}async function Zi(t){let e=t.headers.get("content-type");return/application\/json/.test(e)?t.json():!e||/^text\/|charset=utf-8$/.test(e)?t.text():Pd(t)}function Nd(t){return typeof t=="string"?t:"message"in t?Array.isArray(t.errors)?`${t.message}: ${t.errors.map(JSON.stringify).join(", ")}`:t.message:`Unknown error: ${JSON.stringify(t)}`}function Ki(t,e){let n=t.defaults(e);return Object.assign(function(i,s){let a=n.merge(i,s);if(!a.request||!a.request.hook)return Eu(n.parse(a));let o=(u,l)=>Eu(n.parse(n.merge(u,l)));return Object.assign(o,{endpoint:n,defaults:Ki.bind(null,n)}),a.request.hook(o,a)},{endpoint:n,defaults:Ki.bind(null,n)})}var Vn=Ki(mu,{headers:{"user-agent":`octokit-request.js/${Td} ${ft()}`}});var Ad="5.0.5";function Rd(t){return`Request failed due to following response errors:
`+t.errors.map(e=>` - ${e.message}`).join(`
`)}var Yi=class extends Error{constructor(e,n,r){super(Rd(r)),this.request=e,this.headers=n,this.response=r,this.name="GraphqlResponseError",this.errors=r.errors,this.data=r.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}},Ld=["method","baseUrl","url","headers","request","query","mediaType"],Bd=["query","method","url"],ku=/\/api\/v3\/?$/;function Md(t,e,n){if(n){if(typeof e=="string"&&"query"in n)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(let a in n)if(Bd.includes(a))return Promise.reject(new Error(`[@octokit/graphql] "${a}" cannot be used as variable name`))}let r=typeof e=="string"?Object.assign({query:e},n):e,i=Object.keys(r).reduce((a,o)=>Ld.includes(o)?(a[o]=r[o],a):(a.variables||(a.variables={}),a.variables[o]=r[o],a),{}),s=r.baseUrl||t.endpoint.DEFAULTS.baseUrl;return ku.test(s)&&(i.url=s.replace(ku,"/api/graphql")),t(i).then(a=>{if(a.data.errors){let o={};for(let u of Object.keys(a.headers))o[u]=a.headers[u];throw new Yi(i,o,a.data)}return a.data.data})}function Ji(t,e){let n=t.defaults(e);return Object.assign((i,s)=>Md(n,i,s),{defaults:Ji.bind(null,n),endpoint:n.endpoint})}var dD=Ji(Vn,{headers:{"user-agent":`octokit-graphql.js/${Ad} ${ft()}`},method:"POST",url:"/graphql"});function Su(t){return Ji(t,{method:"POST",url:"/graphql"})}var Id=/^v1\./,jd=/^ghs_/,$d=/^ghu_/;async function Vd(t){let e=t.split(/\./).length===3,n=Id.test(t)||jd.test(t),r=$d.test(t);return{type:"token",token:t,tokenType:e?"app":n?"installation":r?"user-to-server":"oauth"}}function _d(t){return t.split(/\./).length===3?`bearer ${t}`:`token ${t}`}async function Gd(t,e,n,r){let i=e.endpoint.merge(n,r);return i.headers.authorization=_d(t),e(i)}var Ou=function(e){if(!e)throw new Error("[@octokit/auth-token] No token passed to createTokenAuth");if(typeof e!="string")throw new Error("[@octokit/auth-token] Token passed to createTokenAuth is not a string");return e=e.replace(/^(token|bearer) +/i,""),Object.assign(Vd.bind(null,e),{hook:Gd.bind(null,e)})};var Pu="4.2.0",Nt=class{constructor(e={}){let n=new Tu.Collection,r={baseUrl:Vn.endpoint.DEFAULTS.baseUrl,headers:{},request:Object.assign({},e.request,{hook:n.bind(null,"request")}),mediaType:{previews:[],format:""}};if(r.headers["user-agent"]=[e.userAgent,`octokit-core.js/${Pu} ${ft()}`].filter(Boolean).join(" "),e.baseUrl&&(r.baseUrl=e.baseUrl),e.previews&&(r.mediaType.previews=e.previews),e.timeZone&&(r.headers["time-zone"]=e.timeZone),this.request=Vn.defaults(r),this.graphql=Su(this.request).defaults(r),this.log=Object.assign({debug:()=>{},info:()=>{},warn:console.warn.bind(console),error:console.error.bind(console)},e.log),this.hook=n,e.authStrategy){let{authStrategy:s,...a}=e,o=s(Object.assign({request:this.request,log:this.log,octokit:this,octokitOptions:a},e.auth));n.wrap("request",o.hook),this.auth=o}else if(!e.auth)this.auth=async()=>({type:"unauthenticated"});else{let s=Ou(e.auth);n.wrap("request",s.hook),this.auth=s}this.constructor.plugins.forEach(s=>{Object.assign(this,s(this,e))})}static defaults(e){return class extends this{constructor(...r){let i=r[0]||{};if(typeof e=="function"){super(e(i));return}super(Object.assign({},e,i,i.userAgent&&e.userAgent?{userAgent:`${i.userAgent} ${e.userAgent}`}:null))}}}static plugin(...e){var n;let r=this.plugins;return n=class extends this{},n.plugins=r.concat(e.filter(s=>!r.includes(s))),n}};Nt.VERSION=Pu;Nt.plugins=[];var Q=require("obsidian");function _n(t,e,n,r,i,s,a,o=!0){return w(this,null,function*(){let u=new Zt(r,a.length);try{let l=0;if(a.length>0){let d=a.map(g=>g.name);if(o){if(!xt(i,t,e,s))return!1;yield t.newBranch(i,s)}for(let g=0;g<a.length;g++)try{let y=a[g];u.increment(),yield t.publish(y,!1,i,s)}catch(y){l++,new Q.Notice(c.t("error.unablePublishNote",{file:a[g].name}))}u.finish(8e3);let h=`${d.length-l} notes`;if(yield wn(!0,e,n,i,t,s),e.upload.metadataExtractorPath.length>0&&Q.Platform.isDesktop){let g=yield Qr(app,e);g&&(yield t.uploadMetadataExtractorFiles(g,i,s))}(yield t.updateRepository(i,s))?yield Xr(t,h,e,s):new Q.Notice(c.t("error.errorPublish",{repoInfo:e.github.repo}))}}catch(l){console.error(l),new Q.Notice(c.t("error.unablePublishMultiNotes")),u.error()}})}function Nu(t,e,n,r,i){return w(this,null,function*(){try{if(new Q.Notice(c.t("informations.startingClean",{repoInfo:e.github.repo})),!xt(r,t,e,i))return!1;yield t.newBranch(r,i),yield wn(!1,e,n,r,t,i),yield t.updateRepository(r,i)}catch(s){console.error(s)}})}function Gn(t,e,n,r,i,s){return w(this,null,function*(){try{let a=i.getFileCache(r).frontmatter,o=ee(n,a);if(!xt(t,e,n,o))return!1;if(yield e.newBranch(t,o),yield e.publish(r,!0,t,o,[],!0)){if(n.upload.metadataExtractorPath.length>0&&Q.Platform.isDesktop){let h=yield Qr(app,n);h&&(yield e.uploadMetadataExtractorFiles(h,t,o))}(yield e.updateRepository(t,o))?(yield Xr(e,r,n,o),yield ar(r,o,i,s,n)):new Q.Notice(c.t("error.errorPublish",{repoInfo:n.github.repo}))}}catch(a){a instanceof DOMException||(V(a,n),new Q.Notice(c.t("error.errorPublish",{repoInfo:n.github.repo})))}})}function Au(t,e,n,r,i,s){return w(this,null,function*(){let a=i.settings;new Q.Notice(c.t("informations.scanningRepo"));let o=t.getAllFileWithPath(),u=yield t.getAllFileFromRepo(s.branch,e,a,s),l=t.getNewFiles(o,u,r);if(l.length>0){new Q.Notice(c.t("informations.foundNoteToSend",{nbNotes:l.length}));let d=i.addStatusBarItem();if(!xt(n,t,a,s))return!1;yield t.newBranch(n,s),yield _n(t,i.settings,e,d,n,s,l,!1)}else new Q.Notice(c.t("informations.noNewNote"))})}function Ru(t,e,n,r,i,s){return w(this,null,function*(){let a=i.settings;new Q.Notice(c.t("informations.scanningRepo"));let o=t.getAllFileWithPath(),u=yield t.getAllFileFromRepo(s.branch,e,a,s),l=t.getNewFiles(o,u,r),d=yield t.getEditedFiles(o,u,r,l);if(d.length>0){new Q.Notice(c.t("informations.foundNoteToSend",{nbNotes:d.length}));let h=i.addStatusBarItem();if(!xt(n,t,a,s))return!1;yield t.newBranch(n,s),yield _n(t,a,e,h,n,s,d,!1)}else new Q.Notice(c.t("informations.noNewNote"))})}function Lu(t,e,n,r,i,s){return w(this,null,function*(){let a=i.settings;new Q.Notice(c.t("informations.scanningRepo"));let o=t.getAllFileWithPath(),u=yield t.getAllFileFromRepo(s.branch,e,a,s),l=[],d=yield t.getEditedFiles(o,u,r,l);if(d.length>0){new Q.Notice(c.t("informations.foundNoteToSend",{nbNotes:d.length}));let h=i.addStatusBarItem();if(!xt(n,t,a,s))return!1;yield t.newBranch(n,s),yield _n(t,a,e,h,n,s,d,!1)}else new Q.Notice(c.t("informations.noNewNote"))})}var es=require("obsidian");var Qi={};$r(Qi,{commands:()=>Hd,common:()=>Ud,default:()=>Xd,deletion:()=>Wd,error:()=>qd,informations:()=>zd,modals:()=>Zd,publish:()=>Kd,regex:()=>Yd,settings:()=>Jd,statusBar:()=>Qd});var Hd={checkValidity:{inBranch:{error403:"Error 403: {{- repoInfo}} was moved permanently (from {{- branchInfo}}).",error404:"Error 404: The branch {{- branchInfo}} was not found in {{- repoInfo}}."},inRepo:{error301:"Error 301: {{- repoInfo}}  was moved permanently.",error403:"Error 403: this action is forbidden for {{- repoInfo}}.",error404:"Error 404: {{- repoInfo}}: is not found."},repoExistsTestBranch:"Repository {{- repoOwner}}/{{- repoName}} exists. Now testing the {{- main}} branch.",success:"{{- repoInfo}} seems to be valid!",title:"Test the connection to the configured repository"},copyLink:"Create a link to this note",publisherDeleteClean:"Purge depublished and deleted files",shareActiveFile:"Upload single current active note",shareViewFiles:"Upload {{- viewFile}} with Github Publisher",uploadAllEditedNote:"Refresh all published notes",uploadAllNewEditedNote:"Refresh published and upload new notes",uploadAllNotes:"Upload all shared notes",uploadNewNotes:"Upload unpublished notes"},Ud={add:"Add {{- things}}",after:"After",attachments:"attachments",before:"Before",cancel:"Cancel",close:"Close",delete:"Delete {{- things}}",edit:"Edit {{- things}}",error:"Error",files:"files",here:"here",or:"or",path:{file:"File name",folder:"Folder path",full:"Filepath"},published:"Published",regex:"regex",save:"Save",shared:"Shared",text:"text",warning:"Warning"},Wd={defaultFolder:"You need a default folder name in the settings to use this command.",failed:"Failed to delete {{- nb}} files.",noFile:"No files have been deleted.",rootFolder:"You need to configure a root folder in the settings to use this command.",success:"Successfully deleted {{- nb}} files."},qd={dataview:"Unable to render dataview query. Please update the dataview plugin to the last version.",errorConfig:"Error configuring {{- repoInfo}}. Please check your settings.",errorPublish:"Error during upload to {{- repoInfo}}",isEmpty:"{{- repoInfo}} is empty.",mergeconflic:"Pull-request is not mergeable, you need to do it manually.",unablePublishMultiNotes:"Unable to upload multiple notes, something went wrong.",unablePublishNote:"Unable to upload note {{- file}}, skipping it",whatEmpty:{branch:"Branch",ghToken:"GitHub Token",owner:"Owner",repo:"Repository"}},zd={foundNoteToSend:"Found {{- nbNotes}} new notes to send",migrating:{fileReplace:"Migration of filename replace to the new format...",oldSettings:"Migration of old settings to new settings format...",subFolder:"Adding replacing subfolder to the folderpath replacement..."},noNewNote:"No new notes to upload.",scanningRepo:"Scanning the repository, may take a while...",sendMessage:"Upload {{- nbNotes}} notes to {{- repoOwner}}:{{- repoName}}",startingClean:"Starting cleaning {{- repoInfo}}",successPublishOneNote:"Successfully uploaded {{- file}} to {{- repoInfo}}",successfullPublish:"Successfully uploaded {{- nbNotes}} to {{- repoInfo}}",waitingWorkflow:"Now, waiting for the workflow to be completed..."},Zd={export:{copy:"Copy to clipboard",desc:"Export settings to clipboard or a file.",download:"Download",title:"Export"},import:{desc:"Import settings from text or a file. Note : this will overwrite your current settings (except for username, repo name and token).",error:{isEmpty:"the configuration is empty.",span:"Error importing configuration: "},importFromFile:"Import from file",paste:"Paste configuration here...",title:"Import"}},Kd={branch:{alreadyExists:"Branch already exists ({{- branchName}} on {{- repoInfo}} - Using it.",error:"Error with {{- repoInfo}}: {{- error}}",prMessage:"Pull-Request [{{- branchName}}] from Obsidian",success:"Branch successfully created (status: {{- branchStatus}}) on {{- repoInfo}}"}},Yd={entry:"Value to replace",replace:"Replacement"},Jd={conversion:{dataview:{desc:"Convert dataview to markdown.",title:"Dataview"},desc:"Theses option won't change the content of the file in your Obsidian Vault, but will change the content of the file in Github.",hardBreak:{desc:"Add a markdown hard line break (double whitespace) after each line.",title:"Markdown hard line break"},links:{desc:'You can prevent links to be converted and keep the alt text (or filename) by using the frontmatter key "links" with the value "false".',folderNote:{desc:"Rename files to a specified name (default: index.md) if it has the same name as their parent folder/category (also works if the note is outside of the folder).",title:"Folder note"},internals:{desc:"Convert internal links to their counterpart in the repository, with relative path.",title:"Internals Links"},nonShared:{desc:"Same option as internals, but for notes that are not yet published. Disabled, only the filename will be conserved.",title:"Convert internal links pointing to unpublished notes"},title:"Links",wikilinks:{desc:"Convert Wikilinks to MDlinks, without changing the contents.",title:"[[Wikilinks]] to [MDlinks](links)"}},sectionTitle:"Main text",tags:{desc:"This will convert any frontmatter or dataview inline field into frontmatter tags. Separate fields with a comma.",exclude:{desc:"This will exclude value from being converted. Separate fields with a comma.",title:"Exclude value from conversion"},inlineTags:{desc:'Add your inline tags in your frontmatter tags field and converting nested tags with replacing "/" with "_"',title:"Inline tags"},title:"Convert frontmatter/dataview field into tags"},title:"Content's conversion"},embed:{defaultImageFolder:{desc:"To use a folder different from default",title:"Default attachment folder"},title:"Embed",transferImage:{desc:"Send attachments embedded in a file to GitHub.",title:"Transfer attachments"},transferMetaFile:{desc:"Set the names of the metadata field you want to use to send files. Separate fields with a comma. Dataview inline field are supported.",title:"Send files using a metadata field"},transferNotes:{desc:"Send embedded notes in a shared file to GitHub. Only shared files will be send!",title:"Transfer embedded notes"}},exportSettings:"Export",github:{apiType:{desc:"Choose between the Github API or the Github Enterprise API (only Github Enterprise users \u2014 Advanced user!).",dropdown:{enterprise:"Enterprise",free:"Free/Pro/Team (default)"},hostname:{desc:"The hostname of your Github Enterprise instance.",title:"Github Enterprise Hostname"},title:"API Type"},automaticallyMergePR:"Automatically merge pull requests",branch:{desc:'If you use a different branch than "main"',title:"Main branch"},ghToken:{desc:"A GitHub token with repository permission. You can generate it ",title:"Github Token"},repoName:{desc:"The name of the repository where you store your blog.",placeholder:"mkdocs-template",title:"Repository Name"},testConnection:"Test connection",title:"GitHub Configuration",username:{desc:"Your GitHub username.",title:"Github Username"}},githubWorkflow:{autoCleanUp:{desc:"If the plugin must remove from GitHub the depublished files (stop share or deleted)",title:"Auto clean up"},excludedFiles:{desc:'If you want to exclude some folder or file from the autoclean, add them here. You can use regex by surrounding the string with "/". Separate files with a comma.',title:"Excluded files and folder"},githubAction:{desc:'If you want to activate a GitHub action when the plugin push the file, set the name of the file (in your .github/worfklows folder). Only workflow with the "workflow_dispatch" event will be triggered.',title:"Github action name"},prRequest:{desc:"The message send when the pull-request is merged. Will always followed by the pull-request number.",title:"Commit message"},useMetadataExtractor:{desc:"Send the files generated by the metadata-extractor plugin in this folder.",title:"Metadata-extractor files"}},help:{frontmatter:{attachment:{folder:"Change the default folder for the attachments",send:"Send all attachments to GitHub"},autoclean:"Disable or enable autocleaning",baselink:"Change the base link for the copy link command",convert:{enableOrDisable:"Enable or disable the conversion of links. Disabling this will remove the",syntax:"syntax, while keeping the file name or the alternative text."},dataview:"Convert dataview queries to markdown.",desc:"Moreover, there are some frontmatter YAML keys that can be usefull for your workflow. The YAML code below show the default settings, but feel free to change it to your needs in each notes!",embed:{remove:"Remove the embed from the note, leaving empty line.",send:"Send embedded note to GitHub"},hardBreak:"Convert all linebreaks to markdown \xABhard break\xBB.",internals:"Convert internals links to their counterpart in the website, with relative path. Disabled, the plugin will keep the internal link as is.",mdlinks:"Convert all [[wikilinks]] to [markdown](links)",nonShared:"Convert internal links pointing to a unshared file to their counterpart in the website, with relative path. Disabled, the plugin will keep the filename.",path:"You can override all path settings using this key. The path will be relative to the root of your repository.",repo:{branch:"Branch of the repo",desc:"Change the default repo for the note.",owner:"Owner of the repo",repo:"Name of the repo"},share:"This key is used to share a note with the plugin.",title:"Frontmatter keys cheatsheet",titleKey:"Change the title of the note."},multiRepoHelp:{desc:"If you want to send your notes to multiple repository, you can use the ",desc2:"key in your frontmatter. The value of this key must be a list of repository. Each repository must have the following keys ",exampleDesc:"The YAML code below show an example based on your settings.",title:"Send to multiple repository"},title:"Help",usefulLinks:{discussion:"Discussion",documentation:"Documentation",issue:"Issue",links:"https://obsidian-publisher.netlify.app/",repository:"Repository",title:"Useful links"}},importSettings:"Import settings",plugin:{copyLink:{baselink:{desc:"The base link of your website. By default : https://username.github.io/repo/",title:"Base link"},command:"Add a command to copy the link of the note (need reloading the plugin to take effect)",desc:"Send a link to your note in your clipboard",linkpathremover:{desc:"Remove this part from the created links. Separate by comma if multiple value must be removed.",title:"Remove link part"},title:"Copy link"},editorMenu:{desc:"Add a sharing commands in the right-click menu",title:"Editor Menu"},excludedFolder:{desc:"Never publish file in these folder, regardless of the share key. Separate folder name by comma.",title:"Excluded Folder"},fileMenu:{desc:"Add an sharing commands in the file menu",title:"File Menu"},logNoticeHeader:{desc:"On mobile, it can be hard to debug the plugin. Enable this option to log every error in a Notice.",title:"Notice every error"},shareExternalModified:{desc:"Send edited file if they are different from the active file. Useful when editing metadata using MetaEdit or Metadata Menu.",title:"Share external modified file"},shareKey:{desc:"The frontmatter key to publish your file on the website.",title:"Share Key"},title:"Plugin Settings"},regexReplacing:{empty:"Replacement can be empty to remove the whole string.",forbiddenValue:"The {{- what}} cannont contain the character: {{- forbiddenChar}}",modal:{desc:'Replace text in the file with the given value. Enclose the text with "" to use regex.',title:{all:"Folder path & filename replacer",only:"Replace filename",text:"Text replacer"}},momentReplaceRegex:"Run replacement {{- moment}} the other plugin conversion (dataview, internals links...)",warningPath:'Warning! Using the character "/" will edit the path, be careful with this option.'},upload:{defaultFolder:{desc:"Set the default reception folder",placeholder:"docs",title:"Default Folder"},filepathRegex:{},folderBehavior:{desc:"Choose the file tree in the repository, with using a frontmatter key, a fixed folder or your Obsidian file tree.",fixedFolder:"Fixed Folder",obsidianPath:"Obsidian Path",title:"File tree in repository",yaml:"YAML frontmatter"},frontmatterKey:{desc:"Set the key where to get the folder's value.",placeholder:"category",title:"Frontmatter key"},regexFilePathTitle:{desc:'If the text is between "//", it will be used as a regex. Otherwise, it will be used as a string.',title:{FolderPathTitle:"Apply edit on the folder path or the filename (automatically)",titleOnly:"Apply edit on the filename (automatically)"}},rootFolder:{desc:"Append this path to the folder set by the frontmatter key",title:"Root folder"},title:"Upload configuration",useFrontmatterTitle:{desc:'Use a frontmatter value to generate the filename. By default, "title" is used. ',title:"Set the key where to get the value of the filename"}}},Qd={counter:"{{- msg}}: {{- counter}}/{{- nb}}",markedForSharing:"{{- nb}} {{- type}} marked for sharing",sharing:"\u231BSharing {{- type}}",success:"\u2705 {{- action}} {{- type}}"},Xd={commands:Hd,common:Ud,deletion:Wd,error:qd,informations:zd,modals:Zd,publish:Kd,regex:Yd,settings:Jd,statusBar:Qd};var Xi={};$r(Xi,{commands:()=>eh,common:()=>th,default:()=>ch,deletion:()=>nh,error:()=>rh,informations:()=>ih,modals:()=>sh,publish:()=>ah,regex:()=>oh,settings:()=>uh,statusBar:()=>lh});var eh={checkValidity:{inBranch:{error403:"Erreur 403: {{- repoInfo}} a \xE9t\xE9 d\xE9plac\xE9 de mani\xE8re permanente (depuis {{- branchInfo}}",error404:"Erreur 404 : La branche {{- branchInfo}} est introuvable depuis {{- repoInfo}}"},inRepo:{error301:"Erreur 301 : {{- repoInfo}} a \xE9t\xE9 d\xE9plac\xE9 de mani\xE8re permanente",error403:"Erreur 403 : Cette action est interdite pour {{- repoInfo}}",error404:"Erreur 404 : {{- repoInfo}} est introuvable"},repoExistsTestBranch:"Le d\xE9p\xF4t {{- repoOwner}}/{{- repoName}} existe. Maintenant, nous allons tester la branche {{- main}}",success:"{{- repoInfo}} semble valide !",title:"Tester la connexion au d\xE9p\xF4t configur\xE9"},copyLink:"Cr\xE9er un lien vers cette note",publisherDeleteClean:"Purger les fichiers d\xE9publi\xE9s et supprim\xE9s",shareActiveFile:"Transf\xE9rer la note active",shareViewFiles:"Transf\xE9rer {{- viewFile}} avec Github Publisher",uploadAllEditedNote:"Rafra\xEEchir toutes les notes publi\xE9es",uploadAllNewEditedNote:"Rafra\xEEchir les notes publi\xE9es et transf\xE9rer les nouvelles notes",uploadAllNotes:"Transf\xE9rer toutes les notes",uploadNewNotes:"Transf\xE9rer les nouvelles notes"},th={add:"Ajouter {{- things}}",after:"Apr\xE8s",attachments:"pi\xE8ces-jointes",before:"Avant",cancel:"Annuler",close:"Fermer",delete:"Supprimer {{- things}}",edit:"\xC9diter {{- things}}",error:"Erreur",files:"fichiers",here:"ici",or:"ou",path:{file:"Nom du fichier",folder:"Chemin du dossier",full:"Chemin du fichier"},published:"publi\xE9s",regex:"regex",save:"Sauvegarder",shared:"partag\xE9s",text:"texte",warning:"Attention"},nh={defaultFolder:"Vous avez besoin d'un dossier par d\xE9faut dans les param\xE8tres pour utiliser cette commande.",failed:"\xC9chec de la suppression de {{- nb}} notes.",noFile:"Aucun fichier n'a \xE9t\xE9 supprim\xE9.",rootFolder:"Vous devez configurer un dossier racine dans les param\xE8tres pour utiliser cette commande.",success:"Suppression r\xE9ussie de {{- nb}} fichiers."},rh={dataview:"Impossible de convertir la requ\xEAte Dataview. Veuillez mettre \xE0 jour le module Dataview \xE0 la derni\xE8re version;",errorConfig:"Erreur de configuration pour {{- repoInfo}}. Merci de v\xE9rifier vos param\xE8tres.",errorPublish:"Erreur lors de la publication sur {{- repoInfo}}",isEmpty:"{{- repoInfo}} est vide.",mergeconflic:"La Pull-Request n'est pas fusionnale, vous avez besoin de le faire manuellement.",unablePublishMultiNotes:"Impossible de transf\xE9rer plusieurs notes, quelque chose s'est mal pass\xE9.",unablePublishNote:"Impossible de transf\xE9rer {{- file}}, le fichier a \xE9t\xE9 ignor\xE9.",whatEmpty:{branch:"Branch",ghToken:"Github Token",owner:"Propri\xE9taire",repo:"D\xE9p\xF4t"}},ih={foundNoteToSend:"Trouv\xE9 {{- nbNotes}} nouvelles notes \xE0 transf\xE9rer.",migrating:{fileReplace:"Migration du remplacement du nom du fichier au nouveau format...",oldSettings:"Migration des anciens param\xE8tres au nouveau format...",subFolder:"Ajout du remplacement du sous-dossier au remplacement de chemin de fichier..."},noNewNote:"Aucune note \xE0 transf\xE9rer.",scanningRepo:"Scan du d\xE9p\xF4t, veuillez patienter...",sendMessage:"Transfert de {{- nbNotes}} notes vers {{- repoOwner}}/{{- repoName}}",startingClean:"D\xE9but du nettoyage de {{- repoInfo}}",successPublishOneNote:"Transfert r\xE9ussi de {{- file}} vers {{- repoInfo}}",successfullPublish:"Transfert r\xE9ussi de {{- nbNotes}} notes vers {{- repoInfo}}",waitingWorkflow:"Maintenant, attente de la fin du workflow..."},sh={export:{copy:"Copier vers le presse-papier",desc:"Exporter les param\xE8tres vers un fichier ou dans le presse-papier.",download:"T\xE9l\xE9charger",title:"Exporter"},import:{desc:"Importer des param\xE8tres depuis un fichier ou un texte. Cela \xE9crasera vos param\xE8tres actuels (sauf le nom du d\xE9p\xF4t, le nom d'utilisateur et votre token)",error:{isEmpty:"la configuration est vide",span:"Erreur lors de l'importation de la configuration :"},importFromFile:"Import depuis le fichier",paste:"Coller la configuration ici...",title:"Importer"}},ah={branch:{alreadyExists:"La branche {{- branchName}} sur {{- repoInfo}} existe d\xE9j\xE0 - Utilisation de celle-ci.",error:"Erreur avec {{- repoInfo}} : {{- error}}",prMessage:"Pull-Request [{{- branchName}}] depuis Obsidian",success:"La branche a \xE9t\xE9 cr\xE9e avec succ\xE8s (status: {{- branchStatus}} sur {{- repoInfo}})"}},oh={entry:"Valeur \xE0 remplacer",replace:"Remplacement"},uh={conversion:{dataview:{desc:"Convertir les requ\xEAtes Dataview en markdown.",title:"Dataview"},desc:"Ces options ne changent pas le contenu du fichier dans votre coffre Obsidian, mais changeront le contenu du fichier publi\xE9 sur GitHub.",hardBreak:{desc:"Ajoutez un retour \xE0 la ligne Markdown (double espace) apr\xE8s chaque ligne.",title:"Saut de ligne strict"},links:{desc:'Vous pouvez emp\xEAcher la conversion des liens et conserver le texte alt (ou le nom du fichier) en utilisant la cl\xE9 frontmatter "links" avec la valeur "false".',folderNote:{desc:`Renommer les fichiers en un nom sp\xE9cifique (d\xE9faut : "index.md") s'il porte le m\xEAme nom que leur dossier/cat\xE9gorie parent (fonctionne aussi si la note est \xE0 l'ext\xE9rieur du dossier).`,title:"Folder Note"},internals:{desc:"Convertir les liens internes pointant vers les notes publi\xE9es vers leur homologue dans le d\xE9p\xF4t, sous forme de chemin relatif.",title:"Liens internes"},nonShared:{desc:"L'option pr\xE9c\xE9dente, mais appliqu\xE9es aux liens internes pointant vers des notes non-publi\xE9es. D\xE9sactiv\xE9, seul le nom du fichier sera conserv\xE9.",title:"Conversion des liens internes pointant vers des notes non-publi\xE9es"},title:"Liens",wikilinks:{desc:"Conversion des liens wikilinks en liens Markdown, sans en modifier le contenu.",title:"Convertir [[WikiLinks]] en [liens](Markdown)"}},sectionTitle:"Texte principal",tags:{desc:"Ceci convertira tous les champs du frontmatter/dataview en tags. S\xE9parez les champs par une virgule.",exclude:{desc:"Exclusion de champs de la conversion. S\xE9parer les valeurs par une virgule.",title:"Exclusion de tags"},inlineTags:{desc:'Ajoute vos inlines tags dans votre bloc frontmatter et converti les tags imbriqu\xE9s en rempla\xE7ant "/" par "_".',title:"Inlines tags"},title:"Convertir des champs dataview ou frontmatter en tags"},title:"Conversion du contenu"},embed:{defaultImageFolder:{desc:"Pour utiliser un dossier diff\xE9rent de celui par d\xE9faut pour les pi\xE8ces-jointes.",title:"Dossier de pi\xE8ces-jointes par d\xE9faut"},title:"Embed",transferImage:{desc:"Transf\xE9rer les pi\xE8ces-jointes",title:"Envoyer les pi\xE8ces-jointes int\xE9gr\xE9es dans un fichier dans le d\xE9p\xF4t."},transferMetaFile:{desc:"Permet d'envoyer des fichiers en utilisant une cl\xE9 frontmatter/dataview. S\xE9parer les champs par une virgule.",title:"Envoyer des fichiers en utilisant une cl\xE9 frontmatter/dataview"},transferNotes:{desc:"Envoyer les notes int\xE9gr\xE9es dans un fichier publi\xE9 dans le d\xE9p\xF4t. Seul les fichiers publi\xE9s seront envoy\xE9s !",title:"Transf\xE9rer les notes int\xE9gr\xE9es"}},exportSettings:"Export",github:{apiType:{desc:"Choisir entre l'API GitHub ou l'API pour GitHub Entreprise (uniquement pour les utilisateurs de GitHub Enterprise \u2014 Utilisateur avanc\xE9 !).",dropdown:{enterprise:"Entreprise",free:"Free/Pro/Team (d\xE9faut)"},hostname:{desc:"Le nom de l'instance Github de votre entreprise.",title:"Instance Github Entreprise"},title:"Type d'API"},automaticallyMergePR:"Fusionner automatiquement les pull-request",branch:{desc:'Dans le cas o\xF9 vous souhaitez utiliser une branche diff\xE9rente de "main".',title:"Branche principale"},ghToken:{desc:"Un token GitHub avec autorisation de d\xE9p\xF4t. Vous pouvez le g\xE9n\xE9rer ",title:"Token Github"},repoName:{desc:"Le nom du d\xE9p\xF4t dans lequel vos fichiers seront transf\xE9r\xE9s.",placeholder:"mkdocs-template",title:"Nom du d\xE9p\xF4t"},testConnection:"Tester la connexion",title:"Configuration GitHub",username:{desc:"Votre username sur GitHub.",title:"Nom d'utilisateur GitHub"}},githubWorkflow:{autoCleanUp:{desc:"Si le plugin doit supprimer de votre d\xE9p\xF4t les fichiers d\xE9publi\xE9s (arr\xEAt du partage ou suppression).",title:"Auto-nettoyage"},excludedFiles:{desc:"Si vous voulez exclure certains dossier ou fichier du nettoyage automatique, d\xE9finissez leur chemin. Les regex sont accept\xE9es en les encadrant par des slashs. S\xE9parer les valeurs par une virgule.",title:"fichiers et dossier exclus"},githubAction:{desc:"Si vous souhaitez activer une action GitHub lorsque le plugin push les fichiers dans le d\xE9p\xF4t, il vous faut indiquer le nom du fichier issus du dossier .github/workflows/. Seules les actions activ\xE9es par un workflow_dispatch sont activ\xE9es.",title:"Nom de l'action GitHub"},prRequest:{desc:"Le message envoy\xE9 lorsque la pull-request est fusionn\xE9e. Sera toujours suivi par le num\xE9ro de la pull-request.",title:"Message de commit"},useMetadataExtractor:{desc:"Envoyer les fichiers g\xE9n\xE9r\xE9s par metadata-extractor dans ce dossier.",title:"Fichier de metadata-extractor"}},help:{frontmatter:{attachment:{folder:"Change le dossier par d\xE9faut pour les pi\xE8ces-jointes.",send:"Envoie toutes les pi\xE8ces-jointes dans le d\xE9p\xF4t GitHub."},autoclean:"D\xE9sactive ou active le nettoyage automatique du d\xE9p\xF4t GitHub.",baselink:"Change le lien de base pour la commande de copie de lien.",convert:{enableOrDisable:"Active ou d\xE9sactive la conversion des liens. En d\xE9sactivant cette option, vous supprimez les",syntax:"syntaxes, tout en gardant le nom du fichier ou son text alternatif."},dataview:"Convertit les requ\xEAtes dataview en markdown.",desc:"Il existe quelques cl\xE9s YAML qui peuvent vous \xEAtes utile. Le code ci-dessous montre les param\xE8tres par d\xE9faut, mais n'h\xE9sitez pas \xE0 le modifier selon vos besoins pour chaque note !",embed:{remove:"Supprime les notes int\xE9gr\xE9es du fichier partag\xE9s en ne laissant qu'une ligne vide.",send:"Envoie les notes int\xE9gr\xE9es de la note publi\xE9es dans le d\xE9p\xF4t. Seules les notes partag\xE9es seront envoy\xE9es !"},hardBreak:'Convertit tous les sauts de lignes en "hard break" markdown.',internals:"Convertit les liens internes vers leur homologue du d\xE9p\xF4t, sous forme de liens relatifs. D\xE9sactiv\xE9s, les liens seront conserv\xE9s tels quels.",mdlinks:"Convertir tous les liens [[wikilinks]] en [liens](Markdown)",nonShared:"Convertit les liens internes pointat vers une notes non publi\xE9es vers son futur homologue. D\xE9sactiv\xE9, le plugin conservera le nom du fichier ou son texte alternatif.",path:"Vous pouvez \xE9craser tous les param\xE8tres de chemins en utilisant cette cl\xE9. Le chemin sera cr\xE9\xE9e \xE0 partir de la racine du d\xE9p\xF4t.",repo:{branch:"Nom de la branche",desc:"Changer le d\xE9p\xF4t GitHub pour cette note",owner:"Pseudo GitHub du propri\xE9taire du d\xE9p\xF4t",repo:"Nom du d\xE9p\xF4t"},share:"La cl\xE9 utilis\xE9e pour partager une note",title:"Aide-m\xE9moire frontmatter",titleKey:"Change le titre de la note"},multiRepoHelp:{desc:"Si vous souhaitez envoyer vos notes dans plusieurs d\xE9p\xF4t en m\xEAme temps, vous pouvez utiliser la cl\xE9 ",desc2:"dans votre frontmatter. La valeur de cette cl\xE9 doit \xEAtre une liste. Chaque d\xE9p\xF4t doit avoir les cl\xE9s suivantes :",exampleDesc:"Le code YAML ci-dessous montre un exemple bas\xE9 sur vos param\xE8tres.",title:"Envoie dans plusieurs d\xE9p\xF4t"},title:"Aide",usefulLinks:{discussion:"Discussion",documentation:"Documentation (en anglais)",issue:"Issue",links:"https://obsidian-publisher.netlify.app",repository:"D\xE9p\xF4t",title:"Liens utiles"}},importSettings:"Import",plugin:{copyLink:{baselink:{desc:'Permet de cr\xE9er un lien dans le presse-papier avec cette base. Par d\xE9faut : "https://username.github.io/repo/"',title:"Lien du d\xE9p\xF4t/blog"},command:"Ajouter une commande permettant de copier le lien de la note publi\xE9e dans le presse-papier (n\xE9cessite de recharger le plugin pour prendre effet)",desc:"Envoie d'un lien vers la note publi\xE9es dans votre presse-papier.",linkpathremover:{desc:"Supprimer cette partie des liens cr\xE9\xE9s. S\xE9parer par une virgule si plusieurs valeurs doivent \xEAtre supprim\xE9es.",title:"Suppression d'une partie du lien"},title:"Copie de lien"},editorMenu:{desc:"Ajouter une commande de partage dans le menu du clic droit.",title:'Menu "Edition"'},excludedFolder:{desc:"Les fichiers dans ses dossiers ne seront jamais publi\xE9s, quelle que soit l'\xE9tat de la cl\xE9 de partage. S\xE9parez les noms de dossier par une virgule.",title:"Dossiers exclus"},fileMenu:{desc:'Ajouter une commande de partage dans le menu "Fichier"',title:'Menu "Fichier"'},logNoticeHeader:{desc:"Sur mobile, il peut \xEAtre difficile de debug le module. Activer cette option pour notifier toutes les erreurs via une notification Obsidian.",title:"Notifier toutes les erreurs"},shareExternalModified:{desc:"Envoyer les fichiers modifi\xE9s s'ils sont diff\xE9rents du fichier actif. Utile si vous modifier les m\xE9tadonn\xE9es \xE0 l'aide de Metadata Menu ou MetaEdit.",title:"Partager les fichiers modifi\xE9s externes"},shareKey:{desc:"Cl\xE9 de partage",title:"La cl\xE9 frontmatter pour publier la note sur le d\xE9p\xF4t."},title:"Param\xE8tres du plugin"},regexReplacing:{empty:"Le remplacement peut \xEAtre vide pour supprimer l'ensemble de la cha\xEEne de caract\xE8re.",forbiddenValue:"Le {{- what}} ne peut contenir le caract\xE8re : {{- forbiddenChar}}.",modal:{desc:'Replace des textes dans le fichier par la valeur donn\xE9e. Vous pouvez encadrer le text \xE0 remplacer par "/" pour utiliser un regex.',title:{all:"Remplacement du nom ou du chemin du fichier",only:"Remplacement du titre uniquement",text:"Remplacement de texte"}},momentReplaceRegex:"\xC9x\xE9cuter le remplacement {{- moment}} les autres conversions (dataview, liens internes...)",warningPath:'Attention ! Utiliser le caract\xE8re "/" modifiera le chemin du fichier. Veuillez faire attention avec cette option.'},upload:{defaultFolder:{desc:"D\xE9finir le dossier de r\xE9ception par d\xE9faut",placeholder:"docs",title:"Dossier par d\xE9faut"},filepathRegex:{},folderBehavior:{desc:"Choisir la hierarchie des dossiers dans le d\xE9p\xF4t, en se basant sur une cl\xE9 frontmatter, un dossier fixe ou la hierarchie des dossiers dans Obsidian.",fixedFolder:"Dossier fix\xE9",obsidianPath:"Chemin Obsidian",title:"Hierarchie des dossiers",yaml:"Valeur d'une cl\xE9 frontmatter"},frontmatterKey:{desc:"D\xE9finir le nom de la cl\xE9 o\xF9 obtenir le dossier",placeholder:"category",title:"Cl\xE9 frontmatter"},regexFilePathTitle:{desc:'Si le texte est entre "//", il sera interpr\xE9t\xE9 comme une expression r\xE9guli\xE8re. Sinon, il sera interpr\xE9t\xE9 comme du texte brut.',title:{FolderPathTitle:"\xC9diter le titre et le chemin du dossier (automatiquement)",titleOnly:"\xC9diter le titre (automatiquement)"}},rootFolder:{desc:"Ajouter ce chemin au dossier d\xE9finit par la cl\xE9 frontmatter.",title:"Dossier racine"},title:"Configuration du transfert",useFrontmatterTitle:{desc:'Utiliser un champ du frontmatter pour g\xE9n\xE9rer le nom du fichier. Par d\xE9faut, "title" est utilis\xE9.',title:"Utiliser une cl\xE9 frontmatter pour d\xE9finir le titre"}}},lh={counter:"{{- msg}} : {{- counter}}/{{- nb}}",markedForSharing:"{{- nb}} {{- type}} \xE0 partager",sharing:"\u231BPartage de {{- type}}",success:"\u2705{{- action}} {{- type}}"},ch={commands:eh,common:th,deletion:nh,error:rh,informations:ih,modals:sh,publish:ah,regex:oh,settings:uh,statusBar:lh};var ts={en:{translation:Qi},fr:{translation:Xi}},ns=Object.keys(ts).find(t=>t==es.moment.locale())?es.moment.locale():"en";var Br=class extends Mr.Plugin{getTitleFieldForCommand(n,r){return Wt(Yr(r,n,this.settings),this.settings)}reloadOctokit(){let n,r=this.settings.github.api,i=this.settings.github;return r.tiersForApi==="Enterprise"&&r.hostname.length>0?n=new Nt({baseUrl:`${r.hostname}/api/v3`,auth:i.token}):n=new Nt({auth:i.token}),new Ar(this.settings,n,this.app.vault,this.app.metadataCache,this)}onload(){return w(this,null,function*(){console.log(`Github Publisher v.${this.manifest.version} (lang: ${ns}) loaded`),c.init({lng:ns,fallbackLng:"en",resources:ts,returnNull:!1}),yield this.loadSettings();let n=this.settings;yield lr(n,this);let r=app.vault.getName().replaceAll(" ","-").replaceAll(".","-")+"-"+new Date().toLocaleDateString("en-US").replace(/\//g,"-");this.addSettingTab(new dr(this.app,this,r)),this.registerEvent(this.app.workspace.on("file-menu",(i,s)=>{let a=s instanceof Mr.TFile?this.app.metadataCache.getFileCache(s).frontmatter:null;if(Xe(a,this.settings,s)&&this.settings.plugin.fileMenu){let o=this.getTitleFieldForCommand(s,this.app.metadataCache.getFileCache(s).frontmatter).replace(".md","");i.addItem(u=>{u.setSection("action"),u.setTitle(c.t("commands.shareViewFiles",{viewFile:o})).setIcon("share").onClick(()=>w(this,null,function*(){yield Gn(r,this.reloadOctokit(),this.settings,s,this.app.metadataCache,this.app.vault)}))}),i.addSeparator()}})),this.registerEvent(this.app.workspace.on("editor-menu",(i,s,a)=>{let o=this.app.metadataCache.getFileCache(a.file).frontmatter;if(Xe(o,this.settings,a.file)&&this.settings.plugin.editorMenu){let u=this.getTitleFieldForCommand(a.file,this.app.metadataCache.getFileCache(a.file).frontmatter).replace(".md","");i.addSeparator(),i.addItem(l=>{l.setSection("mkdocs-publisher"),l.setTitle(c.t("commands.shareViewFiles",{viewFile:u})).setIcon("share").onClick(()=>w(this,null,function*(){yield Gn(r,this.reloadOctokit(),this.settings,a.file,this.app.metadataCache,this.app.vault)}))})}})),this.settings.plugin.externalShare&&this.registerEvent(this.app.vault.on("modify",i=>w(this,null,function*(){let s=this.settings.plugin.shareKey;if(i!==this.app.workspace.getActiveFile()){let a=this.app.metadataCache.getFileCache(i).frontmatter;(a?a[s]:!1)&&(yield Gn(r,this.reloadOctokit(),this.settings,i,this.app.metadataCache,this.app.vault))}}))),this.settings.plugin.copyLink.addCmd&&this.addCommand({id:"publisher-copy-link",name:c.t("commands.copyLink"),hotkeys:[],checkCallback:i=>{let s=this.app.workspace.getActiveFile(),a=s?this.app.metadataCache.getFileCache(s).frontmatter:null;return s&&a&&Xe(a,this.settings,s)?(i||ar(s,ee(this.settings,a),this.app.metadataCache,this.app.vault,this.settings),!0):!1}}),this.addCommand({id:"publisher-one",name:c.t("commands.shareActiveFile"),hotkeys:[],checkCallback:i=>{let s=this.app.workspace.getActiveFile(),a=s?this.app.metadataCache.getFileCache(s).frontmatter:null;return s&&a&&Xe(a,this.settings,s)?(i||Gn(r,this.reloadOctokit(),this.settings,s,this.app.metadataCache,this.app.vault),!0):!1}}),this.addCommand({id:"publisher-delete-clean",name:c.t("commands.publisherDeleteClean"),hotkeys:[],checkCallback:i=>{if(this.settings.upload.autoclean.enable){if(!i){let s=this.reloadOctokit();Nu(s,this.settings,s.octokit,r,ee(this.settings))}return!0}return!1}}),this.addCommand({id:"publisher-publish-all",name:c.t("commands.uploadAllNotes"),callback:()=>w(this,null,function*(){let i=this.reloadOctokit().getSharedFiles(),s=this.addStatusBarItem(),a=this.reloadOctokit();yield _n(a,this.settings,a.octokit,s,r,ee(this.settings),i,!0)})}),this.addCommand({id:"publisher-upload-new",name:c.t("commands.uploadNewNotes"),callback:()=>w(this,null,function*(){let i=this.reloadOctokit();yield Au(i,i.octokit,r,this.app.vault,this,ee(this.settings))})}),this.addCommand({id:"publisher-upload-all-edited-new",name:c.t("commands.uploadAllNewEditedNote"),callback:()=>w(this,null,function*(){let i=this.reloadOctokit();yield Ru(i,i.octokit,r,this.app.vault,this,ee(this.settings))})}),this.addCommand({id:"publisher-upload-edited",name:c.t("commands.uploadAllEditedNote"),callback:()=>w(this,null,function*(){let i=this.reloadOctokit();yield Lu(i,i.octokit,r,this.app.vault,this,ee(this.settings))})}),this.addCommand({id:"check-this-repo-validy",name:c.t("commands.checkValidity.title"),checkCallback:i=>this.app.workspace.getActiveFile()?(i||ur(r,this.reloadOctokit(),this.settings,this.app.workspace.getActiveFile(),this.app.metadataCache),!0):!1})})}onunload(){console.log("Github Publisher unloaded")}loadSettings(){return w(this,null,function*(){this.settings=Object.assign({},cs,yield this.loadData())})}saveSettings(){return w(this,null,function*(){yield this.saveData(this.settings)})}};
/*! Bundled license information:

is-plain-object/dist/is-plain-object.mjs:
  (*!
   * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)
*/
